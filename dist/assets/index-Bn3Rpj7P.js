function Kw(i,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in i)){const o=Object.getOwnPropertyDescriptor(s,a);o&&Object.defineProperty(i,a,o.get?o:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function yf(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function xo(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var t=function s(){var a=!1;try{a=this instanceof s}catch{}return a?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(s){var a=Object.getOwnPropertyDescriptor(i,s);Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:function(){return i[s]}})}),t}var gd={exports:{}},Fr={};var Qy;function Xw(){if(Qy)return Fr;Qy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:i,type:s,key:c,ref:a!==void 0?a:null,props:o}}return Fr.Fragment=e,Fr.jsx=t,Fr.jsxs=t,Fr}var Jy;function Qw(){return Jy||(Jy=1,gd.exports=Xw()),gd.exports}var p=Qw(),pd={exports:{}},ve={};var Zy;function Jw(){if(Zy)return ve;Zy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),v=Symbol.iterator;function _(R){return R===null||typeof R!="object"?null:(R=v&&R[v]||R["@@iterator"],typeof R=="function"?R:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,T={};function C(R,K,ne){this.props=R,this.context=K,this.refs=T,this.updater=ne||S}C.prototype.isReactComponent={},C.prototype.setState=function(R,K){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,K,"setState")},C.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function A(){}A.prototype=C.prototype;function j(R,K,ne){this.props=R,this.context=K,this.refs=T,this.updater=ne||S}var D=j.prototype=new A;D.constructor=j,w(D,C.prototype),D.isPureReactComponent=!0;var N=Array.isArray;function q(){}var P={H:null,A:null,T:null,S:null},U=Object.prototype.hasOwnProperty;function L(R,K,ne){var se=ne.ref;return{$$typeof:i,type:R,key:K,ref:se!==void 0?se:null,props:ne}}function Z(R,K){return L(R.type,K,R.props)}function W(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function B(R){var K={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ne){return K[ne]})}var G=/\/+/g;function ae(R,K){return typeof R=="object"&&R!==null&&R.key!=null?B(""+R.key):K.toString(36)}function re(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(q,q):(R.status="pending",R.then(function(K){R.status==="pending"&&(R.status="fulfilled",R.value=K)},function(K){R.status==="pending"&&(R.status="rejected",R.reason=K)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function H(R,K,ne,se,fe){var ge=typeof R;(ge==="undefined"||ge==="boolean")&&(R=null);var Oe=!1;if(R===null)Oe=!0;else switch(ge){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(R.$$typeof){case i:case e:Oe=!0;break;case y:return Oe=R._init,H(Oe(R._payload),K,ne,se,fe)}}if(Oe)return fe=fe(R),Oe=se===""?"."+ae(R,0):se,N(fe)?(ne="",Oe!=null&&(ne=Oe.replace(G,"$&/")+"/"),H(fe,K,ne,"",function(On){return On})):fe!=null&&(W(fe)&&(fe=Z(fe,ne+(fe.key==null||R&&R.key===fe.key?"":(""+fe.key).replace(G,"$&/")+"/")+Oe)),K.push(fe)),1;Oe=0;var ke=se===""?".":se+":";if(N(R))for(var Ge=0;Ge<R.length;Ge++)se=R[Ge],ge=ke+ae(se,Ge),Oe+=H(se,K,ne,ge,fe);else if(Ge=_(R),typeof Ge=="function")for(R=Ge.call(R),Ge=0;!(se=R.next()).done;)se=se.value,ge=ke+ae(se,Ge++),Oe+=H(se,K,ne,ge,fe);else if(ge==="object"){if(typeof R.then=="function")return H(re(R),K,ne,se,fe);throw K=String(R),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function ee(R,K,ne){if(R==null)return R;var se=[],fe=0;return H(R,se,"","",function(ge){return K.call(ne,ge,fe++)}),se}function ue(R){if(R._status===-1){var K=R._result;K=K(),K.then(function(ne){(R._status===0||R._status===-1)&&(R._status=1,R._result=ne)},function(ne){(R._status===0||R._status===-1)&&(R._status=2,R._result=ne)}),R._status===-1&&(R._status=0,R._result=K)}if(R._status===1)return R._result.default;throw R._result}var me=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},we={map:ee,forEach:function(R,K,ne){ee(R,function(){K.apply(this,arguments)},ne)},count:function(R){var K=0;return ee(R,function(){K++}),K},toArray:function(R){return ee(R,function(K){return K})||[]},only:function(R){if(!W(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return ve.Activity=b,ve.Children=we,ve.Component=C,ve.Fragment=t,ve.Profiler=a,ve.PureComponent=j,ve.StrictMode=s,ve.Suspense=d,ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,ve.__COMPILER_RUNTIME={__proto__:null,c:function(R){return P.H.useMemoCache(R)}},ve.cache=function(R){return function(){return R.apply(null,arguments)}},ve.cacheSignal=function(){return null},ve.cloneElement=function(R,K,ne){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var se=w({},R.props),fe=R.key;if(K!=null)for(ge in K.key!==void 0&&(fe=""+K.key),K)!U.call(K,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&K.ref===void 0||(se[ge]=K[ge]);var ge=arguments.length-2;if(ge===1)se.children=ne;else if(1<ge){for(var Oe=Array(ge),ke=0;ke<ge;ke++)Oe[ke]=arguments[ke+2];se.children=Oe}return L(R.type,fe,se)},ve.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:o,_context:R},R},ve.createElement=function(R,K,ne){var se,fe={},ge=null;if(K!=null)for(se in K.key!==void 0&&(ge=""+K.key),K)U.call(K,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(fe[se]=K[se]);var Oe=arguments.length-2;if(Oe===1)fe.children=ne;else if(1<Oe){for(var ke=Array(Oe),Ge=0;Ge<Oe;Ge++)ke[Ge]=arguments[Ge+2];fe.children=ke}if(R&&R.defaultProps)for(se in Oe=R.defaultProps,Oe)fe[se]===void 0&&(fe[se]=Oe[se]);return L(R,ge,fe)},ve.createRef=function(){return{current:null}},ve.forwardRef=function(R){return{$$typeof:h,render:R}},ve.isValidElement=W,ve.lazy=function(R){return{$$typeof:y,_payload:{_status:-1,_result:R},_init:ue}},ve.memo=function(R,K){return{$$typeof:f,type:R,compare:K===void 0?null:K}},ve.startTransition=function(R){var K=P.T,ne={};P.T=ne;try{var se=R(),fe=P.S;fe!==null&&fe(ne,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(q,me)}catch(ge){me(ge)}finally{K!==null&&ne.types!==null&&(K.types=ne.types),P.T=K}},ve.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},ve.use=function(R){return P.H.use(R)},ve.useActionState=function(R,K,ne){return P.H.useActionState(R,K,ne)},ve.useCallback=function(R,K){return P.H.useCallback(R,K)},ve.useContext=function(R){return P.H.useContext(R)},ve.useDebugValue=function(){},ve.useDeferredValue=function(R,K){return P.H.useDeferredValue(R,K)},ve.useEffect=function(R,K){return P.H.useEffect(R,K)},ve.useEffectEvent=function(R){return P.H.useEffectEvent(R)},ve.useId=function(){return P.H.useId()},ve.useImperativeHandle=function(R,K,ne){return P.H.useImperativeHandle(R,K,ne)},ve.useInsertionEffect=function(R,K){return P.H.useInsertionEffect(R,K)},ve.useLayoutEffect=function(R,K){return P.H.useLayoutEffect(R,K)},ve.useMemo=function(R,K){return P.H.useMemo(R,K)},ve.useOptimistic=function(R,K){return P.H.useOptimistic(R,K)},ve.useReducer=function(R,K,ne){return P.H.useReducer(R,K,ne)},ve.useRef=function(R){return P.H.useRef(R)},ve.useState=function(R){return P.H.useState(R)},ve.useSyncExternalStore=function(R,K,ne){return P.H.useSyncExternalStore(R,K,ne)},ve.useTransition=function(){return P.H.useTransition()},ve.version="19.2.0",ve}var eb;function bf(){return eb||(eb=1,pd.exports=Jw()),pd.exports}var k=bf();const o0=yf(k);var md={exports:{}},Ir={},yd={exports:{}},bd={};var tb;function Zw(){return tb||(tb=1,(function(i){function e(H,ee){var ue=H.length;H.push(ee);e:for(;0<ue;){var me=ue-1>>>1,we=H[me];if(0<a(we,ee))H[me]=ee,H[ue]=we,ue=me;else break e}}function t(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var ee=H[0],ue=H.pop();if(ue!==ee){H[0]=ue;e:for(var me=0,we=H.length,R=we>>>1;me<R;){var K=2*(me+1)-1,ne=H[K],se=K+1,fe=H[se];if(0>a(ne,ue))se<we&&0>a(fe,ne)?(H[me]=fe,H[se]=ue,me=se):(H[me]=ne,H[K]=ue,me=K);else if(se<we&&0>a(fe,ue))H[me]=fe,H[se]=ue,me=se;else break e}}return ee}function a(H,ee){var ue=H.sortIndex-ee.sortIndex;return ue!==0?ue:H.id-ee.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;i.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();i.unstable_now=function(){return c.now()-h}}var d=[],f=[],y=1,b=null,v=3,_=!1,S=!1,w=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function D(H){for(var ee=t(f);ee!==null;){if(ee.callback===null)s(f);else if(ee.startTime<=H)s(f),ee.sortIndex=ee.expirationTime,e(d,ee);else break;ee=t(f)}}function N(H){if(w=!1,D(H),!S)if(t(d)!==null)S=!0,q||(q=!0,B());else{var ee=t(f);ee!==null&&re(N,ee.startTime-H)}}var q=!1,P=-1,U=5,L=-1;function Z(){return T?!0:!(i.unstable_now()-L<U)}function W(){if(T=!1,q){var H=i.unstable_now();L=H;var ee=!0;try{e:{S=!1,w&&(w=!1,A(P),P=-1),_=!0;var ue=v;try{t:{for(D(H),b=t(d);b!==null&&!(b.expirationTime>H&&Z());){var me=b.callback;if(typeof me=="function"){b.callback=null,v=b.priorityLevel;var we=me(b.expirationTime<=H);if(H=i.unstable_now(),typeof we=="function"){b.callback=we,D(H),ee=!0;break t}b===t(d)&&s(d),D(H)}else s(d);b=t(d)}if(b!==null)ee=!0;else{var R=t(f);R!==null&&re(N,R.startTime-H),ee=!1}}break e}finally{b=null,v=ue,_=!1}ee=void 0}}finally{ee?B():q=!1}}}var B;if(typeof j=="function")B=function(){j(W)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ae=G.port2;G.port1.onmessage=W,B=function(){ae.postMessage(null)}}else B=function(){C(W,0)};function re(H,ee){P=C(function(){H(i.unstable_now())},ee)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(H){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var ue=v;v=ee;try{return H()}finally{v=ue}},i.unstable_requestPaint=function(){T=!0},i.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ue=v;v=H;try{return ee()}finally{v=ue}},i.unstable_scheduleCallback=function(H,ee,ue){var me=i.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?me+ue:me):ue=me,H){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=ue+we,H={id:y++,callback:ee,priorityLevel:H,startTime:ue,expirationTime:we,sortIndex:-1},ue>me?(H.sortIndex=ue,e(f,H),t(d)===null&&H===t(f)&&(w?(A(P),P=-1):w=!0,re(N,ue-me))):(H.sortIndex=we,e(d,H),S||_||(S=!0,q||(q=!0,B()))),H},i.unstable_shouldYield=Z,i.unstable_wrapCallback=function(H){var ee=v;return function(){var ue=v;v=ee;try{return H.apply(this,arguments)}finally{v=ue}}}})(bd)),bd}var nb;function e1(){return nb||(nb=1,yd.exports=Zw()),yd.exports}var vd={exports:{}},jt={};var ib;function t1(){if(ib)return jt;ib=1;var i=bf();function e(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(d,f,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:b==null?null:""+b,children:d,containerInfo:f,implementation:y}}var c=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,jt.createPortal=function(d,f){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(d,f,null,y)},jt.flushSync=function(d){var f=c.T,y=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=f,s.p=y,s.d.f()}},jt.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,s.d.C(d,f))},jt.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},jt.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var y=f.as,b=h(y,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,_=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;y==="style"?s.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:b,integrity:v,fetchPriority:_}):y==="script"&&s.d.X(d,{crossOrigin:b,integrity:v,fetchPriority:_,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},jt.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var y=h(f.as,f.crossOrigin);s.d.M(d,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&s.d.M(d)},jt.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var y=f.as,b=h(y,f.crossOrigin);s.d.L(d,y,{crossOrigin:b,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},jt.preloadModule=function(d,f){if(typeof d=="string")if(f){var y=h(f.as,f.crossOrigin);s.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else s.d.m(d)},jt.requestFormReset=function(d){s.d.r(d)},jt.unstable_batchedUpdates=function(d,f){return d(f)},jt.useFormState=function(d,f,y){return c.H.useFormState(d,f,y)},jt.useFormStatus=function(){return c.H.useHostTransitionStatus()},jt.version="19.2.0",jt}var sb;function n1(){if(sb)return vd.exports;sb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),vd.exports=t1(),vd.exports}var ab;function i1(){if(ab)return Ir;ab=1;var i=e1(),e=bf(),t=n1();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)r+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var r=n,l=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(l=r.return),n=r.return;while(n)}return r.tag===3?l:null}function c(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function h(n){if(n.tag===31){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function d(n){if(o(n)!==n)throw Error(s(188))}function f(n){var r=n.alternate;if(!r){if(r=o(n),r===null)throw Error(s(188));return r!==n?null:n}for(var l=n,u=r;;){var g=l.return;if(g===null)break;var m=g.alternate;if(m===null){if(u=g.return,u!==null){l=u;continue}break}if(g.child===m.child){for(m=g.child;m;){if(m===l)return d(g),n;if(m===u)return d(g),r;m=m.sibling}throw Error(s(188))}if(l.return!==u.return)l=g,u=m;else{for(var x=!1,E=g.child;E;){if(E===l){x=!0,l=g,u=m;break}if(E===u){x=!0,u=g,l=m;break}E=E.sibling}if(!x){for(E=m.child;E;){if(E===l){x=!0,l=m,u=g;break}if(E===u){x=!0,u=m,l=g;break}E=E.sibling}if(!x)throw Error(s(189))}}if(l.alternate!==u)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?n:r}function y(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=y(n),r!==null)return r;n=n.sibling}return null}var b=Object.assign,v=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),A=Symbol.for("react.consumer"),j=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function B(n){return n===null||typeof n!="object"?null:(n=W&&n[W]||n["@@iterator"],typeof n=="function"?n:null)}var G=Symbol.for("react.client.reference");function ae(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===G?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case C:return"Profiler";case T:return"StrictMode";case N:return"Suspense";case q:return"SuspenseList";case L:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case S:return"Portal";case j:return n.displayName||"Context";case A:return(n._context.displayName||"Context")+".Consumer";case D:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case P:return r=n.displayName||null,r!==null?r:ae(n.type)||"Memo";case U:r=n._payload,n=n._init;try{return ae(n(r))}catch{}}return null}var re=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},me=[],we=-1;function R(n){return{current:n}}function K(n){0>we||(n.current=me[we],me[we]=null,we--)}function ne(n,r){we++,me[we]=n.current,n.current=r}var se=R(null),fe=R(null),ge=R(null),Oe=R(null);function ke(n,r){switch(ne(ge,r),ne(fe,n),ne(se,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?_y(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=_y(r),n=xy(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}K(se),ne(se,n)}function Ge(){K(se),K(fe),K(ge)}function On(n){n.memoizedState!==null&&ne(Oe,n);var r=se.current,l=xy(r,n.type);r!==l&&(ne(fe,n),ne(se,l))}function et(n){fe.current===n&&(K(se),K(fe)),Oe.current===n&&(K(Oe),zr._currentValue=ue)}var Yi,Ki;function ie(n){if(Yi===void 0)try{throw Error()}catch(l){var r=l.stack.trim().match(/\n( *(at )?)/);Yi=r&&r[1]||"",Ki=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yi+n+Ki}var vt=!1;function Vt(n,r){if(!n||vt)return"";vt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(V){var $=V}Reflect.construct(n,[],Q)}else{try{Q.call()}catch(V){$=V}n.call(Q.prototype)}}else{try{throw Error()}catch(V){$=V}(Q=n())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(V){if(V&&$&&typeof V.stack=="string")return[V.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),x=m[0],E=m[1];if(x&&E){var O=x.split(`
`),I=E.split(`
`);for(g=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;g<I.length&&!I[g].includes("DetermineComponentFrameRoot");)g++;if(u===O.length||g===I.length)for(u=O.length-1,g=I.length-1;1<=u&&0<=g&&O[u]!==I[g];)g--;for(;1<=u&&0<=g;u--,g--)if(O[u]!==I[g]){if(u!==1||g!==1)do if(u--,g--,0>g||O[u]!==I[g]){var Y=`
`+O[u].replace(" at new "," at ");return n.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",n.displayName)),Y}while(1<=u&&0<=g);break}}}finally{vt=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?ie(l):""}function Rn(n,r){switch(n.tag){case 26:case 27:case 5:return ie(n.type);case 16:return ie("Lazy");case 13:return n.child!==r&&r!==null?ie("Suspense Fallback"):ie("Suspense");case 19:return ie("SuspenseList");case 0:case 15:return Vt(n.type,!1);case 11:return Vt(n.type.render,!1);case 1:return Vt(n.type,!0);case 31:return ie("Activity");default:return""}}function Ao(n){try{var r="",l=null;do r+=Rn(n,l),l=n,n=n.return;while(n);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Ga=Object.prototype.hasOwnProperty,Wa=i.unstable_scheduleCallback,Ya=i.unstable_cancelCallback,eu=i.unstable_shouldYield,tu=i.unstable_requestPaint,kt=i.unstable_now,J=i.unstable_getCurrentPriorityLevel,oe=i.unstable_ImmediatePriority,xe=i.unstable_UserBlockingPriority,Gt=i.unstable_NormalPriority,Xi=i.unstable_LowPriority,Ls=i.unstable_IdlePriority,Mx=i.log,kx=i.unstable_setDisableYieldValue,Ka=null,Wt=null;function pi(n){if(typeof Mx=="function"&&kx(n),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(Ka,n)}catch{}}var Yt=Math.clz32?Math.clz32:Px,Dx=Math.log,Nx=Math.LN2;function Px(n){return n>>>=0,n===0?32:31-(Dx(n)/Nx|0)|0}var Oo=256,Ro=262144,Mo=4194304;function Qi(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ko(n,r,l){var u=n.pendingLanes;if(u===0)return 0;var g=0,m=n.suspendedLanes,x=n.pingedLanes;n=n.warmLanes;var E=u&134217727;return E!==0?(u=E&~m,u!==0?g=Qi(u):(x&=E,x!==0?g=Qi(x):l||(l=E&~n,l!==0&&(g=Qi(l))))):(E=u&~m,E!==0?g=Qi(E):x!==0?g=Qi(x):l||(l=u&~n,l!==0&&(g=Qi(l)))),g===0?0:r!==0&&r!==g&&(r&m)===0&&(m=g&-g,l=r&-r,m>=l||m===32&&(l&4194048)!==0)?r:g}function Xa(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Lx(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tg(){var n=Mo;return Mo<<=1,(Mo&62914560)===0&&(Mo=4194304),n}function nu(n){for(var r=[],l=0;31>l;l++)r.push(n);return r}function Qa(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function zx(n,r,l,u,g,m){var x=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var E=n.entanglements,O=n.expirationTimes,I=n.hiddenUpdates;for(l=x&~l;0<l;){var Y=31-Yt(l),Q=1<<Y;E[Y]=0,O[Y]=-1;var $=I[Y];if($!==null)for(I[Y]=null,Y=0;Y<$.length;Y++){var V=$[Y];V!==null&&(V.lane&=-536870913)}l&=~Q}u!==0&&ng(n,u,0),m!==0&&g===0&&n.tag!==0&&(n.suspendedLanes|=m&~(x&~r))}function ng(n,r,l){n.pendingLanes|=r,n.suspendedLanes&=~r;var u=31-Yt(r);n.entangledLanes|=r,n.entanglements[u]=n.entanglements[u]|1073741824|l&261930}function ig(n,r){var l=n.entangledLanes|=r;for(n=n.entanglements;l;){var u=31-Yt(l),g=1<<u;g&r|n[u]&r&&(n[u]|=r),l&=~g}}function sg(n,r){var l=r&-r;return l=(l&42)!==0?1:iu(l),(l&(n.suspendedLanes|r))!==0?0:l}function iu(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function su(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ag(){var n=ee.p;return n!==0?n:(n=window.event,n===void 0?32:$y(n.type))}function rg(n,r){var l=ee.p;try{return ee.p=n,r()}finally{ee.p=l}}var mi=Math.random().toString(36).slice(2),_t="__reactFiber$"+mi,Nt="__reactProps$"+mi,zs="__reactContainer$"+mi,au="__reactEvents$"+mi,Bx="__reactListeners$"+mi,Ux="__reactHandles$"+mi,og="__reactResources$"+mi,Ja="__reactMarker$"+mi;function ru(n){delete n[_t],delete n[Nt],delete n[au],delete n[Bx],delete n[Ux]}function Bs(n){var r=n[_t];if(r)return r;for(var l=n.parentNode;l;){if(r=l[zs]||l[_t]){if(l=r.alternate,r.child!==null||l!==null&&l.child!==null)for(n=Ay(n);n!==null;){if(l=n[_t])return l;n=Ay(n)}return r}n=l,l=n.parentNode}return null}function Us(n){if(n=n[_t]||n[zs]){var r=n.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return n}return null}function Za(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function Hs(n){var r=n[og];return r||(r=n[og]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function yt(n){n[Ja]=!0}var lg=new Set,cg={};function Ji(n,r){Fs(n,r),Fs(n+"Capture",r)}function Fs(n,r){for(cg[n]=r,n=0;n<r.length;n++)lg.add(r[n])}var Hx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ug={},hg={};function Fx(n){return Ga.call(hg,n)?!0:Ga.call(ug,n)?!1:Hx.test(n)?hg[n]=!0:(ug[n]=!0,!1)}function Do(n,r,l){if(Fx(r))if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+l)}}function No(n,r,l){if(l===null)n.removeAttribute(r);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+l)}}function Hn(n,r,l,u){if(u===null)n.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(r,l,""+u)}}function an(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function dg(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Ix(n,r,l){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,r);if(!n.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,m=u.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return g.call(this)},set:function(x){l=""+x,m.call(this,x)}}),Object.defineProperty(n,r,{enumerable:u.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function ou(n){if(!n._valueTracker){var r=dg(n)?"checked":"value";n._valueTracker=Ix(n,r,""+n[r])}}function fg(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var l=r.getValue(),u="";return n&&(u=dg(n)?n.checked?"true":"false":n.value),n=u,n!==l?(r.setValue(n),!0):!1}function Po(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var qx=/[\n"\\]/g;function rn(n){return n.replace(qx,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function lu(n,r,l,u,g,m,x,E){n.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?n.type=x:n.removeAttribute("type"),r!=null?x==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+an(r)):n.value!==""+an(r)&&(n.value=""+an(r)):x!=="submit"&&x!=="reset"||n.removeAttribute("value"),r!=null?cu(n,x,an(r)):l!=null?cu(n,x,an(l)):u!=null&&n.removeAttribute("value"),g==null&&m!=null&&(n.defaultChecked=!!m),g!=null&&(n.checked=g&&typeof g!="function"&&typeof g!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+an(E):n.removeAttribute("name")}function gg(n,r,l,u,g,m,x,E){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||r!=null)){ou(n);return}l=l!=null?""+an(l):"",r=r!=null?""+an(r):l,E||r===n.value||(n.value=r),n.defaultValue=r}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=E?n.checked:!!u,n.defaultChecked=!!u,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(n.name=x),ou(n)}function cu(n,r,l){r==="number"&&Po(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Is(n,r,l,u){if(n=n.options,r){r={};for(var g=0;g<l.length;g++)r["$"+l[g]]=!0;for(l=0;l<n.length;l++)g=r.hasOwnProperty("$"+n[l].value),n[l].selected!==g&&(n[l].selected=g),g&&u&&(n[l].defaultSelected=!0)}else{for(l=""+an(l),r=null,g=0;g<n.length;g++){if(n[g].value===l){n[g].selected=!0,u&&(n[g].defaultSelected=!0);return}r!==null||n[g].disabled||(r=n[g])}r!==null&&(r.selected=!0)}}function pg(n,r,l){if(r!=null&&(r=""+an(r),r!==n.value&&(n.value=r),l==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=l!=null?""+an(l):""}function mg(n,r,l,u){if(r==null){if(u!=null){if(l!=null)throw Error(s(92));if(re(u)){if(1<u.length)throw Error(s(93));u=u[0]}l=u}l==null&&(l=""),r=l}l=an(r),n.defaultValue=l,u=n.textContent,u===l&&u!==""&&u!==null&&(n.value=u),ou(n)}function qs(n,r){if(r){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=r;return}}n.textContent=r}var $x=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yg(n,r,l){var u=r.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?u?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":u?n.setProperty(r,l):typeof l!="number"||l===0||$x.has(r)?r==="float"?n.cssFloat=l:n[r]=(""+l).trim():n[r]=l+"px"}function bg(n,r,l){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,l!=null){for(var u in l)!l.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var g in r)u=r[g],r.hasOwnProperty(g)&&l[g]!==u&&yg(n,g,u)}else for(var m in r)r.hasOwnProperty(m)&&yg(n,m,r[m])}function uu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lo(n){return Gx.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Fn(){}var hu=null;function du(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var $s=null,Vs=null;function vg(n){var r=Us(n);if(r&&(n=r.stateNode)){var l=n[Nt]||null;e:switch(n=r.stateNode,r.type){case"input":if(lu(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),r=l.name,l.type==="radio"&&r!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+rn(""+r)+'"][type="radio"]'),r=0;r<l.length;r++){var u=l[r];if(u!==n&&u.form===n.form){var g=u[Nt]||null;if(!g)throw Error(s(90));lu(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(r=0;r<l.length;r++)u=l[r],u.form===n.form&&fg(u)}break e;case"textarea":pg(n,l.value,l.defaultValue);break e;case"select":r=l.value,r!=null&&Is(n,!!l.multiple,r,!1)}}}var fu=!1;function _g(n,r,l){if(fu)return n(r,l);fu=!0;try{var u=n(r);return u}finally{if(fu=!1,($s!==null||Vs!==null)&&(wl(),$s&&(r=$s,n=Vs,Vs=$s=null,vg(r),n)))for(r=0;r<n.length;r++)vg(n[r])}}function er(n,r){var l=n.stateNode;if(l===null)return null;var u=l[Nt]||null;if(u===null)return null;l=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(s(231,r,typeof l));return l}var In=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gu=!1;if(In)try{var tr={};Object.defineProperty(tr,"passive",{get:function(){gu=!0}}),window.addEventListener("test",tr,tr),window.removeEventListener("test",tr,tr)}catch{gu=!1}var yi=null,pu=null,zo=null;function xg(){if(zo)return zo;var n,r=pu,l=r.length,u,g="value"in yi?yi.value:yi.textContent,m=g.length;for(n=0;n<l&&r[n]===g[n];n++);var x=l-n;for(u=1;u<=x&&r[l-u]===g[m-u];u++);return zo=g.slice(n,1<u?1-u:void 0)}function Bo(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Uo(){return!0}function Sg(){return!1}function Pt(n){function r(l,u,g,m,x){this._reactName=l,this._targetInst=g,this.type=u,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(l=n[E],this[E]=l?l(m):m[E]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Uo:Sg,this.isPropagationStopped=Sg,this}return b(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Uo)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Uo)},persist:function(){},isPersistent:Uo}),r}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ho=Pt(Zi),nr=b({},Zi,{view:0,detail:0}),Wx=Pt(nr),mu,yu,ir,Fo=b({},nr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ir&&(ir&&n.type==="mousemove"?(mu=n.screenX-ir.screenX,yu=n.screenY-ir.screenY):yu=mu=0,ir=n),mu)},movementY:function(n){return"movementY"in n?n.movementY:yu}}),wg=Pt(Fo),Yx=b({},Fo,{dataTransfer:0}),Kx=Pt(Yx),Xx=b({},nr,{relatedTarget:0}),bu=Pt(Xx),Qx=b({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),Jx=Pt(Qx),Zx=b({},Zi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),eS=Pt(Zx),tS=b({},Zi,{data:0}),Tg=Pt(tS),nS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aS(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=sS[n])?!!r[n]:!1}function vu(){return aS}var rS=b({},nr,{key:function(n){if(n.key){var r=nS[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Bo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?iS[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vu,charCode:function(n){return n.type==="keypress"?Bo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Bo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),oS=Pt(rS),lS=b({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eg=Pt(lS),cS=b({},nr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vu}),uS=Pt(cS),hS=b({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),dS=Pt(hS),fS=b({},Fo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),gS=Pt(fS),pS=b({},Zi,{newState:0,oldState:0}),mS=Pt(pS),yS=[9,13,27,32],_u=In&&"CompositionEvent"in window,sr=null;In&&"documentMode"in document&&(sr=document.documentMode);var bS=In&&"TextEvent"in window&&!sr,Cg=In&&(!_u||sr&&8<sr&&11>=sr),jg=" ",Ag=!1;function Og(n,r){switch(n){case"keyup":return yS.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rg(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Gs=!1;function vS(n,r){switch(n){case"compositionend":return Rg(r);case"keypress":return r.which!==32?null:(Ag=!0,jg);case"textInput":return n=r.data,n===jg&&Ag?null:n;default:return null}}function _S(n,r){if(Gs)return n==="compositionend"||!_u&&Og(n,r)?(n=xg(),zo=pu=yi=null,Gs=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Cg&&r.locale!=="ko"?null:r.data;default:return null}}var xS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mg(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!xS[n.type]:r==="textarea"}function kg(n,r,l,u){$s?Vs?Vs.push(u):Vs=[u]:$s=u,r=Rl(r,"onChange"),0<r.length&&(l=new Ho("onChange","change",null,l,u),n.push({event:l,listeners:r}))}var ar=null,rr=null;function SS(n){gy(n,0)}function Io(n){var r=Za(n);if(fg(r))return n}function Dg(n,r){if(n==="change")return r}var Ng=!1;if(In){var xu;if(In){var Su="oninput"in document;if(!Su){var Pg=document.createElement("div");Pg.setAttribute("oninput","return;"),Su=typeof Pg.oninput=="function"}xu=Su}else xu=!1;Ng=xu&&(!document.documentMode||9<document.documentMode)}function Lg(){ar&&(ar.detachEvent("onpropertychange",zg),rr=ar=null)}function zg(n){if(n.propertyName==="value"&&Io(rr)){var r=[];kg(r,rr,n,du(n)),_g(SS,r)}}function wS(n,r,l){n==="focusin"?(Lg(),ar=r,rr=l,ar.attachEvent("onpropertychange",zg)):n==="focusout"&&Lg()}function TS(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Io(rr)}function ES(n,r){if(n==="click")return Io(r)}function CS(n,r){if(n==="input"||n==="change")return Io(r)}function jS(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Kt=typeof Object.is=="function"?Object.is:jS;function or(n,r){if(Kt(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var l=Object.keys(n),u=Object.keys(r);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var g=l[u];if(!Ga.call(r,g)||!Kt(n[g],r[g]))return!1}return!0}function Bg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ug(n,r){var l=Bg(n);n=0;for(var u;l;){if(l.nodeType===3){if(u=n+l.textContent.length,n<=r&&u>=r)return{node:l,offset:r-n};n=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Bg(l)}}function Hg(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Hg(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Fg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Po(n.document);r instanceof n.HTMLIFrameElement;){try{var l=typeof r.contentWindow.location.href=="string"}catch{l=!1}if(l)n=r.contentWindow;else break;r=Po(n.document)}return r}function wu(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var AS=In&&"documentMode"in document&&11>=document.documentMode,Ws=null,Tu=null,lr=null,Eu=!1;function Ig(n,r,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Eu||Ws==null||Ws!==Po(u)||(u=Ws,"selectionStart"in u&&wu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),lr&&or(lr,u)||(lr=u,u=Rl(Tu,"onSelect"),0<u.length&&(r=new Ho("onSelect","select",null,r,l),n.push({event:r,listeners:u}),r.target=Ws)))}function es(n,r){var l={};return l[n.toLowerCase()]=r.toLowerCase(),l["Webkit"+n]="webkit"+r,l["Moz"+n]="moz"+r,l}var Ys={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionrun:es("Transition","TransitionRun"),transitionstart:es("Transition","TransitionStart"),transitioncancel:es("Transition","TransitionCancel"),transitionend:es("Transition","TransitionEnd")},Cu={},qg={};In&&(qg=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function ts(n){if(Cu[n])return Cu[n];if(!Ys[n])return n;var r=Ys[n],l;for(l in r)if(r.hasOwnProperty(l)&&l in qg)return Cu[n]=r[l];return n}var $g=ts("animationend"),Vg=ts("animationiteration"),Gg=ts("animationstart"),OS=ts("transitionrun"),RS=ts("transitionstart"),MS=ts("transitioncancel"),Wg=ts("transitionend"),Yg=new Map,ju="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ju.push("scrollEnd");function vn(n,r){Yg.set(n,r),Ji(r,[n])}var qo=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},on=[],Ks=0,Au=0;function $o(){for(var n=Ks,r=Au=Ks=0;r<n;){var l=on[r];on[r++]=null;var u=on[r];on[r++]=null;var g=on[r];on[r++]=null;var m=on[r];if(on[r++]=null,u!==null&&g!==null){var x=u.pending;x===null?g.next=g:(g.next=x.next,x.next=g),u.pending=g}m!==0&&Kg(l,g,m)}}function Vo(n,r,l,u){on[Ks++]=n,on[Ks++]=r,on[Ks++]=l,on[Ks++]=u,Au|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Ou(n,r,l,u){return Vo(n,r,l,u),Go(n)}function ns(n,r){return Vo(n,null,null,r),Go(n)}function Kg(n,r,l){n.lanes|=l;var u=n.alternate;u!==null&&(u.lanes|=l);for(var g=!1,m=n.return;m!==null;)m.childLanes|=l,u=m.alternate,u!==null&&(u.childLanes|=l),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(g=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,g&&r!==null&&(g=31-Yt(l),n=m.hiddenUpdates,u=n[g],u===null?n[g]=[r]:u.push(r),r.lane=l|536870912),m):null}function Go(n){if(50<Rr)throw Rr=0,Bh=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Xs={};function kS(n,r,l,u){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(n,r,l,u){return new kS(n,r,l,u)}function Ru(n){return n=n.prototype,!(!n||!n.isReactComponent)}function qn(n,r){var l=n.alternate;return l===null?(l=Xt(n.tag,r,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=r,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,r=n.dependencies,l.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Xg(n,r){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,r=l.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Wo(n,r,l,u,g,m){var x=0;if(u=n,typeof n=="function")Ru(n)&&(x=1);else if(typeof n=="string")x=zw(n,l,se.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case L:return n=Xt(31,l,r,g),n.elementType=L,n.lanes=m,n;case w:return is(l.children,g,m,r);case T:x=8,g|=24;break;case C:return n=Xt(12,l,r,g|2),n.elementType=C,n.lanes=m,n;case N:return n=Xt(13,l,r,g),n.elementType=N,n.lanes=m,n;case q:return n=Xt(19,l,r,g),n.elementType=q,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case j:x=10;break e;case A:x=9;break e;case D:x=11;break e;case P:x=14;break e;case U:x=16,u=null;break e}x=29,l=Error(s(130,n===null?"null":typeof n,"")),u=null}return r=Xt(x,l,r,g),r.elementType=n,r.type=u,r.lanes=m,r}function is(n,r,l,u){return n=Xt(7,n,u,r),n.lanes=l,n}function Mu(n,r,l){return n=Xt(6,n,null,r),n.lanes=l,n}function Qg(n){var r=Xt(18,null,null,0);return r.stateNode=n,r}function ku(n,r,l){return r=Xt(4,n.children!==null?n.children:[],n.key,r),r.lanes=l,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Jg=new WeakMap;function ln(n,r){if(typeof n=="object"&&n!==null){var l=Jg.get(n);return l!==void 0?l:(r={value:n,source:r,stack:Ao(r)},Jg.set(n,r),r)}return{value:n,source:r,stack:Ao(r)}}var Qs=[],Js=0,Yo=null,cr=0,cn=[],un=0,bi=null,Mn=1,kn="";function $n(n,r){Qs[Js++]=cr,Qs[Js++]=Yo,Yo=n,cr=r}function Zg(n,r,l){cn[un++]=Mn,cn[un++]=kn,cn[un++]=bi,bi=n;var u=Mn;n=kn;var g=32-Yt(u)-1;u&=~(1<<g),l+=1;var m=32-Yt(r)+g;if(30<m){var x=g-g%5;m=(u&(1<<x)-1).toString(32),u>>=x,g-=x,Mn=1<<32-Yt(r)+g|l<<g|u,kn=m+n}else Mn=1<<m|l<<g|u,kn=n}function Du(n){n.return!==null&&($n(n,1),Zg(n,1,0))}function Nu(n){for(;n===Yo;)Yo=Qs[--Js],Qs[Js]=null,cr=Qs[--Js],Qs[Js]=null;for(;n===bi;)bi=cn[--un],cn[un]=null,kn=cn[--un],cn[un]=null,Mn=cn[--un],cn[un]=null}function ep(n,r){cn[un++]=Mn,cn[un++]=kn,cn[un++]=bi,Mn=r.id,kn=r.overflow,bi=n}var xt=null,Ye=null,Re=!1,vi=null,hn=!1,Pu=Error(s(519));function _i(n){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ur(ln(r,n)),Pu}function tp(n){var r=n.stateNode,l=n.type,u=n.memoizedProps;switch(r[_t]=n,r[Nt]=u,l){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(l=0;l<kr.length;l++)Ce(kr[l],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Ce("invalid",r),gg(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ce("invalid",r);break;case"textarea":Ce("invalid",r),mg(r,u.value,u.defaultValue,u.children)}l=u.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||r.textContent===""+l||u.suppressHydrationWarning===!0||by(r.textContent,l)?(u.popover!=null&&(Ce("beforetoggle",r),Ce("toggle",r)),u.onScroll!=null&&Ce("scroll",r),u.onScrollEnd!=null&&Ce("scrollend",r),u.onClick!=null&&(r.onclick=Fn),r=!0):r=!1,r||_i(n,!0)}function np(n){for(xt=n.return;xt;)switch(xt.tag){case 5:case 31:case 13:hn=!1;return;case 27:case 3:hn=!0;return;default:xt=xt.return}}function Zs(n){if(n!==xt)return!1;if(!Re)return np(n),Re=!0,!1;var r=n.tag,l;if((l=r!==3&&r!==27)&&((l=r===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Zh(n.type,n.memoizedProps)),l=!l),l&&Ye&&_i(n),np(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ye=jy(n)}else if(r===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));Ye=jy(n)}else r===27?(r=Ye,Ni(n.type)?(n=sd,sd=null,Ye=n):Ye=r):Ye=xt?fn(n.stateNode.nextSibling):null;return!0}function ss(){Ye=xt=null,Re=!1}function Lu(){var n=vi;return n!==null&&(Ut===null?Ut=n:Ut.push.apply(Ut,n),vi=null),n}function ur(n){vi===null?vi=[n]:vi.push(n)}var zu=R(null),as=null,Vn=null;function xi(n,r,l){ne(zu,r._currentValue),r._currentValue=l}function Gn(n){n._currentValue=zu.current,K(zu)}function Bu(n,r,l){for(;n!==null;){var u=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),n===l)break;n=n.return}}function Uu(n,r,l,u){var g=n.child;for(g!==null&&(g.return=n);g!==null;){var m=g.dependencies;if(m!==null){var x=g.child;m=m.firstContext;e:for(;m!==null;){var E=m;m=g;for(var O=0;O<r.length;O++)if(E.context===r[O]){m.lanes|=l,E=m.alternate,E!==null&&(E.lanes|=l),Bu(m.return,l,n),u||(x=null);break e}m=E.next}}else if(g.tag===18){if(x=g.return,x===null)throw Error(s(341));x.lanes|=l,m=x.alternate,m!==null&&(m.lanes|=l),Bu(x,l,n),x=null}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===n){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}}function ea(n,r,l,u){n=null;for(var g=r,m=!1;g!==null;){if(!m){if((g.flags&524288)!==0)m=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var x=g.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var E=g.type;Kt(g.pendingProps.value,x.value)||(n!==null?n.push(E):n=[E])}}else if(g===Oe.current){if(x=g.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(n!==null?n.push(zr):n=[zr])}g=g.return}n!==null&&Uu(r,n,l,u),r.flags|=262144}function Ko(n){for(n=n.firstContext;n!==null;){if(!Kt(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function rs(n){as=n,Vn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function St(n){return ip(as,n)}function Xo(n,r){return as===null&&rs(n),ip(n,r)}function ip(n,r){var l=r._currentValue;if(r={context:r,memoizedValue:l,next:null},Vn===null){if(n===null)throw Error(s(308));Vn=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else Vn=Vn.next=r;return l}var DS=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(l,u){n.push(u)}};this.abort=function(){r.aborted=!0,n.forEach(function(l){return l()})}},NS=i.unstable_scheduleCallback,PS=i.unstable_NormalPriority,lt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hu(){return{controller:new DS,data:new Map,refCount:0}}function hr(n){n.refCount--,n.refCount===0&&NS(PS,function(){n.controller.abort()})}var dr=null,Fu=0,ta=0,na=null;function LS(n,r){if(dr===null){var l=dr=[];Fu=0,ta=$h(),na={status:"pending",value:void 0,then:function(u){l.push(u)}}}return Fu++,r.then(sp,sp),r}function sp(){if(--Fu===0&&dr!==null){na!==null&&(na.status="fulfilled");var n=dr;dr=null,ta=0,na=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function zS(n,r){var l=[],u={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return n.then(function(){u.status="fulfilled",u.value=r;for(var g=0;g<l.length;g++)(0,l[g])(r)},function(g){for(u.status="rejected",u.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),u}var ap=H.S;H.S=function(n,r){Im=kt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&LS(n,r),ap!==null&&ap(n,r)};var os=R(null);function Iu(){var n=os.current;return n!==null?n:Ve.pooledCache}function Qo(n,r){r===null?ne(os,os.current):ne(os,r.pool)}function rp(){var n=Iu();return n===null?null:{parent:lt._currentValue,pool:n}}var ia=Error(s(460)),qu=Error(s(474)),Jo=Error(s(542)),Zo={then:function(){}};function op(n){return n=n.status,n==="fulfilled"||n==="rejected"}function lp(n,r,l){switch(l=n[l],l===void 0?n.push(r):l!==r&&(r.then(Fn,Fn),r=l),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,up(n),n;default:if(typeof r.status=="string")r.then(Fn,Fn);else{if(n=Ve,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(u){if(r.status==="pending"){var g=r;g.status="fulfilled",g.value=u}},function(u){if(r.status==="pending"){var g=r;g.status="rejected",g.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,up(n),n}throw cs=r,ia}}function ls(n){try{var r=n._init;return r(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(cs=l,ia):l}}var cs=null;function cp(){if(cs===null)throw Error(s(459));var n=cs;return cs=null,n}function up(n){if(n===ia||n===Jo)throw Error(s(483))}var sa=null,fr=0;function el(n){var r=fr;return fr+=1,sa===null&&(sa=[]),lp(sa,n,r)}function gr(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function tl(n,r){throw r.$$typeof===v?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function hp(n){function r(z,M){if(n){var F=z.deletions;F===null?(z.deletions=[M],z.flags|=16):F.push(M)}}function l(z,M){if(!n)return null;for(;M!==null;)r(z,M),M=M.sibling;return null}function u(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function g(z,M){return z=qn(z,M),z.index=0,z.sibling=null,z}function m(z,M,F){return z.index=F,n?(F=z.alternate,F!==null?(F=F.index,F<M?(z.flags|=67108866,M):F):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function x(z){return n&&z.alternate===null&&(z.flags|=67108866),z}function E(z,M,F,X){return M===null||M.tag!==6?(M=Mu(F,z.mode,X),M.return=z,M):(M=g(M,F),M.return=z,M)}function O(z,M,F,X){var pe=F.type;return pe===w?Y(z,M,F.props.children,X,F.key):M!==null&&(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===U&&ls(pe)===M.type)?(M=g(M,F.props),gr(M,F),M.return=z,M):(M=Wo(F.type,F.key,F.props,null,z.mode,X),gr(M,F),M.return=z,M)}function I(z,M,F,X){return M===null||M.tag!==4||M.stateNode.containerInfo!==F.containerInfo||M.stateNode.implementation!==F.implementation?(M=ku(F,z.mode,X),M.return=z,M):(M=g(M,F.children||[]),M.return=z,M)}function Y(z,M,F,X,pe){return M===null||M.tag!==7?(M=is(F,z.mode,X,pe),M.return=z,M):(M=g(M,F),M.return=z,M)}function Q(z,M,F){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Mu(""+M,z.mode,F),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case _:return F=Wo(M.type,M.key,M.props,null,z.mode,F),gr(F,M),F.return=z,F;case S:return M=ku(M,z.mode,F),M.return=z,M;case U:return M=ls(M),Q(z,M,F)}if(re(M)||B(M))return M=is(M,z.mode,F,null),M.return=z,M;if(typeof M.then=="function")return Q(z,el(M),F);if(M.$$typeof===j)return Q(z,Xo(z,M),F);tl(z,M)}return null}function $(z,M,F,X){var pe=M!==null?M.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return pe!==null?null:E(z,M,""+F,X);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case _:return F.key===pe?O(z,M,F,X):null;case S:return F.key===pe?I(z,M,F,X):null;case U:return F=ls(F),$(z,M,F,X)}if(re(F)||B(F))return pe!==null?null:Y(z,M,F,X,null);if(typeof F.then=="function")return $(z,M,el(F),X);if(F.$$typeof===j)return $(z,M,Xo(z,F),X);tl(z,F)}return null}function V(z,M,F,X,pe){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return z=z.get(F)||null,E(M,z,""+X,pe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case _:return z=z.get(X.key===null?F:X.key)||null,O(M,z,X,pe);case S:return z=z.get(X.key===null?F:X.key)||null,I(M,z,X,pe);case U:return X=ls(X),V(z,M,F,X,pe)}if(re(X)||B(X))return z=z.get(F)||null,Y(M,z,X,pe,null);if(typeof X.then=="function")return V(z,M,F,el(X),pe);if(X.$$typeof===j)return V(z,M,F,Xo(M,X),pe);tl(M,X)}return null}function ce(z,M,F,X){for(var pe=null,De=null,he=M,Se=M=0,Ae=null;he!==null&&Se<F.length;Se++){he.index>Se?(Ae=he,he=null):Ae=he.sibling;var Ne=$(z,he,F[Se],X);if(Ne===null){he===null&&(he=Ae);break}n&&he&&Ne.alternate===null&&r(z,he),M=m(Ne,M,Se),De===null?pe=Ne:De.sibling=Ne,De=Ne,he=Ae}if(Se===F.length)return l(z,he),Re&&$n(z,Se),pe;if(he===null){for(;Se<F.length;Se++)he=Q(z,F[Se],X),he!==null&&(M=m(he,M,Se),De===null?pe=he:De.sibling=he,De=he);return Re&&$n(z,Se),pe}for(he=u(he);Se<F.length;Se++)Ae=V(he,z,Se,F[Se],X),Ae!==null&&(n&&Ae.alternate!==null&&he.delete(Ae.key===null?Se:Ae.key),M=m(Ae,M,Se),De===null?pe=Ae:De.sibling=Ae,De=Ae);return n&&he.forEach(function(Ui){return r(z,Ui)}),Re&&$n(z,Se),pe}function ye(z,M,F,X){if(F==null)throw Error(s(151));for(var pe=null,De=null,he=M,Se=M=0,Ae=null,Ne=F.next();he!==null&&!Ne.done;Se++,Ne=F.next()){he.index>Se?(Ae=he,he=null):Ae=he.sibling;var Ui=$(z,he,Ne.value,X);if(Ui===null){he===null&&(he=Ae);break}n&&he&&Ui.alternate===null&&r(z,he),M=m(Ui,M,Se),De===null?pe=Ui:De.sibling=Ui,De=Ui,he=Ae}if(Ne.done)return l(z,he),Re&&$n(z,Se),pe;if(he===null){for(;!Ne.done;Se++,Ne=F.next())Ne=Q(z,Ne.value,X),Ne!==null&&(M=m(Ne,M,Se),De===null?pe=Ne:De.sibling=Ne,De=Ne);return Re&&$n(z,Se),pe}for(he=u(he);!Ne.done;Se++,Ne=F.next())Ne=V(he,z,Se,Ne.value,X),Ne!==null&&(n&&Ne.alternate!==null&&he.delete(Ne.key===null?Se:Ne.key),M=m(Ne,M,Se),De===null?pe=Ne:De.sibling=Ne,De=Ne);return n&&he.forEach(function(Yw){return r(z,Yw)}),Re&&$n(z,Se),pe}function $e(z,M,F,X){if(typeof F=="object"&&F!==null&&F.type===w&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case _:e:{for(var pe=F.key;M!==null;){if(M.key===pe){if(pe=F.type,pe===w){if(M.tag===7){l(z,M.sibling),X=g(M,F.props.children),X.return=z,z=X;break e}}else if(M.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===U&&ls(pe)===M.type){l(z,M.sibling),X=g(M,F.props),gr(X,F),X.return=z,z=X;break e}l(z,M);break}else r(z,M);M=M.sibling}F.type===w?(X=is(F.props.children,z.mode,X,F.key),X.return=z,z=X):(X=Wo(F.type,F.key,F.props,null,z.mode,X),gr(X,F),X.return=z,z=X)}return x(z);case S:e:{for(pe=F.key;M!==null;){if(M.key===pe)if(M.tag===4&&M.stateNode.containerInfo===F.containerInfo&&M.stateNode.implementation===F.implementation){l(z,M.sibling),X=g(M,F.children||[]),X.return=z,z=X;break e}else{l(z,M);break}else r(z,M);M=M.sibling}X=ku(F,z.mode,X),X.return=z,z=X}return x(z);case U:return F=ls(F),$e(z,M,F,X)}if(re(F))return ce(z,M,F,X);if(B(F)){if(pe=B(F),typeof pe!="function")throw Error(s(150));return F=pe.call(F),ye(z,M,F,X)}if(typeof F.then=="function")return $e(z,M,el(F),X);if(F.$$typeof===j)return $e(z,M,Xo(z,F),X);tl(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,M!==null&&M.tag===6?(l(z,M.sibling),X=g(M,F),X.return=z,z=X):(l(z,M),X=Mu(F,z.mode,X),X.return=z,z=X),x(z)):l(z,M)}return function(z,M,F,X){try{fr=0;var pe=$e(z,M,F,X);return sa=null,pe}catch(he){if(he===ia||he===Jo)throw he;var De=Xt(29,he,null,z.mode);return De.lanes=X,De.return=z,De}finally{}}}var us=hp(!0),dp=hp(!1),Si=!1;function $u(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vu(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function wi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ti(n,r,l){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Pe&2)!==0){var g=u.pending;return g===null?r.next=r:(r.next=g.next,g.next=r),u.pending=r,r=Go(n),Kg(n,null,l),r}return Vo(n,u,r,l),Go(n)}function pr(n,r,l){if(r=r.updateQueue,r!==null&&(r=r.shared,(l&4194048)!==0)){var u=r.lanes;u&=n.pendingLanes,l|=u,r.lanes=l,ig(n,l)}}function Gu(n,r){var l=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var g=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?g=m=x:m=m.next=x,l=l.next}while(l!==null);m===null?g=m=r:m=m.next=r}else g=m=r;l={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=r:n.next=r,l.lastBaseUpdate=r}var Wu=!1;function mr(){if(Wu){var n=na;if(n!==null)throw n}}function yr(n,r,l,u){Wu=!1;var g=n.updateQueue;Si=!1;var m=g.firstBaseUpdate,x=g.lastBaseUpdate,E=g.shared.pending;if(E!==null){g.shared.pending=null;var O=E,I=O.next;O.next=null,x===null?m=I:x.next=I,x=O;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,E=Y.lastBaseUpdate,E!==x&&(E===null?Y.firstBaseUpdate=I:E.next=I,Y.lastBaseUpdate=O))}if(m!==null){var Q=g.baseState;x=0,Y=I=O=null,E=m;do{var $=E.lane&-536870913,V=$!==E.lane;if(V?(je&$)===$:(u&$)===$){$!==0&&$===ta&&(Wu=!0),Y!==null&&(Y=Y.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ce=n,ye=E;$=r;var $e=l;switch(ye.tag){case 1:if(ce=ye.payload,typeof ce=="function"){Q=ce.call($e,Q,$);break e}Q=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=ye.payload,$=typeof ce=="function"?ce.call($e,Q,$):ce,$==null)break e;Q=b({},Q,$);break e;case 2:Si=!0}}$=E.callback,$!==null&&(n.flags|=64,V&&(n.flags|=8192),V=g.callbacks,V===null?g.callbacks=[$]:V.push($))}else V={lane:$,tag:E.tag,payload:E.payload,callback:E.callback,next:null},Y===null?(I=Y=V,O=Q):Y=Y.next=V,x|=$;if(E=E.next,E===null){if(E=g.shared.pending,E===null)break;V=E,E=V.next,V.next=null,g.lastBaseUpdate=V,g.shared.pending=null}}while(!0);Y===null&&(O=Q),g.baseState=O,g.firstBaseUpdate=I,g.lastBaseUpdate=Y,m===null&&(g.shared.lanes=0),Oi|=x,n.lanes=x,n.memoizedState=Q}}function fp(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function gp(n,r){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)fp(l[n],r)}var aa=R(null),nl=R(0);function pp(n,r){n=ti,ne(nl,n),ne(aa,r),ti=n|r.baseLanes}function Yu(){ne(nl,ti),ne(aa,aa.current)}function Ku(){ti=nl.current,K(aa),K(nl)}var Qt=R(null),dn=null;function Ei(n){var r=n.alternate;ne(st,st.current&1),ne(Qt,n),dn===null&&(r===null||aa.current!==null||r.memoizedState!==null)&&(dn=n)}function Xu(n){ne(st,st.current),ne(Qt,n),dn===null&&(dn=n)}function mp(n){n.tag===22?(ne(st,st.current),ne(Qt,n),dn===null&&(dn=n)):Ci()}function Ci(){ne(st,st.current),ne(Qt,Qt.current)}function Jt(n){K(Qt),dn===n&&(dn=null),K(st)}var st=R(0);function il(n){for(var r=n;r!==null;){if(r.tag===13){var l=r.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||nd(l)||id(l)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Wn=0,_e=null,Ie=null,ct=null,sl=!1,ra=!1,hs=!1,al=0,br=0,oa=null,BS=0;function tt(){throw Error(s(321))}function Qu(n,r){if(r===null)return!1;for(var l=0;l<r.length&&l<n.length;l++)if(!Kt(n[l],r[l]))return!1;return!0}function Ju(n,r,l,u,g,m){return Wn=m,_e=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,H.H=n===null||n.memoizedState===null?Zp:fh,hs=!1,m=l(u,g),hs=!1,ra&&(m=bp(r,l,u,g)),yp(n),m}function yp(n){H.H=xr;var r=Ie!==null&&Ie.next!==null;if(Wn=0,ct=Ie=_e=null,sl=!1,br=0,oa=null,r)throw Error(s(300));n===null||ut||(n=n.dependencies,n!==null&&Ko(n)&&(ut=!0))}function bp(n,r,l,u){_e=n;var g=0;do{if(ra&&(oa=null),br=0,ra=!1,25<=g)throw Error(s(301));if(g+=1,ct=Ie=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}H.H=em,m=r(l,u)}while(ra);return m}function US(){var n=H.H,r=n.useState()[0];return r=typeof r.then=="function"?vr(r):r,n=n.useState()[0],(Ie!==null?Ie.memoizedState:null)!==n&&(_e.flags|=1024),r}function Zu(){var n=al!==0;return al=0,n}function eh(n,r,l){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~l}function th(n){if(sl){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}sl=!1}Wn=0,ct=Ie=_e=null,ra=!1,br=al=0,oa=null}function Dt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?_e.memoizedState=ct=n:ct=ct.next=n,ct}function at(){if(Ie===null){var n=_e.alternate;n=n!==null?n.memoizedState:null}else n=Ie.next;var r=ct===null?_e.memoizedState:ct.next;if(r!==null)ct=r,Ie=n;else{if(n===null)throw _e.alternate===null?Error(s(467)):Error(s(310));Ie=n,n={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},ct===null?_e.memoizedState=ct=n:ct=ct.next=n}return ct}function rl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vr(n){var r=br;return br+=1,oa===null&&(oa=[]),n=lp(oa,n,r),r=_e,(ct===null?r.memoizedState:ct.next)===null&&(r=r.alternate,H.H=r===null||r.memoizedState===null?Zp:fh),n}function ol(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return vr(n);if(n.$$typeof===j)return St(n)}throw Error(s(438,String(n)))}function nh(n){var r=null,l=_e.updateQueue;if(l!==null&&(r=l.memoCache),r==null){var u=_e.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(g){return g.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),l===null&&(l=rl(),_e.updateQueue=l),l.memoCache=r,l=r.data[r.index],l===void 0)for(l=r.data[r.index]=Array(n),u=0;u<n;u++)l[u]=Z;return r.index++,l}function Yn(n,r){return typeof r=="function"?r(n):r}function ll(n){var r=at();return ih(r,Ie,n)}function ih(n,r,l){var u=n.queue;if(u===null)throw Error(s(311));u.lastRenderedReducer=l;var g=n.baseQueue,m=u.pending;if(m!==null){if(g!==null){var x=g.next;g.next=m.next,m.next=x}r.baseQueue=g=m,u.pending=null}if(m=n.baseState,g===null)n.memoizedState=m;else{r=g.next;var E=x=null,O=null,I=r,Y=!1;do{var Q=I.lane&-536870913;if(Q!==I.lane?(je&Q)===Q:(Wn&Q)===Q){var $=I.revertLane;if($===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),Q===ta&&(Y=!0);else if((Wn&$)===$){I=I.next,$===ta&&(Y=!0);continue}else Q={lane:0,revertLane:I.revertLane,gesture:null,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},O===null?(E=O=Q,x=m):O=O.next=Q,_e.lanes|=$,Oi|=$;Q=I.action,hs&&l(m,Q),m=I.hasEagerState?I.eagerState:l(m,Q)}else $={lane:Q,revertLane:I.revertLane,gesture:I.gesture,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null},O===null?(E=O=$,x=m):O=O.next=$,_e.lanes|=Q,Oi|=Q;I=I.next}while(I!==null&&I!==r);if(O===null?x=m:O.next=E,!Kt(m,n.memoizedState)&&(ut=!0,Y&&(l=na,l!==null)))throw l;n.memoizedState=m,n.baseState=x,n.baseQueue=O,u.lastRenderedState=m}return g===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function sh(n){var r=at(),l=r.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=n;var u=l.dispatch,g=l.pending,m=r.memoizedState;if(g!==null){l.pending=null;var x=g=g.next;do m=n(m,x.action),x=x.next;while(x!==g);Kt(m,r.memoizedState)||(ut=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),l.lastRenderedState=m}return[m,u]}function vp(n,r,l){var u=_e,g=at(),m=Re;if(m){if(l===void 0)throw Error(s(407));l=l()}else l=r();var x=!Kt((Ie||g).memoizedState,l);if(x&&(g.memoizedState=l,ut=!0),g=g.queue,oh(Sp.bind(null,u,g,n),[n]),g.getSnapshot!==r||x||ct!==null&&ct.memoizedState.tag&1){if(u.flags|=2048,la(9,{destroy:void 0},xp.bind(null,u,g,l,r),null),Ve===null)throw Error(s(349));m||(Wn&127)!==0||_p(u,r,l)}return l}function _p(n,r,l){n.flags|=16384,n={getSnapshot:r,value:l},r=_e.updateQueue,r===null?(r=rl(),_e.updateQueue=r,r.stores=[n]):(l=r.stores,l===null?r.stores=[n]:l.push(n))}function xp(n,r,l,u){r.value=l,r.getSnapshot=u,wp(r)&&Tp(n)}function Sp(n,r,l){return l(function(){wp(r)&&Tp(n)})}function wp(n){var r=n.getSnapshot;n=n.value;try{var l=r();return!Kt(n,l)}catch{return!0}}function Tp(n){var r=ns(n,2);r!==null&&Ht(r,n,2)}function ah(n){var r=Dt();if(typeof n=="function"){var l=n;if(n=l(),hs){pi(!0);try{l()}finally{pi(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:n},r}function Ep(n,r,l,u){return n.baseState=l,ih(n,Ie,typeof u=="function"?u:Yn)}function HS(n,r,l,u,g){if(hl(n))throw Error(s(485));if(n=r.action,n!==null){var m={payload:g,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};H.T!==null?l(!0):m.isTransition=!1,u(m),l=r.pending,l===null?(m.next=r.pending=m,Cp(r,m)):(m.next=l.next,r.pending=l.next=m)}}function Cp(n,r){var l=r.action,u=r.payload,g=n.state;if(r.isTransition){var m=H.T,x={};H.T=x;try{var E=l(g,u),O=H.S;O!==null&&O(x,E),jp(n,r,E)}catch(I){rh(n,r,I)}finally{m!==null&&x.types!==null&&(m.types=x.types),H.T=m}}else try{m=l(g,u),jp(n,r,m)}catch(I){rh(n,r,I)}}function jp(n,r,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(u){Ap(n,r,u)},function(u){return rh(n,r,u)}):Ap(n,r,l)}function Ap(n,r,l){r.status="fulfilled",r.value=l,Op(r),n.state=l,r=n.pending,r!==null&&(l=r.next,l===r?n.pending=null:(l=l.next,r.next=l,Cp(n,l)))}function rh(n,r,l){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=l,Op(r),r=r.next;while(r!==u)}n.action=null}function Op(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function Rp(n,r){return r}function Mp(n,r){if(Re){var l=Ve.formState;if(l!==null){e:{var u=_e;if(Re){if(Ye){t:{for(var g=Ye,m=hn;g.nodeType!==8;){if(!m){g=null;break t}if(g=fn(g.nextSibling),g===null){g=null;break t}}m=g.data,g=m==="F!"||m==="F"?g:null}if(g){Ye=fn(g.nextSibling),u=g.data==="F!";break e}}_i(u)}u=!1}u&&(r=l[0])}}return l=Dt(),l.memoizedState=l.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rp,lastRenderedState:r},l.queue=u,l=Xp.bind(null,_e,u),u.dispatch=l,u=ah(!1),m=dh.bind(null,_e,!1,u.queue),u=Dt(),g={state:r,dispatch:null,action:n,pending:null},u.queue=g,l=HS.bind(null,_e,g,m,l),g.dispatch=l,u.memoizedState=n,[r,l,!1]}function kp(n){var r=at();return Dp(r,Ie,n)}function Dp(n,r,l){if(r=ih(n,r,Rp)[0],n=ll(Yn)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=vr(r)}catch(x){throw x===ia?Jo:x}else u=r;r=at();var g=r.queue,m=g.dispatch;return l!==r.memoizedState&&(_e.flags|=2048,la(9,{destroy:void 0},FS.bind(null,g,l),null)),[u,m,n]}function FS(n,r){n.action=r}function Np(n){var r=at(),l=Ie;if(l!==null)return Dp(r,l,n);at(),r=r.memoizedState,l=at();var u=l.queue.dispatch;return l.memoizedState=n,[r,u,!1]}function la(n,r,l,u){return n={tag:n,create:l,deps:u,inst:r,next:null},r=_e.updateQueue,r===null&&(r=rl(),_e.updateQueue=r),l=r.lastEffect,l===null?r.lastEffect=n.next=n:(u=l.next,l.next=n,n.next=u,r.lastEffect=n),n}function Pp(){return at().memoizedState}function cl(n,r,l,u){var g=Dt();_e.flags|=n,g.memoizedState=la(1|r,{destroy:void 0},l,u===void 0?null:u)}function ul(n,r,l,u){var g=at();u=u===void 0?null:u;var m=g.memoizedState.inst;Ie!==null&&u!==null&&Qu(u,Ie.memoizedState.deps)?g.memoizedState=la(r,m,l,u):(_e.flags|=n,g.memoizedState=la(1|r,m,l,u))}function Lp(n,r){cl(8390656,8,n,r)}function oh(n,r){ul(2048,8,n,r)}function IS(n){_e.flags|=4;var r=_e.updateQueue;if(r===null)r=rl(),_e.updateQueue=r,r.events=[n];else{var l=r.events;l===null?r.events=[n]:l.push(n)}}function zp(n){var r=at().memoizedState;return IS({ref:r,nextImpl:n}),function(){if((Pe&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Bp(n,r){return ul(4,2,n,r)}function Up(n,r){return ul(4,4,n,r)}function Hp(n,r){if(typeof r=="function"){n=n();var l=r(n);return function(){typeof l=="function"?l():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Fp(n,r,l){l=l!=null?l.concat([n]):null,ul(4,4,Hp.bind(null,r,n),l)}function lh(){}function Ip(n,r){var l=at();r=r===void 0?null:r;var u=l.memoizedState;return r!==null&&Qu(r,u[1])?u[0]:(l.memoizedState=[n,r],n)}function qp(n,r){var l=at();r=r===void 0?null:r;var u=l.memoizedState;if(r!==null&&Qu(r,u[1]))return u[0];if(u=n(),hs){pi(!0);try{n()}finally{pi(!1)}}return l.memoizedState=[u,r],u}function ch(n,r,l){return l===void 0||(Wn&1073741824)!==0&&(je&261930)===0?n.memoizedState=r:(n.memoizedState=l,n=$m(),_e.lanes|=n,Oi|=n,l)}function $p(n,r,l,u){return Kt(l,r)?l:aa.current!==null?(n=ch(n,l,u),Kt(n,r)||(ut=!0),n):(Wn&42)===0||(Wn&1073741824)!==0&&(je&261930)===0?(ut=!0,n.memoizedState=l):(n=$m(),_e.lanes|=n,Oi|=n,r)}function Vp(n,r,l,u,g){var m=ee.p;ee.p=m!==0&&8>m?m:8;var x=H.T,E={};H.T=E,dh(n,!1,r,l);try{var O=g(),I=H.S;if(I!==null&&I(E,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Y=zS(O,u);_r(n,r,Y,tn(n))}else _r(n,r,u,tn(n))}catch(Q){_r(n,r,{then:function(){},status:"rejected",reason:Q},tn())}finally{ee.p=m,x!==null&&E.types!==null&&(x.types=E.types),H.T=x}}function qS(){}function uh(n,r,l,u){if(n.tag!==5)throw Error(s(476));var g=Gp(n).queue;Vp(n,g,r,ue,l===null?qS:function(){return Wp(n),l(u)})}function Gp(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:ue},next:null};var l={};return r.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yn,lastRenderedState:l},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Wp(n){var r=Gp(n);r.next===null&&(r=n.alternate.memoizedState),_r(n,r.next.queue,{},tn())}function hh(){return St(zr)}function Yp(){return at().memoizedState}function Kp(){return at().memoizedState}function $S(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var l=tn();n=wi(l);var u=Ti(r,n,l);u!==null&&(Ht(u,r,l),pr(u,r,l)),r={cache:Hu()},n.payload=r;return}r=r.return}}function VS(n,r,l){var u=tn();l={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},hl(n)?Qp(r,l):(l=Ou(n,r,l,u),l!==null&&(Ht(l,n,u),Jp(l,r,u)))}function Xp(n,r,l){var u=tn();_r(n,r,l,u)}function _r(n,r,l,u){var g={lane:u,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(hl(n))Qp(r,g);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var x=r.lastRenderedState,E=m(x,l);if(g.hasEagerState=!0,g.eagerState=E,Kt(E,x))return Vo(n,r,g,0),Ve===null&&$o(),!1}catch{}finally{}if(l=Ou(n,r,g,u),l!==null)return Ht(l,n,u),Jp(l,r,u),!0}return!1}function dh(n,r,l,u){if(u={lane:2,revertLane:$h(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},hl(n)){if(r)throw Error(s(479))}else r=Ou(n,l,u,2),r!==null&&Ht(r,n,2)}function hl(n){var r=n.alternate;return n===_e||r!==null&&r===_e}function Qp(n,r){ra=sl=!0;var l=n.pending;l===null?r.next=r:(r.next=l.next,l.next=r),n.pending=r}function Jp(n,r,l){if((l&4194048)!==0){var u=r.lanes;u&=n.pendingLanes,l|=u,r.lanes=l,ig(n,l)}}var xr={readContext:St,use:ol,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt};xr.useEffectEvent=tt;var Zp={readContext:St,use:ol,useCallback:function(n,r){return Dt().memoizedState=[n,r===void 0?null:r],n},useContext:St,useEffect:Lp,useImperativeHandle:function(n,r,l){l=l!=null?l.concat([n]):null,cl(4194308,4,Hp.bind(null,r,n),l)},useLayoutEffect:function(n,r){return cl(4194308,4,n,r)},useInsertionEffect:function(n,r){cl(4,2,n,r)},useMemo:function(n,r){var l=Dt();r=r===void 0?null:r;var u=n();if(hs){pi(!0);try{n()}finally{pi(!1)}}return l.memoizedState=[u,r],u},useReducer:function(n,r,l){var u=Dt();if(l!==void 0){var g=l(r);if(hs){pi(!0);try{l(r)}finally{pi(!1)}}}else g=r;return u.memoizedState=u.baseState=g,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:g},u.queue=n,n=n.dispatch=VS.bind(null,_e,n),[u.memoizedState,n]},useRef:function(n){var r=Dt();return n={current:n},r.memoizedState=n},useState:function(n){n=ah(n);var r=n.queue,l=Xp.bind(null,_e,r);return r.dispatch=l,[n.memoizedState,l]},useDebugValue:lh,useDeferredValue:function(n,r){var l=Dt();return ch(l,n,r)},useTransition:function(){var n=ah(!1);return n=Vp.bind(null,_e,n.queue,!0,!1),Dt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,l){var u=_e,g=Dt();if(Re){if(l===void 0)throw Error(s(407));l=l()}else{if(l=r(),Ve===null)throw Error(s(349));(je&127)!==0||_p(u,r,l)}g.memoizedState=l;var m={value:l,getSnapshot:r};return g.queue=m,Lp(Sp.bind(null,u,m,n),[n]),u.flags|=2048,la(9,{destroy:void 0},xp.bind(null,u,m,l,r),null),l},useId:function(){var n=Dt(),r=Ve.identifierPrefix;if(Re){var l=kn,u=Mn;l=(u&~(1<<32-Yt(u)-1)).toString(32)+l,r="_"+r+"R_"+l,l=al++,0<l&&(r+="H"+l.toString(32)),r+="_"}else l=BS++,r="_"+r+"r_"+l.toString(32)+"_";return n.memoizedState=r},useHostTransitionStatus:hh,useFormState:Mp,useActionState:Mp,useOptimistic:function(n){var r=Dt();r.memoizedState=r.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=l,r=dh.bind(null,_e,!0,l),l.dispatch=r,[n,r]},useMemoCache:nh,useCacheRefresh:function(){return Dt().memoizedState=$S.bind(null,_e)},useEffectEvent:function(n){var r=Dt(),l={impl:n};return r.memoizedState=l,function(){if((Pe&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},fh={readContext:St,use:ol,useCallback:Ip,useContext:St,useEffect:oh,useImperativeHandle:Fp,useInsertionEffect:Bp,useLayoutEffect:Up,useMemo:qp,useReducer:ll,useRef:Pp,useState:function(){return ll(Yn)},useDebugValue:lh,useDeferredValue:function(n,r){var l=at();return $p(l,Ie.memoizedState,n,r)},useTransition:function(){var n=ll(Yn)[0],r=at().memoizedState;return[typeof n=="boolean"?n:vr(n),r]},useSyncExternalStore:vp,useId:Yp,useHostTransitionStatus:hh,useFormState:kp,useActionState:kp,useOptimistic:function(n,r){var l=at();return Ep(l,Ie,n,r)},useMemoCache:nh,useCacheRefresh:Kp};fh.useEffectEvent=zp;var em={readContext:St,use:ol,useCallback:Ip,useContext:St,useEffect:oh,useImperativeHandle:Fp,useInsertionEffect:Bp,useLayoutEffect:Up,useMemo:qp,useReducer:sh,useRef:Pp,useState:function(){return sh(Yn)},useDebugValue:lh,useDeferredValue:function(n,r){var l=at();return Ie===null?ch(l,n,r):$p(l,Ie.memoizedState,n,r)},useTransition:function(){var n=sh(Yn)[0],r=at().memoizedState;return[typeof n=="boolean"?n:vr(n),r]},useSyncExternalStore:vp,useId:Yp,useHostTransitionStatus:hh,useFormState:Np,useActionState:Np,useOptimistic:function(n,r){var l=at();return Ie!==null?Ep(l,Ie,n,r):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:nh,useCacheRefresh:Kp};em.useEffectEvent=zp;function gh(n,r,l,u){r=n.memoizedState,l=l(u,r),l=l==null?r:b({},r,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var ph={enqueueSetState:function(n,r,l){n=n._reactInternals;var u=tn(),g=wi(u);g.payload=r,l!=null&&(g.callback=l),r=Ti(n,g,u),r!==null&&(Ht(r,n,u),pr(r,n,u))},enqueueReplaceState:function(n,r,l){n=n._reactInternals;var u=tn(),g=wi(u);g.tag=1,g.payload=r,l!=null&&(g.callback=l),r=Ti(n,g,u),r!==null&&(Ht(r,n,u),pr(r,n,u))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var l=tn(),u=wi(l);u.tag=2,r!=null&&(u.callback=r),r=Ti(n,u,l),r!==null&&(Ht(r,n,l),pr(r,n,l))}};function tm(n,r,l,u,g,m,x){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,x):r.prototype&&r.prototype.isPureReactComponent?!or(l,u)||!or(g,m):!0}function nm(n,r,l,u){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(l,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(l,u),r.state!==n&&ph.enqueueReplaceState(r,r.state,null)}function ds(n,r){var l=r;if("ref"in r){l={};for(var u in r)u!=="ref"&&(l[u]=r[u])}if(n=n.defaultProps){l===r&&(l=b({},l));for(var g in n)l[g]===void 0&&(l[g]=n[g])}return l}function im(n){qo(n)}function sm(n){console.error(n)}function am(n){qo(n)}function dl(n,r){try{var l=n.onUncaughtError;l(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function rm(n,r,l){try{var u=n.onCaughtError;u(l.value,{componentStack:l.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function mh(n,r,l){return l=wi(l),l.tag=3,l.payload={element:null},l.callback=function(){dl(n,r)},l}function om(n){return n=wi(n),n.tag=3,n}function lm(n,r,l,u){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var m=u.value;n.payload=function(){return g(m)},n.callback=function(){rm(r,l,u)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(n.callback=function(){rm(r,l,u),typeof g!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var E=u.stack;this.componentDidCatch(u.value,{componentStack:E!==null?E:""})})}function GS(n,r,l,u,g){if(l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=l.alternate,r!==null&&ea(r,l,g,!0),l=Qt.current,l!==null){switch(l.tag){case 31:case 13:return dn===null?Tl():l.alternate===null&&nt===0&&(nt=3),l.flags&=-257,l.flags|=65536,l.lanes=g,u===Zo?l.flags|=16384:(r=l.updateQueue,r===null?l.updateQueue=new Set([u]):r.add(u),Fh(n,u,g)),!1;case 22:return l.flags|=65536,u===Zo?l.flags|=16384:(r=l.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},l.updateQueue=r):(l=r.retryQueue,l===null?r.retryQueue=new Set([u]):l.add(u)),Fh(n,u,g)),!1}throw Error(s(435,l.tag))}return Fh(n,u,g),Tl(),!1}if(Re)return r=Qt.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=g,u!==Pu&&(n=Error(s(422),{cause:u}),ur(ln(n,l)))):(u!==Pu&&(r=Error(s(423),{cause:u}),ur(ln(r,l))),n=n.current.alternate,n.flags|=65536,g&=-g,n.lanes|=g,u=ln(u,l),g=mh(n.stateNode,u,g),Gu(n,g),nt!==4&&(nt=2)),!1;var m=Error(s(520),{cause:u});if(m=ln(m,l),Or===null?Or=[m]:Or.push(m),nt!==4&&(nt=2),r===null)return!0;u=ln(u,l),l=r;do{switch(l.tag){case 3:return l.flags|=65536,n=g&-g,l.lanes|=n,n=mh(l.stateNode,u,n),Gu(l,n),!1;case 1:if(r=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Ri===null||!Ri.has(m))))return l.flags|=65536,g&=-g,l.lanes|=g,g=om(g),lm(g,n,l,u),Gu(l,g),!1}l=l.return}while(l!==null);return!1}var yh=Error(s(461)),ut=!1;function wt(n,r,l,u){r.child=n===null?dp(r,null,l,u):us(r,n.child,l,u)}function cm(n,r,l,u,g){l=l.render;var m=r.ref;if("ref"in u){var x={};for(var E in u)E!=="ref"&&(x[E]=u[E])}else x=u;return rs(r),u=Ju(n,r,l,x,m,g),E=Zu(),n!==null&&!ut?(eh(n,r,g),Kn(n,r,g)):(Re&&E&&Du(r),r.flags|=1,wt(n,r,u,g),r.child)}function um(n,r,l,u,g){if(n===null){var m=l.type;return typeof m=="function"&&!Ru(m)&&m.defaultProps===void 0&&l.compare===null?(r.tag=15,r.type=m,hm(n,r,m,u,g)):(n=Wo(l.type,null,u,r,r.mode,g),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Eh(n,g)){var x=m.memoizedProps;if(l=l.compare,l=l!==null?l:or,l(x,u)&&n.ref===r.ref)return Kn(n,r,g)}return r.flags|=1,n=qn(m,u),n.ref=r.ref,n.return=r,r.child=n}function hm(n,r,l,u,g){if(n!==null){var m=n.memoizedProps;if(or(m,u)&&n.ref===r.ref)if(ut=!1,r.pendingProps=u=m,Eh(n,g))(n.flags&131072)!==0&&(ut=!0);else return r.lanes=n.lanes,Kn(n,r,g)}return bh(n,r,l,u,g)}function dm(n,r,l,u){var g=u.children,m=n!==null?n.memoizedState:null;if(n===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,n!==null){for(u=r.child=n.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~m}else u=0,r.child=null;return fm(n,r,m,l,u)}if((l&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Qo(r,m!==null?m.cachePool:null),m!==null?pp(r,m):Yu(),mp(r);else return u=r.lanes=536870912,fm(n,r,m!==null?m.baseLanes|l:l,l,u)}else m!==null?(Qo(r,m.cachePool),pp(r,m),Ci(),r.memoizedState=null):(n!==null&&Qo(r,null),Yu(),Ci());return wt(n,r,g,l),r.child}function Sr(n,r){return n!==null&&n.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function fm(n,r,l,u,g){var m=Iu();return m=m===null?null:{parent:lt._currentValue,pool:m},r.memoizedState={baseLanes:l,cachePool:m},n!==null&&Qo(r,null),Yu(),mp(r),n!==null&&ea(n,r,u,!0),r.childLanes=g,null}function fl(n,r){return r=pl({mode:r.mode,children:r.children},n.mode),r.ref=n.ref,n.child=r,r.return=n,r}function gm(n,r,l){return us(r,n.child,null,l),n=fl(r,r.pendingProps),n.flags|=2,Jt(r),r.memoizedState=null,n}function WS(n,r,l){var u=r.pendingProps,g=(r.flags&128)!==0;if(r.flags&=-129,n===null){if(Re){if(u.mode==="hidden")return n=fl(r,u),r.lanes=536870912,Sr(null,n);if(Xu(r),(n=Ye)?(n=Cy(n,hn),n=n!==null&&n.data==="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:bi!==null?{id:Mn,overflow:kn}:null,retryLane:536870912,hydrationErrors:null},l=Qg(n),l.return=r,r.child=l,xt=r,Ye=null)):n=null,n===null)throw _i(r);return r.lanes=536870912,null}return fl(r,u)}var m=n.memoizedState;if(m!==null){var x=m.dehydrated;if(Xu(r),g)if(r.flags&256)r.flags&=-257,r=gm(n,r,l);else if(r.memoizedState!==null)r.child=n.child,r.flags|=128,r=null;else throw Error(s(558));else if(ut||ea(n,r,l,!1),g=(l&n.childLanes)!==0,ut||g){if(u=Ve,u!==null&&(x=sg(u,l),x!==0&&x!==m.retryLane))throw m.retryLane=x,ns(n,x),Ht(u,n,x),yh;Tl(),r=gm(n,r,l)}else n=m.treeContext,Ye=fn(x.nextSibling),xt=r,Re=!0,vi=null,hn=!1,n!==null&&ep(r,n),r=fl(r,u),r.flags|=4096;return r}return n=qn(n.child,{mode:u.mode,children:u.children}),n.ref=r.ref,r.child=n,n.return=r,n}function gl(n,r){var l=r.ref;if(l===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(n===null||n.ref!==l)&&(r.flags|=4194816)}}function bh(n,r,l,u,g){return rs(r),l=Ju(n,r,l,u,void 0,g),u=Zu(),n!==null&&!ut?(eh(n,r,g),Kn(n,r,g)):(Re&&u&&Du(r),r.flags|=1,wt(n,r,l,g),r.child)}function pm(n,r,l,u,g,m){return rs(r),r.updateQueue=null,l=bp(r,u,l,g),yp(n),u=Zu(),n!==null&&!ut?(eh(n,r,m),Kn(n,r,m)):(Re&&u&&Du(r),r.flags|=1,wt(n,r,l,m),r.child)}function mm(n,r,l,u,g){if(rs(r),r.stateNode===null){var m=Xs,x=l.contextType;typeof x=="object"&&x!==null&&(m=St(x)),m=new l(u,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ph,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=u,m.state=r.memoizedState,m.refs={},$u(r),x=l.contextType,m.context=typeof x=="object"&&x!==null?St(x):Xs,m.state=r.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(gh(r,l,x,u),m.state=r.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&ph.enqueueReplaceState(m,m.state,null),yr(r,u,m,g),mr(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(n===null){m=r.stateNode;var E=r.memoizedProps,O=ds(l,E);m.props=O;var I=m.context,Y=l.contextType;x=Xs,typeof Y=="object"&&Y!==null&&(x=St(Y));var Q=l.getDerivedStateFromProps;Y=typeof Q=="function"||typeof m.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,Y||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E||I!==x)&&nm(r,m,u,x),Si=!1;var $=r.memoizedState;m.state=$,yr(r,u,m,g),mr(),I=r.memoizedState,E||$!==I||Si?(typeof Q=="function"&&(gh(r,l,Q,u),I=r.memoizedState),(O=Si||tm(r,l,O,u,$,I,x))?(Y||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=I),m.props=u,m.state=I,m.context=x,u=O):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{m=r.stateNode,Vu(n,r),x=r.memoizedProps,Y=ds(l,x),m.props=Y,Q=r.pendingProps,$=m.context,I=l.contextType,O=Xs,typeof I=="object"&&I!==null&&(O=St(I)),E=l.getDerivedStateFromProps,(I=typeof E=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==Q||$!==O)&&nm(r,m,u,O),Si=!1,$=r.memoizedState,m.state=$,yr(r,u,m,g),mr();var V=r.memoizedState;x!==Q||$!==V||Si||n!==null&&n.dependencies!==null&&Ko(n.dependencies)?(typeof E=="function"&&(gh(r,l,E,u),V=r.memoizedState),(Y=Si||tm(r,l,Y,u,$,V,O)||n!==null&&n.dependencies!==null&&Ko(n.dependencies))?(I||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,V,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,V,O)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&$===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&$===n.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=V),m.props=u,m.state=V,m.context=O,u=Y):(typeof m.componentDidUpdate!="function"||x===n.memoizedProps&&$===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===n.memoizedProps&&$===n.memoizedState||(r.flags|=1024),u=!1)}return m=u,gl(n,r),u=(r.flags&128)!==0,m||u?(m=r.stateNode,l=u&&typeof l.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&u?(r.child=us(r,n.child,null,g),r.child=us(r,null,l,g)):wt(n,r,l,g),r.memoizedState=m.state,n=r.child):n=Kn(n,r,g),n}function ym(n,r,l,u){return ss(),r.flags|=256,wt(n,r,l,u),r.child}var vh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _h(n){return{baseLanes:n,cachePool:rp()}}function xh(n,r,l){return n=n!==null?n.childLanes&~l:0,r&&(n|=en),n}function bm(n,r,l){var u=r.pendingProps,g=!1,m=(r.flags&128)!==0,x;if((x=m)||(x=n!==null&&n.memoizedState===null?!1:(st.current&2)!==0),x&&(g=!0,r.flags&=-129),x=(r.flags&32)!==0,r.flags&=-33,n===null){if(Re){if(g?Ei(r):Ci(),(n=Ye)?(n=Cy(n,hn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(r.memoizedState={dehydrated:n,treeContext:bi!==null?{id:Mn,overflow:kn}:null,retryLane:536870912,hydrationErrors:null},l=Qg(n),l.return=r,r.child=l,xt=r,Ye=null)):n=null,n===null)throw _i(r);return id(n)?r.lanes=32:r.lanes=536870912,null}var E=u.children;return u=u.fallback,g?(Ci(),g=r.mode,E=pl({mode:"hidden",children:E},g),u=is(u,g,l,null),E.return=r,u.return=r,E.sibling=u,r.child=E,u=r.child,u.memoizedState=_h(l),u.childLanes=xh(n,x,l),r.memoizedState=vh,Sr(null,u)):(Ei(r),Sh(r,E))}var O=n.memoizedState;if(O!==null&&(E=O.dehydrated,E!==null)){if(m)r.flags&256?(Ei(r),r.flags&=-257,r=wh(n,r,l)):r.memoizedState!==null?(Ci(),r.child=n.child,r.flags|=128,r=null):(Ci(),E=u.fallback,g=r.mode,u=pl({mode:"visible",children:u.children},g),E=is(E,g,l,null),E.flags|=2,u.return=r,E.return=r,u.sibling=E,r.child=u,us(r,n.child,null,l),u=r.child,u.memoizedState=_h(l),u.childLanes=xh(n,x,l),r.memoizedState=vh,r=Sr(null,u));else if(Ei(r),id(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var I=x.dgst;x=I,u=Error(s(419)),u.stack="",u.digest=x,ur({value:u,source:null,stack:null}),r=wh(n,r,l)}else if(ut||ea(n,r,l,!1),x=(l&n.childLanes)!==0,ut||x){if(x=Ve,x!==null&&(u=sg(x,l),u!==0&&u!==O.retryLane))throw O.retryLane=u,ns(n,u),Ht(x,n,u),yh;nd(E)||Tl(),r=wh(n,r,l)}else nd(E)?(r.flags|=192,r.child=n.child,r=null):(n=O.treeContext,Ye=fn(E.nextSibling),xt=r,Re=!0,vi=null,hn=!1,n!==null&&ep(r,n),r=Sh(r,u.children),r.flags|=4096);return r}return g?(Ci(),E=u.fallback,g=r.mode,O=n.child,I=O.sibling,u=qn(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,I!==null?E=qn(I,E):(E=is(E,g,l,null),E.flags|=2),E.return=r,u.return=r,u.sibling=E,r.child=u,Sr(null,u),u=r.child,E=n.child.memoizedState,E===null?E=_h(l):(g=E.cachePool,g!==null?(O=lt._currentValue,g=g.parent!==O?{parent:O,pool:O}:g):g=rp(),E={baseLanes:E.baseLanes|l,cachePool:g}),u.memoizedState=E,u.childLanes=xh(n,x,l),r.memoizedState=vh,Sr(n.child,u)):(Ei(r),l=n.child,n=l.sibling,l=qn(l,{mode:"visible",children:u.children}),l.return=r,l.sibling=null,n!==null&&(x=r.deletions,x===null?(r.deletions=[n],r.flags|=16):x.push(n)),r.child=l,r.memoizedState=null,l)}function Sh(n,r){return r=pl({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function pl(n,r){return n=Xt(22,n,null,r),n.lanes=0,n}function wh(n,r,l){return us(r,n.child,null,l),n=Sh(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function vm(n,r,l){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r),Bu(n.return,r,l)}function Th(n,r,l,u,g,m){var x=n.memoizedState;x===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:g,treeForkCount:m}:(x.isBackwards=r,x.rendering=null,x.renderingStartTime=0,x.last=u,x.tail=l,x.tailMode=g,x.treeForkCount=m)}function _m(n,r,l){var u=r.pendingProps,g=u.revealOrder,m=u.tail;u=u.children;var x=st.current,E=(x&2)!==0;if(E?(x=x&1|2,r.flags|=128):x&=1,ne(st,x),wt(n,r,u,l),u=Re?cr:0,!E&&n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&vm(n,l,r);else if(n.tag===19)vm(n,l,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(g){case"forwards":for(l=r.child,g=null;l!==null;)n=l.alternate,n!==null&&il(n)===null&&(g=l),l=l.sibling;l=g,l===null?(g=r.child,r.child=null):(g=l.sibling,l.sibling=null),Th(r,!1,g,l,m,u);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=r.child,r.child=null;g!==null;){if(n=g.alternate,n!==null&&il(n)===null){r.child=g;break}n=g.sibling,g.sibling=l,l=g,g=n}Th(r,!0,l,null,m,u);break;case"together":Th(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function Kn(n,r,l){if(n!==null&&(r.dependencies=n.dependencies),Oi|=r.lanes,(l&r.childLanes)===0)if(n!==null){if(ea(n,r,l,!1),(l&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,l=qn(n,n.pendingProps),r.child=l,l.return=r;n.sibling!==null;)n=n.sibling,l=l.sibling=qn(n,n.pendingProps),l.return=r;l.sibling=null}return r.child}function Eh(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Ko(n)))}function YS(n,r,l){switch(r.tag){case 3:ke(r,r.stateNode.containerInfo),xi(r,lt,n.memoizedState.cache),ss();break;case 27:case 5:On(r);break;case 4:ke(r,r.stateNode.containerInfo);break;case 10:xi(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Xu(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(Ei(r),r.flags|=128,null):(l&r.child.childLanes)!==0?bm(n,r,l):(Ei(r),n=Kn(n,r,l),n!==null?n.sibling:null);Ei(r);break;case 19:var g=(n.flags&128)!==0;if(u=(l&r.childLanes)!==0,u||(ea(n,r,l,!1),u=(l&r.childLanes)!==0),g){if(u)return _m(n,r,l);r.flags|=128}if(g=r.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ne(st,st.current),u)break;return null;case 22:return r.lanes=0,dm(n,r,l,r.pendingProps);case 24:xi(r,lt,n.memoizedState.cache)}return Kn(n,r,l)}function xm(n,r,l){if(n!==null)if(n.memoizedProps!==r.pendingProps)ut=!0;else{if(!Eh(n,l)&&(r.flags&128)===0)return ut=!1,YS(n,r,l);ut=(n.flags&131072)!==0}else ut=!1,Re&&(r.flags&1048576)!==0&&Zg(r,cr,r.index);switch(r.lanes=0,r.tag){case 16:e:{var u=r.pendingProps;if(n=ls(r.elementType),r.type=n,typeof n=="function")Ru(n)?(u=ds(n,u),r.tag=1,r=mm(null,r,n,u,l)):(r.tag=0,r=bh(null,r,n,u,l));else{if(n!=null){var g=n.$$typeof;if(g===D){r.tag=11,r=cm(null,r,n,u,l);break e}else if(g===P){r.tag=14,r=um(null,r,n,u,l);break e}}throw r=ae(n)||n,Error(s(306,r,""))}}return r;case 0:return bh(n,r,r.type,r.pendingProps,l);case 1:return u=r.type,g=ds(u,r.pendingProps),mm(n,r,u,g,l);case 3:e:{if(ke(r,r.stateNode.containerInfo),n===null)throw Error(s(387));u=r.pendingProps;var m=r.memoizedState;g=m.element,Vu(n,r),yr(r,u,null,l);var x=r.memoizedState;if(u=x.cache,xi(r,lt,u),u!==m.cache&&Uu(r,[lt],l,!0),mr(),u=x.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:x.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=ym(n,r,u,l);break e}else if(u!==g){g=ln(Error(s(424)),r),ur(g),r=ym(n,r,u,l);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ye=fn(n.firstChild),xt=r,Re=!0,vi=null,hn=!0,l=dp(r,null,u,l),r.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(ss(),u===g){r=Kn(n,r,l);break e}wt(n,r,u,l)}r=r.child}return r;case 26:return gl(n,r),n===null?(l=ky(r.type,null,r.pendingProps,null))?r.memoizedState=l:Re||(l=r.type,n=r.pendingProps,u=Ml(ge.current).createElement(l),u[_t]=r,u[Nt]=n,Tt(u,l,n),yt(u),r.stateNode=u):r.memoizedState=ky(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return On(r),n===null&&Re&&(u=r.stateNode=Oy(r.type,r.pendingProps,ge.current),xt=r,hn=!0,g=Ye,Ni(r.type)?(sd=g,Ye=fn(u.firstChild)):Ye=g),wt(n,r,r.pendingProps.children,l),gl(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Re&&((g=u=Ye)&&(u=Tw(u,r.type,r.pendingProps,hn),u!==null?(r.stateNode=u,xt=r,Ye=fn(u.firstChild),hn=!1,g=!0):g=!1),g||_i(r)),On(r),g=r.type,m=r.pendingProps,x=n!==null?n.memoizedProps:null,u=m.children,Zh(g,m)?u=null:x!==null&&Zh(g,x)&&(r.flags|=32),r.memoizedState!==null&&(g=Ju(n,r,US,null,null,l),zr._currentValue=g),gl(n,r),wt(n,r,u,l),r.child;case 6:return n===null&&Re&&((n=l=Ye)&&(l=Ew(l,r.pendingProps,hn),l!==null?(r.stateNode=l,xt=r,Ye=null,n=!0):n=!1),n||_i(r)),null;case 13:return bm(n,r,l);case 4:return ke(r,r.stateNode.containerInfo),u=r.pendingProps,n===null?r.child=us(r,null,u,l):wt(n,r,u,l),r.child;case 11:return cm(n,r,r.type,r.pendingProps,l);case 7:return wt(n,r,r.pendingProps,l),r.child;case 8:return wt(n,r,r.pendingProps.children,l),r.child;case 12:return wt(n,r,r.pendingProps.children,l),r.child;case 10:return u=r.pendingProps,xi(r,r.type,u.value),wt(n,r,u.children,l),r.child;case 9:return g=r.type._context,u=r.pendingProps.children,rs(r),g=St(g),u=u(g),r.flags|=1,wt(n,r,u,l),r.child;case 14:return um(n,r,r.type,r.pendingProps,l);case 15:return hm(n,r,r.type,r.pendingProps,l);case 19:return _m(n,r,l);case 31:return WS(n,r,l);case 22:return dm(n,r,l,r.pendingProps);case 24:return rs(r),u=St(lt),n===null?(g=Iu(),g===null&&(g=Ve,m=Hu(),g.pooledCache=m,m.refCount++,m!==null&&(g.pooledCacheLanes|=l),g=m),r.memoizedState={parent:u,cache:g},$u(r),xi(r,lt,g)):((n.lanes&l)!==0&&(Vu(n,r),yr(r,null,null,l),mr()),g=n.memoizedState,m=r.memoizedState,g.parent!==u?(g={parent:u,cache:u},r.memoizedState=g,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=g),xi(r,lt,u)):(u=m.cache,xi(r,lt,u),u!==g.cache&&Uu(r,[lt],l,!0))),wt(n,r,r.pendingProps.children,l),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Xn(n){n.flags|=4}function Ch(n,r,l,u,g){if((r=(n.mode&32)!==0)&&(r=!1),r){if(n.flags|=16777216,(g&335544128)===g)if(n.stateNode.complete)n.flags|=8192;else if(Ym())n.flags|=8192;else throw cs=Zo,qu}else n.flags&=-16777217}function Sm(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!zy(r))if(Ym())n.flags|=8192;else throw cs=Zo,qu}function ml(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?tg():536870912,n.lanes|=r,da|=r)}function wr(n,r){if(!Re)switch(n.tailMode){case"hidden":r=n.tail;for(var l=null;r!==null;)r.alternate!==null&&(l=r),r=r.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function Ke(n){var r=n.alternate!==null&&n.alternate.child===n.child,l=0,u=0;if(r)for(var g=n.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=n,g=g.sibling;else for(g=n.child;g!==null;)l|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=n,g=g.sibling;return n.subtreeFlags|=u,n.childLanes=l,r}function KS(n,r,l){var u=r.pendingProps;switch(Nu(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(r),null;case 1:return Ke(r),null;case 3:return l=r.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),Gn(lt),Ge(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Zs(r)?Xn(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Lu())),Ke(r),null;case 26:var g=r.type,m=r.memoizedState;return n===null?(Xn(r),m!==null?(Ke(r),Sm(r,m)):(Ke(r),Ch(r,g,null,u,l))):m?m!==n.memoizedState?(Xn(r),Ke(r),Sm(r,m)):(Ke(r),r.flags&=-16777217):(n=n.memoizedProps,n!==u&&Xn(r),Ke(r),Ch(r,g,n,u,l)),null;case 27:if(et(r),l=ge.current,g=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Xn(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return Ke(r),null}n=se.current,Zs(r)?tp(r):(n=Oy(g,u,l),r.stateNode=n,Xn(r))}return Ke(r),null;case 5:if(et(r),g=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==u&&Xn(r);else{if(!u){if(r.stateNode===null)throw Error(s(166));return Ke(r),null}if(m=se.current,Zs(r))tp(r);else{var x=Ml(ge.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?x.createElement("select",{is:u.is}):x.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?x.createElement(g,{is:u.is}):x.createElement(g)}}m[_t]=r,m[Nt]=u;e:for(x=r.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===r)break e;for(;x.sibling===null;){if(x.return===null||x.return===r)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}r.stateNode=m;e:switch(Tt(m,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Xn(r)}}return Ke(r),Ch(r,r.type,n===null?null:n.memoizedProps,r.pendingProps,l),null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==u&&Xn(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(s(166));if(n=ge.current,Zs(r)){if(n=r.stateNode,l=r.memoizedProps,u=null,g=xt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}n[_t]=r,n=!!(n.nodeValue===l||u!==null&&u.suppressHydrationWarning===!0||by(n.nodeValue,l)),n||_i(r,!0)}else n=Ml(n).createTextNode(u),n[_t]=r,r.stateNode=n}return Ke(r),null;case 31:if(l=r.memoizedState,n===null||n.memoizedState!==null){if(u=Zs(r),l!==null){if(n===null){if(!u)throw Error(s(318));if(n=r.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[_t]=r}else ss(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ke(r),n=!1}else l=Lu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return r.flags&256?(Jt(r),r):(Jt(r),null);if((r.flags&128)!==0)throw Error(s(558))}return Ke(r),null;case 13:if(u=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(g=Zs(r),u!==null&&u.dehydrated!==null){if(n===null){if(!g)throw Error(s(318));if(g=r.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(s(317));g[_t]=r}else ss(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ke(r),g=!1}else g=Lu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=g),g=!0;if(!g)return r.flags&256?(Jt(r),r):(Jt(r),null)}return Jt(r),(r.flags&128)!==0?(r.lanes=l,r):(l=u!==null,n=n!==null&&n.memoizedState!==null,l&&(u=r.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==g&&(u.flags|=2048)),l!==n&&l&&(r.child.flags|=8192),ml(r,r.updateQueue),Ke(r),null);case 4:return Ge(),n===null&&Yh(r.stateNode.containerInfo),Ke(r),null;case 10:return Gn(r.type),Ke(r),null;case 19:if(K(st),u=r.memoizedState,u===null)return Ke(r),null;if(g=(r.flags&128)!==0,m=u.rendering,m===null)if(g)wr(u,!1);else{if(nt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=il(n),m!==null){for(r.flags|=128,wr(u,!1),n=m.updateQueue,r.updateQueue=n,ml(r,n),r.subtreeFlags=0,n=l,l=r.child;l!==null;)Xg(l,n),l=l.sibling;return ne(st,st.current&1|2),Re&&$n(r,u.treeForkCount),r.child}n=n.sibling}u.tail!==null&&kt()>xl&&(r.flags|=128,g=!0,wr(u,!1),r.lanes=4194304)}else{if(!g)if(n=il(m),n!==null){if(r.flags|=128,g=!0,n=n.updateQueue,r.updateQueue=n,ml(r,n),wr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!Re)return Ke(r),null}else 2*kt()-u.renderingStartTime>xl&&l!==536870912&&(r.flags|=128,g=!0,wr(u,!1),r.lanes=4194304);u.isBackwards?(m.sibling=r.child,r.child=m):(n=u.last,n!==null?n.sibling=m:r.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=kt(),n.sibling=null,l=st.current,ne(st,g?l&1|2:l&1),Re&&$n(r,u.treeForkCount),n):(Ke(r),null);case 22:case 23:return Jt(r),Ku(),u=r.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(l&536870912)!==0&&(r.flags&128)===0&&(Ke(r),r.subtreeFlags&6&&(r.flags|=8192)):Ke(r),l=r.updateQueue,l!==null&&ml(r,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==l&&(r.flags|=2048),n!==null&&K(os),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Gn(lt),Ke(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function XS(n,r){switch(Nu(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Gn(lt),Ge(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return et(r),null;case 31:if(r.memoizedState!==null){if(Jt(r),r.alternate===null)throw Error(s(340));ss()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 13:if(Jt(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));ss()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return K(st),null;case 4:return Ge(),null;case 10:return Gn(r.type),null;case 22:case 23:return Jt(r),Ku(),n!==null&&K(os),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Gn(lt),null;case 25:return null;default:return null}}function wm(n,r){switch(Nu(r),r.tag){case 3:Gn(lt),Ge();break;case 26:case 27:case 5:et(r);break;case 4:Ge();break;case 31:r.memoizedState!==null&&Jt(r);break;case 13:Jt(r);break;case 19:K(st);break;case 10:Gn(r.type);break;case 22:case 23:Jt(r),Ku(),n!==null&&K(os);break;case 24:Gn(lt)}}function Tr(n,r){try{var l=r.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var g=u.next;l=g;do{if((l.tag&n)===n){u=void 0;var m=l.create,x=l.inst;u=m(),x.destroy=u}l=l.next}while(l!==g)}}catch(E){Ue(r,r.return,E)}}function ji(n,r,l){try{var u=r.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var m=g.next;u=m;do{if((u.tag&n)===n){var x=u.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,g=r;var O=l,I=E;try{I()}catch(Y){Ue(g,O,Y)}}}u=u.next}while(u!==m)}}catch(Y){Ue(r,r.return,Y)}}function Tm(n){var r=n.updateQueue;if(r!==null){var l=n.stateNode;try{gp(r,l)}catch(u){Ue(n,n.return,u)}}}function Em(n,r,l){l.props=ds(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(u){Ue(n,r,u)}}function Er(n,r){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof l=="function"?n.refCleanup=l(u):l.current=u}}catch(g){Ue(n,r,g)}}function Dn(n,r){var l=n.ref,u=n.refCleanup;if(l!==null)if(typeof u=="function")try{u()}catch(g){Ue(n,r,g)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){Ue(n,r,g)}else l.current=null}function Cm(n){var r=n.type,l=n.memoizedProps,u=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":l.autoFocus&&u.focus();break e;case"img":l.src?u.src=l.src:l.srcSet&&(u.srcset=l.srcSet)}}catch(g){Ue(n,n.return,g)}}function jh(n,r,l){try{var u=n.stateNode;bw(u,n.type,l,r),u[Nt]=r}catch(g){Ue(n,n.return,g)}}function jm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ni(n.type)||n.tag===4}function Ah(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||jm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ni(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Oh(n,r,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,r):(r=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,r.appendChild(n),l=l._reactRootContainer,l!=null||r.onclick!==null||(r.onclick=Fn));else if(u!==4&&(u===27&&Ni(n.type)&&(l=n.stateNode,r=null),n=n.child,n!==null))for(Oh(n,r,l),n=n.sibling;n!==null;)Oh(n,r,l),n=n.sibling}function yl(n,r,l){var u=n.tag;if(u===5||u===6)n=n.stateNode,r?l.insertBefore(n,r):l.appendChild(n);else if(u!==4&&(u===27&&Ni(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(yl(n,r,l),n=n.sibling;n!==null;)yl(n,r,l),n=n.sibling}function Am(n){var r=n.stateNode,l=n.memoizedProps;try{for(var u=n.type,g=r.attributes;g.length;)r.removeAttributeNode(g[0]);Tt(r,u,l),r[_t]=n,r[Nt]=l}catch(m){Ue(n,n.return,m)}}var Qn=!1,ht=!1,Rh=!1,Om=typeof WeakSet=="function"?WeakSet:Set,bt=null;function QS(n,r){if(n=n.containerInfo,Qh=Bl,n=Fg(n),wu(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var g=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var x=0,E=-1,O=-1,I=0,Y=0,Q=n,$=null;t:for(;;){for(var V;Q!==l||g!==0&&Q.nodeType!==3||(E=x+g),Q!==m||u!==0&&Q.nodeType!==3||(O=x+u),Q.nodeType===3&&(x+=Q.nodeValue.length),(V=Q.firstChild)!==null;)$=Q,Q=V;for(;;){if(Q===n)break t;if($===l&&++I===g&&(E=x),$===m&&++Y===u&&(O=x),(V=Q.nextSibling)!==null)break;Q=$,$=Q.parentNode}Q=V}l=E===-1||O===-1?null:{start:E,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Jh={focusedElem:n,selectionRange:l},Bl=!1,bt=r;bt!==null;)if(r=bt,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,bt=n;else for(;bt!==null;){switch(r=bt,m=r.alternate,n=r.flags,r.tag){case 0:if((n&4)!==0&&(n=r.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)g=n[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,l=r,g=m.memoizedProps,m=m.memoizedState,u=l.stateNode;try{var ce=ds(l.type,g);n=u.getSnapshotBeforeUpdate(ce,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(ye){Ue(l,l.return,ye)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,l=n.nodeType,l===9)td(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":td(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,bt=n;break}bt=r.return}}function Rm(n,r,l){var u=l.flags;switch(l.tag){case 0:case 11:case 15:Zn(n,l),u&4&&Tr(5,l);break;case 1:if(Zn(n,l),u&4)if(n=l.stateNode,r===null)try{n.componentDidMount()}catch(x){Ue(l,l.return,x)}else{var g=ds(l.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(g,r,n.__reactInternalSnapshotBeforeUpdate)}catch(x){Ue(l,l.return,x)}}u&64&&Tm(l),u&512&&Er(l,l.return);break;case 3:if(Zn(n,l),u&64&&(n=l.updateQueue,n!==null)){if(r=null,l.child!==null)switch(l.child.tag){case 27:case 5:r=l.child.stateNode;break;case 1:r=l.child.stateNode}try{gp(n,r)}catch(x){Ue(l,l.return,x)}}break;case 27:r===null&&u&4&&Am(l);case 26:case 5:Zn(n,l),r===null&&u&4&&Cm(l),u&512&&Er(l,l.return);break;case 12:Zn(n,l);break;case 31:Zn(n,l),u&4&&Dm(n,l);break;case 13:Zn(n,l),u&4&&Nm(n,l),u&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=rw.bind(null,l),Cw(n,l))));break;case 22:if(u=l.memoizedState!==null||Qn,!u){r=r!==null&&r.memoizedState!==null||ht,g=Qn;var m=ht;Qn=u,(ht=r)&&!m?ei(n,l,(l.subtreeFlags&8772)!==0):Zn(n,l),Qn=g,ht=m}break;case 30:break;default:Zn(n,l)}}function Mm(n){var r=n.alternate;r!==null&&(n.alternate=null,Mm(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&ru(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Qe=null,Lt=!1;function Jn(n,r,l){for(l=l.child;l!==null;)km(n,r,l),l=l.sibling}function km(n,r,l){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Ka,l)}catch{}switch(l.tag){case 26:ht||Dn(l,r),Jn(n,r,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ht||Dn(l,r);var u=Qe,g=Lt;Ni(l.type)&&(Qe=l.stateNode,Lt=!1),Jn(n,r,l),Nr(l.stateNode),Qe=u,Lt=g;break;case 5:ht||Dn(l,r);case 6:if(u=Qe,g=Lt,Qe=null,Jn(n,r,l),Qe=u,Lt=g,Qe!==null)if(Lt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(l.stateNode)}catch(m){Ue(l,r,m)}else try{Qe.removeChild(l.stateNode)}catch(m){Ue(l,r,m)}break;case 18:Qe!==null&&(Lt?(n=Qe,Ty(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),_a(n)):Ty(Qe,l.stateNode));break;case 4:u=Qe,g=Lt,Qe=l.stateNode.containerInfo,Lt=!0,Jn(n,r,l),Qe=u,Lt=g;break;case 0:case 11:case 14:case 15:ji(2,l,r),ht||ji(4,l,r),Jn(n,r,l);break;case 1:ht||(Dn(l,r),u=l.stateNode,typeof u.componentWillUnmount=="function"&&Em(l,r,u)),Jn(n,r,l);break;case 21:Jn(n,r,l);break;case 22:ht=(u=ht)||l.memoizedState!==null,Jn(n,r,l),ht=u;break;default:Jn(n,r,l)}}function Dm(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{_a(n)}catch(l){Ue(r,r.return,l)}}}function Nm(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{_a(n)}catch(l){Ue(r,r.return,l)}}function JS(n){switch(n.tag){case 31:case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new Om),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new Om),r;default:throw Error(s(435,n.tag))}}function bl(n,r){var l=JS(n);r.forEach(function(u){if(!l.has(u)){l.add(u);var g=ow.bind(null,n,u);u.then(g,g)}})}function zt(n,r){var l=r.deletions;if(l!==null)for(var u=0;u<l.length;u++){var g=l[u],m=n,x=r,E=x;e:for(;E!==null;){switch(E.tag){case 27:if(Ni(E.type)){Qe=E.stateNode,Lt=!1;break e}break;case 5:Qe=E.stateNode,Lt=!1;break e;case 3:case 4:Qe=E.stateNode.containerInfo,Lt=!0;break e}E=E.return}if(Qe===null)throw Error(s(160));km(m,x,g),Qe=null,Lt=!1,m=g.alternate,m!==null&&(m.return=null),g.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Pm(r,n),r=r.sibling}var _n=null;function Pm(n,r){var l=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:zt(r,n),Bt(n),u&4&&(ji(3,n,n.return),Tr(3,n),ji(5,n,n.return));break;case 1:zt(r,n),Bt(n),u&512&&(ht||l===null||Dn(l,l.return)),u&64&&Qn&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?u:l.concat(u))));break;case 26:var g=_n;if(zt(r,n),Bt(n),u&512&&(ht||l===null||Dn(l,l.return)),u&4){var m=l!==null?l.memoizedState:null;if(u=n.memoizedState,l===null)if(u===null)if(n.stateNode===null){e:{u=n.type,l=n.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":m=g.getElementsByTagName("title")[0],(!m||m[Ja]||m[_t]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=g.createElement(u),g.head.insertBefore(m,g.querySelector("head > title"))),Tt(m,u,l),m[_t]=n,yt(m),u=m;break e;case"link":var x=Py("link","href",g).get(u+(l.href||""));if(x){for(var E=0;E<x.length;E++)if(m=x[E],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(E,1);break t}}m=g.createElement(u),Tt(m,u,l),g.head.appendChild(m);break;case"meta":if(x=Py("meta","content",g).get(u+(l.content||""))){for(E=0;E<x.length;E++)if(m=x[E],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(E,1);break t}}m=g.createElement(u),Tt(m,u,l),g.head.appendChild(m);break;default:throw Error(s(468,u))}m[_t]=n,yt(m),u=m}n.stateNode=u}else Ly(g,n.type,n.stateNode);else n.stateNode=Ny(g,u,n.memoizedProps);else m!==u?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,u===null?Ly(g,n.type,n.stateNode):Ny(g,u,n.memoizedProps)):u===null&&n.stateNode!==null&&jh(n,n.memoizedProps,l.memoizedProps)}break;case 27:zt(r,n),Bt(n),u&512&&(ht||l===null||Dn(l,l.return)),l!==null&&u&4&&jh(n,n.memoizedProps,l.memoizedProps);break;case 5:if(zt(r,n),Bt(n),u&512&&(ht||l===null||Dn(l,l.return)),n.flags&32){g=n.stateNode;try{qs(g,"")}catch(ce){Ue(n,n.return,ce)}}u&4&&n.stateNode!=null&&(g=n.memoizedProps,jh(n,g,l!==null?l.memoizedProps:g)),u&1024&&(Rh=!0);break;case 6:if(zt(r,n),Bt(n),u&4){if(n.stateNode===null)throw Error(s(162));u=n.memoizedProps,l=n.stateNode;try{l.nodeValue=u}catch(ce){Ue(n,n.return,ce)}}break;case 3:if(Nl=null,g=_n,_n=kl(r.containerInfo),zt(r,n),_n=g,Bt(n),u&4&&l!==null&&l.memoizedState.isDehydrated)try{_a(r.containerInfo)}catch(ce){Ue(n,n.return,ce)}Rh&&(Rh=!1,Lm(n));break;case 4:u=_n,_n=kl(n.stateNode.containerInfo),zt(r,n),Bt(n),_n=u;break;case 12:zt(r,n),Bt(n);break;case 31:zt(r,n),Bt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,bl(n,u)));break;case 13:zt(r,n),Bt(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(_l=kt()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,bl(n,u)));break;case 22:g=n.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,I=Qn,Y=ht;if(Qn=I||g,ht=Y||O,zt(r,n),ht=Y,Qn=I,Bt(n),u&8192)e:for(r=n.stateNode,r._visibility=g?r._visibility&-2:r._visibility|1,g&&(l===null||O||Qn||ht||fs(n)),l=null,r=n;;){if(r.tag===5||r.tag===26){if(l===null){O=l=r;try{if(m=O.stateNode,g)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=O.stateNode;var Q=O.memoizedProps.style,$=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;E.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ce){Ue(O,O.return,ce)}}}else if(r.tag===6){if(l===null){O=r;try{O.stateNode.nodeValue=g?"":O.memoizedProps}catch(ce){Ue(O,O.return,ce)}}}else if(r.tag===18){if(l===null){O=r;try{var V=O.stateNode;g?Ey(V,!0):Ey(O.stateNode,!1)}catch(ce){Ue(O,O.return,ce)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;l===r&&(l=null),r=r.return}l===r&&(l=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=n.updateQueue,u!==null&&(l=u.retryQueue,l!==null&&(u.retryQueue=null,bl(n,l))));break;case 19:zt(r,n),Bt(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,bl(n,u)));break;case 30:break;case 21:break;default:zt(r,n),Bt(n)}}function Bt(n){var r=n.flags;if(r&2){try{for(var l,u=n.return;u!==null;){if(jm(u)){l=u;break}u=u.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var g=l.stateNode,m=Ah(n);yl(n,m,g);break;case 5:var x=l.stateNode;l.flags&32&&(qs(x,""),l.flags&=-33);var E=Ah(n);yl(n,E,x);break;case 3:case 4:var O=l.stateNode.containerInfo,I=Ah(n);Oh(n,I,O);break;default:throw Error(s(161))}}catch(Y){Ue(n,n.return,Y)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function Lm(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;Lm(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Zn(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Rm(n,r.alternate,r),r=r.sibling}function fs(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:ji(4,r,r.return),fs(r);break;case 1:Dn(r,r.return);var l=r.stateNode;typeof l.componentWillUnmount=="function"&&Em(r,r.return,l),fs(r);break;case 27:Nr(r.stateNode);case 26:case 5:Dn(r,r.return),fs(r);break;case 22:r.memoizedState===null&&fs(r);break;case 30:fs(r);break;default:fs(r)}n=n.sibling}}function ei(n,r,l){for(l=l&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,g=n,m=r,x=m.flags;switch(m.tag){case 0:case 11:case 15:ei(g,m,l),Tr(4,m);break;case 1:if(ei(g,m,l),u=m,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(I){Ue(u,u.return,I)}if(u=m,g=u.updateQueue,g!==null){var E=u.stateNode;try{var O=g.shared.hiddenCallbacks;if(O!==null)for(g.shared.hiddenCallbacks=null,g=0;g<O.length;g++)fp(O[g],E)}catch(I){Ue(u,u.return,I)}}l&&x&64&&Tm(m),Er(m,m.return);break;case 27:Am(m);case 26:case 5:ei(g,m,l),l&&u===null&&x&4&&Cm(m),Er(m,m.return);break;case 12:ei(g,m,l);break;case 31:ei(g,m,l),l&&x&4&&Dm(g,m);break;case 13:ei(g,m,l),l&&x&4&&Nm(g,m);break;case 22:m.memoizedState===null&&ei(g,m,l),Er(m,m.return);break;case 30:break;default:ei(g,m,l)}r=r.sibling}}function Mh(n,r){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&hr(l))}function kh(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&hr(n))}function xn(n,r,l,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)zm(n,r,l,u),r=r.sibling}function zm(n,r,l,u){var g=r.flags;switch(r.tag){case 0:case 11:case 15:xn(n,r,l,u),g&2048&&Tr(9,r);break;case 1:xn(n,r,l,u);break;case 3:xn(n,r,l,u),g&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&hr(n)));break;case 12:if(g&2048){xn(n,r,l,u),n=r.stateNode;try{var m=r.memoizedProps,x=m.id,E=m.onPostCommit;typeof E=="function"&&E(x,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(O){Ue(r,r.return,O)}}else xn(n,r,l,u);break;case 31:xn(n,r,l,u);break;case 13:xn(n,r,l,u);break;case 23:break;case 22:m=r.stateNode,x=r.alternate,r.memoizedState!==null?m._visibility&2?xn(n,r,l,u):Cr(n,r):m._visibility&2?xn(n,r,l,u):(m._visibility|=2,ca(n,r,l,u,(r.subtreeFlags&10256)!==0||!1)),g&2048&&Mh(x,r);break;case 24:xn(n,r,l,u),g&2048&&kh(r.alternate,r);break;default:xn(n,r,l,u)}}function ca(n,r,l,u,g){for(g=g&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var m=n,x=r,E=l,O=u,I=x.flags;switch(x.tag){case 0:case 11:case 15:ca(m,x,E,O,g),Tr(8,x);break;case 23:break;case 22:var Y=x.stateNode;x.memoizedState!==null?Y._visibility&2?ca(m,x,E,O,g):Cr(m,x):(Y._visibility|=2,ca(m,x,E,O,g)),g&&I&2048&&Mh(x.alternate,x);break;case 24:ca(m,x,E,O,g),g&&I&2048&&kh(x.alternate,x);break;default:ca(m,x,E,O,g)}r=r.sibling}}function Cr(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var l=n,u=r,g=u.flags;switch(u.tag){case 22:Cr(l,u),g&2048&&Mh(u.alternate,u);break;case 24:Cr(l,u),g&2048&&kh(u.alternate,u);break;default:Cr(l,u)}r=r.sibling}}var jr=8192;function ua(n,r,l){if(n.subtreeFlags&jr)for(n=n.child;n!==null;)Bm(n,r,l),n=n.sibling}function Bm(n,r,l){switch(n.tag){case 26:ua(n,r,l),n.flags&jr&&n.memoizedState!==null&&Bw(l,_n,n.memoizedState,n.memoizedProps);break;case 5:ua(n,r,l);break;case 3:case 4:var u=_n;_n=kl(n.stateNode.containerInfo),ua(n,r,l),_n=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=jr,jr=16777216,ua(n,r,l),jr=u):ua(n,r,l));break;default:ua(n,r,l)}}function Um(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Ar(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];bt=u,Fm(u,n)}Um(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Hm(n),n=n.sibling}function Hm(n){switch(n.tag){case 0:case 11:case 15:Ar(n),n.flags&2048&&ji(9,n,n.return);break;case 3:Ar(n);break;case 12:Ar(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,vl(n)):Ar(n);break;default:Ar(n)}}function vl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var l=0;l<r.length;l++){var u=r[l];bt=u,Fm(u,n)}Um(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:ji(8,r,r.return),vl(r);break;case 22:l=r.stateNode,l._visibility&2&&(l._visibility&=-3,vl(r));break;default:vl(r)}n=n.sibling}}function Fm(n,r){for(;bt!==null;){var l=bt;switch(l.tag){case 0:case 11:case 15:ji(8,l,r);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var u=l.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:hr(l.memoizedState.cache)}if(u=l.child,u!==null)u.return=l,bt=u;else e:for(l=n;bt!==null;){u=bt;var g=u.sibling,m=u.return;if(Mm(u),u===l){bt=null;break e}if(g!==null){g.return=m,bt=g;break e}bt=m}}}var ZS={getCacheForType:function(n){var r=St(lt),l=r.data.get(n);return l===void 0&&(l=n(),r.data.set(n,l)),l},cacheSignal:function(){return St(lt).controller.signal}},ew=typeof WeakMap=="function"?WeakMap:Map,Pe=0,Ve=null,Ee=null,je=0,Be=0,Zt=null,Ai=!1,ha=!1,Dh=!1,ti=0,nt=0,Oi=0,gs=0,Nh=0,en=0,da=0,Or=null,Ut=null,Ph=!1,_l=0,Im=0,xl=1/0,Sl=null,Ri=null,gt=0,Mi=null,fa=null,ni=0,Lh=0,zh=null,qm=null,Rr=0,Bh=null;function tn(){return(Pe&2)!==0&&je!==0?je&-je:H.T!==null?$h():ag()}function $m(){if(en===0)if((je&536870912)===0||Re){var n=Ro;Ro<<=1,(Ro&3932160)===0&&(Ro=262144),en=n}else en=536870912;return n=Qt.current,n!==null&&(n.flags|=32),en}function Ht(n,r,l){(n===Ve&&(Be===2||Be===9)||n.cancelPendingCommit!==null)&&(ga(n,0),ki(n,je,en,!1)),Qa(n,l),((Pe&2)===0||n!==Ve)&&(n===Ve&&((Pe&2)===0&&(gs|=l),nt===4&&ki(n,je,en,!1)),Nn(n))}function Vm(n,r,l){if((Pe&6)!==0)throw Error(s(327));var u=!l&&(r&127)===0&&(r&n.expiredLanes)===0||Xa(n,r),g=u?iw(n,r):Hh(n,r,!0),m=u;do{if(g===0){ha&&!u&&ki(n,r,0,!1);break}else{if(l=n.current.alternate,m&&!tw(l)){g=Hh(n,r,!1),m=!1;continue}if(g===2){if(m=r,n.errorRecoveryDisabledLanes&m)var x=0;else x=n.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){r=x;e:{var E=n;g=Or;var O=E.current.memoizedState.isDehydrated;if(O&&(ga(E,x).flags|=256),x=Hh(E,x,!1),x!==2){if(Dh&&!O){E.errorRecoveryDisabledLanes|=m,gs|=m,g=4;break e}m=Ut,Ut=g,m!==null&&(Ut===null?Ut=m:Ut.push.apply(Ut,m))}g=x}if(m=!1,g!==2)continue}}if(g===1){ga(n,0),ki(n,r,0,!0);break}e:{switch(u=n,m=g,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ki(u,r,en,!Ai);break e;case 2:Ut=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(g=_l+300-kt(),10<g)){if(ki(u,r,en,!Ai),ko(u,0,!0)!==0)break e;ni=r,u.timeoutHandle=Sy(Gm.bind(null,u,l,Ut,Sl,Ph,r,en,gs,da,Ai,m,"Throttled",-0,0),g);break e}Gm(u,l,Ut,Sl,Ph,r,en,gs,da,Ai,m,null,-0,0)}}break}while(!0);Nn(n)}function Gm(n,r,l,u,g,m,x,E,O,I,Y,Q,$,V){if(n.timeoutHandle=-1,Q=r.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fn},Bm(r,m,Q);var ce=(m&62914560)===m?_l-kt():(m&4194048)===m?Im-kt():0;if(ce=Uw(Q,ce),ce!==null){ni=m,n.cancelPendingCommit=ce(ey.bind(null,n,r,m,l,u,g,x,E,O,Y,Q,null,$,V)),ki(n,m,x,!I);return}}ey(n,r,m,l,u,g,x,E,O)}function tw(n){for(var r=n;;){var l=r.tag;if((l===0||l===11||l===15)&&r.flags&16384&&(l=r.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var u=0;u<l.length;u++){var g=l[u],m=g.getSnapshot;g=g.value;try{if(!Kt(m(),g))return!1}catch{return!1}}if(l=r.child,r.subtreeFlags&16384&&l!==null)l.return=r,r=l;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ki(n,r,l,u){r&=~Nh,r&=~gs,n.suspendedLanes|=r,n.pingedLanes&=~r,u&&(n.warmLanes|=r),u=n.expirationTimes;for(var g=r;0<g;){var m=31-Yt(g),x=1<<m;u[m]=-1,g&=~x}l!==0&&ng(n,l,r)}function wl(){return(Pe&6)===0?(Mr(0),!1):!0}function Uh(){if(Ee!==null){if(Be===0)var n=Ee.return;else n=Ee,Vn=as=null,th(n),sa=null,fr=0,n=Ee;for(;n!==null;)wm(n.alternate,n),n=n.return;Ee=null}}function ga(n,r){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,xw(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),ni=0,Uh(),Ve=n,Ee=l=qn(n.current,null),je=r,Be=0,Zt=null,Ai=!1,ha=Xa(n,r),Dh=!1,da=en=Nh=gs=Oi=nt=0,Ut=Or=null,Ph=!1,(r&8)!==0&&(r|=r&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=r;0<u;){var g=31-Yt(u),m=1<<g;r|=n[g],u&=~m}return ti=r,$o(),l}function Wm(n,r){_e=null,H.H=xr,r===ia||r===Jo?(r=cp(),Be=3):r===qu?(r=cp(),Be=4):Be=r===yh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Zt=r,Ee===null&&(nt=1,dl(n,ln(r,n.current)))}function Ym(){var n=Qt.current;return n===null?!0:(je&4194048)===je?dn===null:(je&62914560)===je||(je&536870912)!==0?n===dn:!1}function Km(){var n=H.H;return H.H=xr,n===null?xr:n}function Xm(){var n=H.A;return H.A=ZS,n}function Tl(){nt=4,Ai||(je&4194048)!==je&&Qt.current!==null||(ha=!0),(Oi&134217727)===0&&(gs&134217727)===0||Ve===null||ki(Ve,je,en,!1)}function Hh(n,r,l){var u=Pe;Pe|=2;var g=Km(),m=Xm();(Ve!==n||je!==r)&&(Sl=null,ga(n,r)),r=!1;var x=nt;e:do try{if(Be!==0&&Ee!==null){var E=Ee,O=Zt;switch(Be){case 8:Uh(),x=6;break e;case 3:case 2:case 9:case 6:Qt.current===null&&(r=!0);var I=Be;if(Be=0,Zt=null,pa(n,E,O,I),l&&ha){x=0;break e}break;default:I=Be,Be=0,Zt=null,pa(n,E,O,I)}}nw(),x=nt;break}catch(Y){Wm(n,Y)}while(!0);return r&&n.shellSuspendCounter++,Vn=as=null,Pe=u,H.H=g,H.A=m,Ee===null&&(Ve=null,je=0,$o()),x}function nw(){for(;Ee!==null;)Qm(Ee)}function iw(n,r){var l=Pe;Pe|=2;var u=Km(),g=Xm();Ve!==n||je!==r?(Sl=null,xl=kt()+500,ga(n,r)):ha=Xa(n,r);e:do try{if(Be!==0&&Ee!==null){r=Ee;var m=Zt;t:switch(Be){case 1:Be=0,Zt=null,pa(n,r,m,1);break;case 2:case 9:if(op(m)){Be=0,Zt=null,Jm(r);break}r=function(){Be!==2&&Be!==9||Ve!==n||(Be=7),Nn(n)},m.then(r,r);break e;case 3:Be=7;break e;case 4:Be=5;break e;case 7:op(m)?(Be=0,Zt=null,Jm(r)):(Be=0,Zt=null,pa(n,r,m,7));break;case 5:var x=null;switch(Ee.tag){case 26:x=Ee.memoizedState;case 5:case 27:var E=Ee;if(x?zy(x):E.stateNode.complete){Be=0,Zt=null;var O=E.sibling;if(O!==null)Ee=O;else{var I=E.return;I!==null?(Ee=I,El(I)):Ee=null}break t}}Be=0,Zt=null,pa(n,r,m,5);break;case 6:Be=0,Zt=null,pa(n,r,m,6);break;case 8:Uh(),nt=6;break e;default:throw Error(s(462))}}sw();break}catch(Y){Wm(n,Y)}while(!0);return Vn=as=null,H.H=u,H.A=g,Pe=l,Ee!==null?0:(Ve=null,je=0,$o(),nt)}function sw(){for(;Ee!==null&&!eu();)Qm(Ee)}function Qm(n){var r=xm(n.alternate,n,ti);n.memoizedProps=n.pendingProps,r===null?El(n):Ee=r}function Jm(n){var r=n,l=r.alternate;switch(r.tag){case 15:case 0:r=pm(l,r,r.pendingProps,r.type,void 0,je);break;case 11:r=pm(l,r,r.pendingProps,r.type.render,r.ref,je);break;case 5:th(r);default:wm(l,r),r=Ee=Xg(r,ti),r=xm(l,r,ti)}n.memoizedProps=n.pendingProps,r===null?El(n):Ee=r}function pa(n,r,l,u){Vn=as=null,th(r),sa=null,fr=0;var g=r.return;try{if(GS(n,g,r,l,je)){nt=1,dl(n,ln(l,n.current)),Ee=null;return}}catch(m){if(g!==null)throw Ee=g,m;nt=1,dl(n,ln(l,n.current)),Ee=null;return}r.flags&32768?(Re||u===1?n=!0:ha||(je&536870912)!==0?n=!1:(Ai=n=!0,(u===2||u===9||u===3||u===6)&&(u=Qt.current,u!==null&&u.tag===13&&(u.flags|=16384))),Zm(r,n)):El(r)}function El(n){var r=n;do{if((r.flags&32768)!==0){Zm(r,Ai);return}n=r.return;var l=KS(r.alternate,r,ti);if(l!==null){Ee=l;return}if(r=r.sibling,r!==null){Ee=r;return}Ee=r=n}while(r!==null);nt===0&&(nt=5)}function Zm(n,r){do{var l=XS(n.alternate,n);if(l!==null){l.flags&=32767,Ee=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!r&&(n=n.sibling,n!==null)){Ee=n;return}Ee=n=l}while(n!==null);nt=6,Ee=null}function ey(n,r,l,u,g,m,x,E,O){n.cancelPendingCommit=null;do Cl();while(gt!==0);if((Pe&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=Au,zx(n,l,m,x,E,O),n===Ve&&(Ee=Ve=null,je=0),fa=r,Mi=n,ni=l,Lh=m,zh=g,qm=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,lw(Gt,function(){return ay(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=H.T,H.T=null,g=ee.p,ee.p=2,x=Pe,Pe|=4;try{QS(n,r,l)}finally{Pe=x,ee.p=g,H.T=u}}gt=1,ty(),ny(),iy()}}function ty(){if(gt===1){gt=0;var n=Mi,r=fa,l=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||l){l=H.T,H.T=null;var u=ee.p;ee.p=2;var g=Pe;Pe|=4;try{Pm(r,n);var m=Jh,x=Fg(n.containerInfo),E=m.focusedElem,O=m.selectionRange;if(x!==E&&E&&E.ownerDocument&&Hg(E.ownerDocument.documentElement,E)){if(O!==null&&wu(E)){var I=O.start,Y=O.end;if(Y===void 0&&(Y=I),"selectionStart"in E)E.selectionStart=I,E.selectionEnd=Math.min(Y,E.value.length);else{var Q=E.ownerDocument||document,$=Q&&Q.defaultView||window;if($.getSelection){var V=$.getSelection(),ce=E.textContent.length,ye=Math.min(O.start,ce),$e=O.end===void 0?ye:Math.min(O.end,ce);!V.extend&&ye>$e&&(x=$e,$e=ye,ye=x);var z=Ug(E,ye),M=Ug(E,$e);if(z&&M&&(V.rangeCount!==1||V.anchorNode!==z.node||V.anchorOffset!==z.offset||V.focusNode!==M.node||V.focusOffset!==M.offset)){var F=Q.createRange();F.setStart(z.node,z.offset),V.removeAllRanges(),ye>$e?(V.addRange(F),V.extend(M.node,M.offset)):(F.setEnd(M.node,M.offset),V.addRange(F))}}}}for(Q=[],V=E;V=V.parentNode;)V.nodeType===1&&Q.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<Q.length;E++){var X=Q[E];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Bl=!!Qh,Jh=Qh=null}finally{Pe=g,ee.p=u,H.T=l}}n.current=r,gt=2}}function ny(){if(gt===2){gt=0;var n=Mi,r=fa,l=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||l){l=H.T,H.T=null;var u=ee.p;ee.p=2;var g=Pe;Pe|=4;try{Rm(n,r.alternate,r)}finally{Pe=g,ee.p=u,H.T=l}}gt=3}}function iy(){if(gt===4||gt===3){gt=0,tu();var n=Mi,r=fa,l=ni,u=qm;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?gt=5:(gt=0,fa=Mi=null,sy(n,n.pendingLanes));var g=n.pendingLanes;if(g===0&&(Ri=null),su(l),r=r.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Ka,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=H.T,g=ee.p,ee.p=2,H.T=null;try{for(var m=n.onRecoverableError,x=0;x<u.length;x++){var E=u[x];m(E.value,{componentStack:E.stack})}}finally{H.T=r,ee.p=g}}(ni&3)!==0&&Cl(),Nn(n),g=n.pendingLanes,(l&261930)!==0&&(g&42)!==0?n===Bh?Rr++:(Rr=0,Bh=n):Rr=0,Mr(0)}}function sy(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,hr(r)))}function Cl(){return ty(),ny(),iy(),ay()}function ay(){if(gt!==5)return!1;var n=Mi,r=Lh;Lh=0;var l=su(ni),u=H.T,g=ee.p;try{ee.p=32>l?32:l,H.T=null,l=zh,zh=null;var m=Mi,x=ni;if(gt=0,fa=Mi=null,ni=0,(Pe&6)!==0)throw Error(s(331));var E=Pe;if(Pe|=4,Hm(m.current),zm(m,m.current,x,l),Pe=E,Mr(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Ka,m)}catch{}return!0}finally{ee.p=g,H.T=u,sy(n,r)}}function ry(n,r,l){r=ln(l,r),r=mh(n.stateNode,r,2),n=Ti(n,r,2),n!==null&&(Qa(n,2),Nn(n))}function Ue(n,r,l){if(n.tag===3)ry(n,n,l);else for(;r!==null;){if(r.tag===3){ry(r,n,l);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Ri===null||!Ri.has(u))){n=ln(l,n),l=om(2),u=Ti(r,l,2),u!==null&&(lm(l,u,r,n),Qa(u,2),Nn(u));break}}r=r.return}}function Fh(n,r,l){var u=n.pingCache;if(u===null){u=n.pingCache=new ew;var g=new Set;u.set(r,g)}else g=u.get(r),g===void 0&&(g=new Set,u.set(r,g));g.has(l)||(Dh=!0,g.add(l),n=aw.bind(null,n,r,l),r.then(n,n))}function aw(n,r,l){var u=n.pingCache;u!==null&&u.delete(r),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,Ve===n&&(je&l)===l&&(nt===4||nt===3&&(je&62914560)===je&&300>kt()-_l?(Pe&2)===0&&ga(n,0):Nh|=l,da===je&&(da=0)),Nn(n)}function oy(n,r){r===0&&(r=tg()),n=ns(n,r),n!==null&&(Qa(n,r),Nn(n))}function rw(n){var r=n.memoizedState,l=0;r!==null&&(l=r.retryLane),oy(n,l)}function ow(n,r){var l=0;switch(n.tag){case 31:case 13:var u=n.stateNode,g=n.memoizedState;g!==null&&(l=g.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(s(314))}u!==null&&u.delete(r),oy(n,l)}function lw(n,r){return Wa(n,r)}var jl=null,ma=null,Ih=!1,Al=!1,qh=!1,Di=0;function Nn(n){n!==ma&&n.next===null&&(ma===null?jl=ma=n:ma=ma.next=n),Al=!0,Ih||(Ih=!0,uw())}function Mr(n,r){if(!qh&&Al){qh=!0;do for(var l=!1,u=jl;u!==null;){if(n!==0){var g=u.pendingLanes;if(g===0)var m=0;else{var x=u.suspendedLanes,E=u.pingedLanes;m=(1<<31-Yt(42|n)+1)-1,m&=g&~(x&~E),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,hy(u,m))}else m=je,m=ko(u,u===Ve?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Xa(u,m)||(l=!0,hy(u,m));u=u.next}while(l);qh=!1}}function cw(){ly()}function ly(){Al=Ih=!1;var n=0;Di!==0&&_w()&&(n=Di);for(var r=kt(),l=null,u=jl;u!==null;){var g=u.next,m=cy(u,r);m===0?(u.next=null,l===null?jl=g:l.next=g,g===null&&(ma=l)):(l=u,(n!==0||(m&3)!==0)&&(Al=!0)),u=g}gt!==0&&gt!==5||Mr(n),Di!==0&&(Di=0)}function cy(n,r){for(var l=n.suspendedLanes,u=n.pingedLanes,g=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var x=31-Yt(m),E=1<<x,O=g[x];O===-1?((E&l)===0||(E&u)!==0)&&(g[x]=Lx(E,r)):O<=r&&(n.expiredLanes|=E),m&=~E}if(r=Ve,l=je,l=ko(n,n===r?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,l===0||n===r&&(Be===2||Be===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Ya(u),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Xa(n,l)){if(r=l&-l,r===n.callbackPriority)return r;switch(u!==null&&Ya(u),su(l)){case 2:case 8:l=xe;break;case 32:l=Gt;break;case 268435456:l=Ls;break;default:l=Gt}return u=uy.bind(null,n),l=Wa(l,u),n.callbackPriority=r,n.callbackNode=l,r}return u!==null&&u!==null&&Ya(u),n.callbackPriority=2,n.callbackNode=null,2}function uy(n,r){if(gt!==0&&gt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(Cl()&&n.callbackNode!==l)return null;var u=je;return u=ko(n,n===Ve?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Vm(n,u,r),cy(n,kt()),n.callbackNode!=null&&n.callbackNode===l?uy.bind(null,n):null)}function hy(n,r){if(Cl())return null;Vm(n,r,!0)}function uw(){Sw(function(){(Pe&6)!==0?Wa(oe,cw):ly()})}function $h(){if(Di===0){var n=ta;n===0&&(n=Oo,Oo<<=1,(Oo&261888)===0&&(Oo=256)),Di=n}return Di}function dy(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Lo(""+n)}function fy(n,r){var l=r.ownerDocument.createElement("input");return l.name=r.name,l.value=r.value,n.id&&l.setAttribute("form",n.id),r.parentNode.insertBefore(l,r),n=new FormData(n),l.parentNode.removeChild(l),n}function hw(n,r,l,u,g){if(r==="submit"&&l&&l.stateNode===g){var m=dy((g[Nt]||null).action),x=u.submitter;x&&(r=(r=x[Nt]||null)?dy(r.formAction):x.getAttribute("formAction"),r!==null&&(m=r,x=null));var E=new Ho("action","action",null,u,g);n.push({event:E,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Di!==0){var O=x?fy(g,x):new FormData(g);uh(l,{pending:!0,data:O,method:g.method,action:m},null,O)}}else typeof m=="function"&&(E.preventDefault(),O=x?fy(g,x):new FormData(g),uh(l,{pending:!0,data:O,method:g.method,action:m},m,O))},currentTarget:g}]})}}for(var Vh=0;Vh<ju.length;Vh++){var Gh=ju[Vh],dw=Gh.toLowerCase(),fw=Gh[0].toUpperCase()+Gh.slice(1);vn(dw,"on"+fw)}vn($g,"onAnimationEnd"),vn(Vg,"onAnimationIteration"),vn(Gg,"onAnimationStart"),vn("dblclick","onDoubleClick"),vn("focusin","onFocus"),vn("focusout","onBlur"),vn(OS,"onTransitionRun"),vn(RS,"onTransitionStart"),vn(MS,"onTransitionCancel"),vn(Wg,"onTransitionEnd"),Fs("onMouseEnter",["mouseout","mouseover"]),Fs("onMouseLeave",["mouseout","mouseover"]),Fs("onPointerEnter",["pointerout","pointerover"]),Fs("onPointerLeave",["pointerout","pointerover"]),Ji("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ji("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ji("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ji("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ji("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kr));function gy(n,r){r=(r&4)!==0;for(var l=0;l<n.length;l++){var u=n[l],g=u.event;u=u.listeners;e:{var m=void 0;if(r)for(var x=u.length-1;0<=x;x--){var E=u[x],O=E.instance,I=E.currentTarget;if(E=E.listener,O!==m&&g.isPropagationStopped())break e;m=E,g.currentTarget=I;try{m(g)}catch(Y){qo(Y)}g.currentTarget=null,m=O}else for(x=0;x<u.length;x++){if(E=u[x],O=E.instance,I=E.currentTarget,E=E.listener,O!==m&&g.isPropagationStopped())break e;m=E,g.currentTarget=I;try{m(g)}catch(Y){qo(Y)}g.currentTarget=null,m=O}}}}function Ce(n,r){var l=r[au];l===void 0&&(l=r[au]=new Set);var u=n+"__bubble";l.has(u)||(py(r,n,2,!1),l.add(u))}function Wh(n,r,l){var u=0;r&&(u|=4),py(l,n,u,r)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function Yh(n){if(!n[Ol]){n[Ol]=!0,lg.forEach(function(l){l!=="selectionchange"&&(gw.has(l)||Wh(l,!1,n),Wh(l,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Ol]||(r[Ol]=!0,Wh("selectionchange",!1,r))}}function py(n,r,l,u){switch($y(r)){case 2:var g=Iw;break;case 8:g=qw;break;default:g=cd}l=g.bind(null,r,l,n),g=void 0,!gu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(g=!0),u?g!==void 0?n.addEventListener(r,l,{capture:!0,passive:g}):n.addEventListener(r,l,!0):g!==void 0?n.addEventListener(r,l,{passive:g}):n.addEventListener(r,l,!1)}function Kh(n,r,l,u,g){var m=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var E=u.stateNode.containerInfo;if(E===g)break;if(x===4)for(x=u.return;x!==null;){var O=x.tag;if((O===3||O===4)&&x.stateNode.containerInfo===g)return;x=x.return}for(;E!==null;){if(x=Bs(E),x===null)return;if(O=x.tag,O===5||O===6||O===26||O===27){u=m=x;continue e}E=E.parentNode}}u=u.return}_g(function(){var I=m,Y=du(l),Q=[];e:{var $=Yg.get(n);if($!==void 0){var V=Ho,ce=n;switch(n){case"keypress":if(Bo(l)===0)break e;case"keydown":case"keyup":V=oS;break;case"focusin":ce="focus",V=bu;break;case"focusout":ce="blur",V=bu;break;case"beforeblur":case"afterblur":V=bu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=wg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Kx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=uS;break;case $g:case Vg:case Gg:V=Jx;break;case Wg:V=dS;break;case"scroll":case"scrollend":V=Wx;break;case"wheel":V=gS;break;case"copy":case"cut":case"paste":V=eS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Eg;break;case"toggle":case"beforetoggle":V=mS}var ye=(r&4)!==0,$e=!ye&&(n==="scroll"||n==="scrollend"),z=ye?$!==null?$+"Capture":null:$;ye=[];for(var M=I,F;M!==null;){var X=M;if(F=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||F===null||z===null||(X=er(M,z),X!=null&&ye.push(Dr(M,X,F))),$e)break;M=M.return}0<ye.length&&($=new V($,ce,null,l,Y),Q.push({event:$,listeners:ye}))}}if((r&7)===0){e:{if($=n==="mouseover"||n==="pointerover",V=n==="mouseout"||n==="pointerout",$&&l!==hu&&(ce=l.relatedTarget||l.fromElement)&&(Bs(ce)||ce[zs]))break e;if((V||$)&&($=Y.window===Y?Y:($=Y.ownerDocument)?$.defaultView||$.parentWindow:window,V?(ce=l.relatedTarget||l.toElement,V=I,ce=ce?Bs(ce):null,ce!==null&&($e=o(ce),ye=ce.tag,ce!==$e||ye!==5&&ye!==27&&ye!==6)&&(ce=null)):(V=null,ce=I),V!==ce)){if(ye=wg,X="onMouseLeave",z="onMouseEnter",M="mouse",(n==="pointerout"||n==="pointerover")&&(ye=Eg,X="onPointerLeave",z="onPointerEnter",M="pointer"),$e=V==null?$:Za(V),F=ce==null?$:Za(ce),$=new ye(X,M+"leave",V,l,Y),$.target=$e,$.relatedTarget=F,X=null,Bs(Y)===I&&(ye=new ye(z,M+"enter",ce,l,Y),ye.target=F,ye.relatedTarget=$e,X=ye),$e=X,V&&ce)t:{for(ye=pw,z=V,M=ce,F=0,X=z;X;X=ye(X))F++;X=0;for(var pe=M;pe;pe=ye(pe))X++;for(;0<F-X;)z=ye(z),F--;for(;0<X-F;)M=ye(M),X--;for(;F--;){if(z===M||M!==null&&z===M.alternate){ye=z;break t}z=ye(z),M=ye(M)}ye=null}else ye=null;V!==null&&my(Q,$,V,ye,!1),ce!==null&&$e!==null&&my(Q,$e,ce,ye,!0)}}e:{if($=I?Za(I):window,V=$.nodeName&&$.nodeName.toLowerCase(),V==="select"||V==="input"&&$.type==="file")var De=Dg;else if(Mg($))if(Ng)De=CS;else{De=TS;var he=wS}else V=$.nodeName,!V||V.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?I&&uu(I.elementType)&&(De=Dg):De=ES;if(De&&(De=De(n,I))){kg(Q,De,l,Y);break e}he&&he(n,$,I),n==="focusout"&&I&&$.type==="number"&&I.memoizedProps.value!=null&&cu($,"number",$.value)}switch(he=I?Za(I):window,n){case"focusin":(Mg(he)||he.contentEditable==="true")&&(Ws=he,Tu=I,lr=null);break;case"focusout":lr=Tu=Ws=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,Ig(Q,l,Y);break;case"selectionchange":if(AS)break;case"keydown":case"keyup":Ig(Q,l,Y)}var Se;if(_u)e:{switch(n){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Gs?Og(n,l)&&(Ae="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(Ae="onCompositionStart");Ae&&(Cg&&l.locale!=="ko"&&(Gs||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Gs&&(Se=xg()):(yi=Y,pu="value"in yi?yi.value:yi.textContent,Gs=!0)),he=Rl(I,Ae),0<he.length&&(Ae=new Tg(Ae,n,null,l,Y),Q.push({event:Ae,listeners:he}),Se?Ae.data=Se:(Se=Rg(l),Se!==null&&(Ae.data=Se)))),(Se=bS?vS(n,l):_S(n,l))&&(Ae=Rl(I,"onBeforeInput"),0<Ae.length&&(he=new Tg("onBeforeInput","beforeinput",null,l,Y),Q.push({event:he,listeners:Ae}),he.data=Se)),hw(Q,n,I,l,Y)}gy(Q,r)})}function Dr(n,r,l){return{instance:n,listener:r,currentTarget:l}}function Rl(n,r){for(var l=r+"Capture",u=[];n!==null;){var g=n,m=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||m===null||(g=er(n,l),g!=null&&u.unshift(Dr(n,g,m)),g=er(n,r),g!=null&&u.push(Dr(n,g,m))),n.tag===3)return u;n=n.return}return[]}function pw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function my(n,r,l,u,g){for(var m=r._reactName,x=[];l!==null&&l!==u;){var E=l,O=E.alternate,I=E.stateNode;if(E=E.tag,O!==null&&O===u)break;E!==5&&E!==26&&E!==27||I===null||(O=I,g?(I=er(l,m),I!=null&&x.unshift(Dr(l,I,O))):g||(I=er(l,m),I!=null&&x.push(Dr(l,I,O)))),l=l.return}x.length!==0&&n.push({event:r,listeners:x})}var mw=/\r\n?/g,yw=/\u0000|\uFFFD/g;function yy(n){return(typeof n=="string"?n:""+n).replace(mw,`
`).replace(yw,"")}function by(n,r){return r=yy(r),yy(n)===r}function qe(n,r,l,u,g,m){switch(l){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||qs(n,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&qs(n,""+u);break;case"className":No(n,"class",u);break;case"tabIndex":No(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":No(n,l,u);break;case"style":bg(n,u,m);break;case"data":if(r!=="object"){No(n,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||l!=="href")){n.removeAttribute(l);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=Lo(""+u),n.setAttribute(l,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(r!=="input"&&qe(n,r,"name",g.name,g,null),qe(n,r,"formEncType",g.formEncType,g,null),qe(n,r,"formMethod",g.formMethod,g,null),qe(n,r,"formTarget",g.formTarget,g,null)):(qe(n,r,"encType",g.encType,g,null),qe(n,r,"method",g.method,g,null),qe(n,r,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(l);break}u=Lo(""+u),n.setAttribute(l,u);break;case"onClick":u!=null&&(n.onclick=Fn);break;case"onScroll":u!=null&&Ce("scroll",n);break;case"onScrollEnd":u!=null&&Ce("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}l=Lo(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""+u):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":u===!0?n.setAttribute(l,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(l,u):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(l,u):n.removeAttribute(l);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(l):n.setAttribute(l,u);break;case"popover":Ce("beforetoggle",n),Ce("toggle",n),Do(n,"popover",u);break;case"xlinkActuate":Hn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Hn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Hn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Hn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Hn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Hn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Hn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Do(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Vx.get(l)||l,Do(n,l,u))}}function Xh(n,r,l,u,g,m){switch(l){case"style":bg(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(s(61));if(l=u.__html,l!=null){if(g.children!=null)throw Error(s(60));n.innerHTML=l}}break;case"children":typeof u=="string"?qs(n,u):(typeof u=="number"||typeof u=="bigint")&&qs(n,""+u);break;case"onScroll":u!=null&&Ce("scroll",n);break;case"onScrollEnd":u!=null&&Ce("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!cg.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),r=l.slice(2,g?l.length-7:void 0),m=n[Nt]||null,m=m!=null?m[l]:null,typeof m=="function"&&n.removeEventListener(r,m,g),typeof u=="function")){typeof m!="function"&&m!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(r,u,g);break e}l in n?n[l]=u:u===!0?n.setAttribute(l,""):Do(n,l,u)}}}function Tt(n,r,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ce("error",n),Ce("load",n);var u=!1,g=!1,m;for(m in l)if(l.hasOwnProperty(m)){var x=l[m];if(x!=null)switch(m){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:qe(n,r,m,x,l,null)}}g&&qe(n,r,"srcSet",l.srcSet,l,null),u&&qe(n,r,"src",l.src,l,null);return;case"input":Ce("invalid",n);var E=m=x=g=null,O=null,I=null;for(u in l)if(l.hasOwnProperty(u)){var Y=l[u];if(Y!=null)switch(u){case"name":g=Y;break;case"type":x=Y;break;case"checked":O=Y;break;case"defaultChecked":I=Y;break;case"value":m=Y;break;case"defaultValue":E=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:qe(n,r,u,Y,l,null)}}gg(n,m,E,O,I,x,g,!1);return;case"select":Ce("invalid",n),u=x=m=null;for(g in l)if(l.hasOwnProperty(g)&&(E=l[g],E!=null))switch(g){case"value":m=E;break;case"defaultValue":x=E;break;case"multiple":u=E;default:qe(n,r,g,E,l,null)}r=m,l=x,n.multiple=!!u,r!=null?Is(n,!!u,r,!1):l!=null&&Is(n,!!u,l,!0);return;case"textarea":Ce("invalid",n),m=g=u=null;for(x in l)if(l.hasOwnProperty(x)&&(E=l[x],E!=null))switch(x){case"value":u=E;break;case"defaultValue":g=E;break;case"children":m=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:qe(n,r,x,E,l,null)}mg(n,u,g,m);return;case"option":for(O in l)if(l.hasOwnProperty(O)&&(u=l[O],u!=null))switch(O){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:qe(n,r,O,u,l,null)}return;case"dialog":Ce("beforetoggle",n),Ce("toggle",n),Ce("cancel",n),Ce("close",n);break;case"iframe":case"object":Ce("load",n);break;case"video":case"audio":for(u=0;u<kr.length;u++)Ce(kr[u],n);break;case"image":Ce("error",n),Ce("load",n);break;case"details":Ce("toggle",n);break;case"embed":case"source":case"link":Ce("error",n),Ce("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(I in l)if(l.hasOwnProperty(I)&&(u=l[I],u!=null))switch(I){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:qe(n,r,I,u,l,null)}return;default:if(uu(r)){for(Y in l)l.hasOwnProperty(Y)&&(u=l[Y],u!==void 0&&Xh(n,r,Y,u,l,void 0));return}}for(E in l)l.hasOwnProperty(E)&&(u=l[E],u!=null&&qe(n,r,E,u,l,null))}function bw(n,r,l,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,m=null,x=null,E=null,O=null,I=null,Y=null;for(V in l){var Q=l[V];if(l.hasOwnProperty(V)&&Q!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":O=Q;default:u.hasOwnProperty(V)||qe(n,r,V,null,u,Q)}}for(var $ in u){var V=u[$];if(Q=l[$],u.hasOwnProperty($)&&(V!=null||Q!=null))switch($){case"type":m=V;break;case"name":g=V;break;case"checked":I=V;break;case"defaultChecked":Y=V;break;case"value":x=V;break;case"defaultValue":E=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,r));break;default:V!==Q&&qe(n,r,$,V,u,Q)}}lu(n,x,E,O,I,Y,m,g);return;case"select":V=x=E=$=null;for(m in l)if(O=l[m],l.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":V=O;default:u.hasOwnProperty(m)||qe(n,r,m,null,u,O)}for(g in u)if(m=u[g],O=l[g],u.hasOwnProperty(g)&&(m!=null||O!=null))switch(g){case"value":$=m;break;case"defaultValue":E=m;break;case"multiple":x=m;default:m!==O&&qe(n,r,g,m,u,O)}r=E,l=x,u=V,$!=null?Is(n,!!l,$,!1):!!u!=!!l&&(r!=null?Is(n,!!l,r,!0):Is(n,!!l,l?[]:"",!1));return;case"textarea":V=$=null;for(E in l)if(g=l[E],l.hasOwnProperty(E)&&g!=null&&!u.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:qe(n,r,E,null,u,g)}for(x in u)if(g=u[x],m=l[x],u.hasOwnProperty(x)&&(g!=null||m!=null))switch(x){case"value":$=g;break;case"defaultValue":V=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(s(91));break;default:g!==m&&qe(n,r,x,g,u,m)}pg(n,$,V);return;case"option":for(var ce in l)if($=l[ce],l.hasOwnProperty(ce)&&$!=null&&!u.hasOwnProperty(ce))switch(ce){case"selected":n.selected=!1;break;default:qe(n,r,ce,null,u,$)}for(O in u)if($=u[O],V=l[O],u.hasOwnProperty(O)&&$!==V&&($!=null||V!=null))switch(O){case"selected":n.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:qe(n,r,O,$,u,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ye in l)$=l[ye],l.hasOwnProperty(ye)&&$!=null&&!u.hasOwnProperty(ye)&&qe(n,r,ye,null,u,$);for(I in u)if($=u[I],V=l[I],u.hasOwnProperty(I)&&$!==V&&($!=null||V!=null))switch(I){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:qe(n,r,I,$,u,V)}return;default:if(uu(r)){for(var $e in l)$=l[$e],l.hasOwnProperty($e)&&$!==void 0&&!u.hasOwnProperty($e)&&Xh(n,r,$e,void 0,u,$);for(Y in u)$=u[Y],V=l[Y],!u.hasOwnProperty(Y)||$===V||$===void 0&&V===void 0||Xh(n,r,Y,$,u,V);return}}for(var z in l)$=l[z],l.hasOwnProperty(z)&&$!=null&&!u.hasOwnProperty(z)&&qe(n,r,z,null,u,$);for(Q in u)$=u[Q],V=l[Q],!u.hasOwnProperty(Q)||$===V||$==null&&V==null||qe(n,r,Q,$,u,V)}function vy(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function vw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,r=0,l=performance.getEntriesByType("resource"),u=0;u<l.length;u++){var g=l[u],m=g.transferSize,x=g.initiatorType,E=g.duration;if(m&&E&&vy(x)){for(x=0,E=g.responseEnd,u+=1;u<l.length;u++){var O=l[u],I=O.startTime;if(I>E)break;var Y=O.transferSize,Q=O.initiatorType;Y&&vy(Q)&&(O=O.responseEnd,x+=Y*(O<E?1:(E-I)/(O-I)))}if(--u,r+=8*(m+x)/(g.duration/1e3),n++,10<n)break}}if(0<n)return r/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Qh=null,Jh=null;function Ml(n){return n.nodeType===9?n:n.ownerDocument}function _y(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xy(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Zh(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ed=null;function _w(){var n=window.event;return n&&n.type==="popstate"?n===ed?!1:(ed=n,!0):(ed=null,!1)}var Sy=typeof setTimeout=="function"?setTimeout:void 0,xw=typeof clearTimeout=="function"?clearTimeout:void 0,wy=typeof Promise=="function"?Promise:void 0,Sw=typeof queueMicrotask=="function"?queueMicrotask:typeof wy<"u"?function(n){return wy.resolve(null).then(n).catch(ww)}:Sy;function ww(n){setTimeout(function(){throw n})}function Ni(n){return n==="head"}function Ty(n,r){var l=r,u=0;do{var g=l.nextSibling;if(n.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(u===0){n.removeChild(g),_a(r);return}u--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")u++;else if(l==="html")Nr(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Nr(l);for(var m=l.firstChild;m;){var x=m.nextSibling,E=m.nodeName;m[Ja]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=x}}else l==="body"&&Nr(n.ownerDocument.body);l=g}while(l);_a(r)}function Ey(n,r){var l=n;n=0;do{var u=l.nextSibling;if(l.nodeType===1?r?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(r?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),u&&u.nodeType===8)if(l=u.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=u}while(l)}function td(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var l=r;switch(r=r.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":td(l),ru(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function Tw(n,r,l,u){for(;n.nodeType===1;){var g=l;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Ja])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==g.rel||n.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||n.getAttribute("title")!==(g.title==null?null:g.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(g.src==null?null:g.src)||n.getAttribute("type")!==(g.type==null?null:g.type)||n.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=g.name==null?null:""+g.name;if(g.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=fn(n.nextSibling),n===null)break}return null}function Ew(n,r,l){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=fn(n.nextSibling),n===null))return null;return n}function Cy(n,r){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=fn(n.nextSibling),n===null))return null;return n}function nd(n){return n.data==="$?"||n.data==="$~"}function id(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Cw(n,r){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=r;else if(n.data!=="$?"||l.readyState!=="loading")r();else{var u=function(){r(),l.removeEventListener("DOMContentLoaded",u)};l.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function fn(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return n}var sd=null;function jy(n){n=n.nextSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(r===0)return fn(n.nextSibling);r--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||r++}n=n.nextSibling}return null}function Ay(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(r===0)return n;r--}else l!=="/$"&&l!=="/&"||r++}n=n.previousSibling}return null}function Oy(n,r,l){switch(r=Ml(l),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Nr(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);ru(n)}var gn=new Map,Ry=new Set;function kl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var ii=ee.d;ee.d={f:jw,r:Aw,D:Ow,C:Rw,L:Mw,m:kw,X:Nw,S:Dw,M:Pw};function jw(){var n=ii.f(),r=wl();return n||r}function Aw(n){var r=Us(n);r!==null&&r.tag===5&&r.type==="form"?Wp(r):ii.r(n)}var ya=typeof document>"u"?null:document;function My(n,r,l){var u=ya;if(u&&typeof r=="string"&&r){var g=rn(r);g='link[rel="'+n+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Ry.has(g)||(Ry.add(g),n={rel:n,crossOrigin:l,href:r},u.querySelector(g)===null&&(r=u.createElement("link"),Tt(r,"link",n),yt(r),u.head.appendChild(r)))}}function Ow(n){ii.D(n),My("dns-prefetch",n,null)}function Rw(n,r){ii.C(n,r),My("preconnect",n,r)}function Mw(n,r,l){ii.L(n,r,l);var u=ya;if(u&&n&&r){var g='link[rel="preload"][as="'+rn(r)+'"]';r==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+rn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+rn(l.imageSizes)+'"]')):g+='[href="'+rn(n)+'"]';var m=g;switch(r){case"style":m=ba(n);break;case"script":m=va(n)}gn.has(m)||(n=b({rel:"preload",href:r==="image"&&l&&l.imageSrcSet?void 0:n,as:r},l),gn.set(m,n),u.querySelector(g)!==null||r==="style"&&u.querySelector(Pr(m))||r==="script"&&u.querySelector(Lr(m))||(r=u.createElement("link"),Tt(r,"link",n),yt(r),u.head.appendChild(r)))}}function kw(n,r){ii.m(n,r);var l=ya;if(l&&n){var u=r&&typeof r.as=="string"?r.as:"script",g='link[rel="modulepreload"][as="'+rn(u)+'"][href="'+rn(n)+'"]',m=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=va(n)}if(!gn.has(m)&&(n=b({rel:"modulepreload",href:n},r),gn.set(m,n),l.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Lr(m)))return}u=l.createElement("link"),Tt(u,"link",n),yt(u),l.head.appendChild(u)}}}function Dw(n,r,l){ii.S(n,r,l);var u=ya;if(u&&n){var g=Hs(u).hoistableStyles,m=ba(n);r=r||"default";var x=g.get(m);if(!x){var E={loading:0,preload:null};if(x=u.querySelector(Pr(m)))E.loading=5;else{n=b({rel:"stylesheet",href:n,"data-precedence":r},l),(l=gn.get(m))&&ad(n,l);var O=x=u.createElement("link");yt(O),Tt(O,"link",n),O._p=new Promise(function(I,Y){O.onload=I,O.onerror=Y}),O.addEventListener("load",function(){E.loading|=1}),O.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Dl(x,r,u)}x={type:"stylesheet",instance:x,count:1,state:E},g.set(m,x)}}}function Nw(n,r){ii.X(n,r);var l=ya;if(l&&n){var u=Hs(l).hoistableScripts,g=va(n),m=u.get(g);m||(m=l.querySelector(Lr(g)),m||(n=b({src:n,async:!0},r),(r=gn.get(g))&&rd(n,r),m=l.createElement("script"),yt(m),Tt(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function Pw(n,r){ii.M(n,r);var l=ya;if(l&&n){var u=Hs(l).hoistableScripts,g=va(n),m=u.get(g);m||(m=l.querySelector(Lr(g)),m||(n=b({src:n,async:!0,type:"module"},r),(r=gn.get(g))&&rd(n,r),m=l.createElement("script"),yt(m),Tt(m,"link",n),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(g,m))}}function ky(n,r,l,u){var g=(g=ge.current)?kl(g):null;if(!g)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(r=ba(l.href),l=Hs(g).hoistableStyles,u=l.get(r),u||(u={type:"style",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=ba(l.href);var m=Hs(g).hoistableStyles,x=m.get(n);if(x||(g=g.ownerDocument||g,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,x),(m=g.querySelector(Pr(n)))&&!m._p&&(x.instance=m,x.state.loading=5),gn.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},gn.set(n,l),m||Lw(g,n,l,x.state))),r&&u===null)throw Error(s(528,""));return x}if(r&&u!==null)throw Error(s(529,""));return null;case"script":return r=l.async,l=l.src,typeof l=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=va(l),l=Hs(g).hoistableScripts,u=l.get(r),u||(u={type:"script",instance:null,count:0,state:null},l.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function ba(n){return'href="'+rn(n)+'"'}function Pr(n){return'link[rel="stylesheet"]['+n+"]"}function Dy(n){return b({},n,{"data-precedence":n.precedence,precedence:null})}function Lw(n,r,l,u){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=n.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Tt(r,"link",l),yt(r),n.head.appendChild(r))}function va(n){return'[src="'+rn(n)+'"]'}function Lr(n){return"script[async]"+n}function Ny(n,r,l){if(r.count++,r.instance===null)switch(r.type){case"style":var u=n.querySelector('style[data-href~="'+rn(l.href)+'"]');if(u)return r.instance=u,yt(u),u;var g=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),yt(u),Tt(u,"style",g),Dl(u,l.precedence,n),r.instance=u;case"stylesheet":g=ba(l.href);var m=n.querySelector(Pr(g));if(m)return r.state.loading|=4,r.instance=m,yt(m),m;u=Dy(l),(g=gn.get(g))&&ad(u,g),m=(n.ownerDocument||n).createElement("link"),yt(m);var x=m;return x._p=new Promise(function(E,O){x.onload=E,x.onerror=O}),Tt(m,"link",u),r.state.loading|=4,Dl(m,l.precedence,n),r.instance=m;case"script":return m=va(l.src),(g=n.querySelector(Lr(m)))?(r.instance=g,yt(g),g):(u=l,(g=gn.get(m))&&(u=b({},l),rd(u,g)),n=n.ownerDocument||n,g=n.createElement("script"),yt(g),Tt(g,"link",u),n.head.appendChild(g),r.instance=g);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,Dl(u,l.precedence,n));return r.instance}function Dl(n,r,l){for(var u=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,m=g,x=0;x<u.length;x++){var E=u[x];if(E.dataset.precedence===r)m=E;else if(m!==g)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=l.nodeType===9?l.head:l,r.insertBefore(n,r.firstChild))}function ad(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function rd(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Nl=null;function Py(n,r,l){if(Nl===null){var u=new Map,g=Nl=new Map;g.set(l,u)}else g=Nl,u=g.get(l),u||(u=new Map,g.set(l,u));if(u.has(n))return u;for(u.set(n,null),l=l.getElementsByTagName(n),g=0;g<l.length;g++){var m=l[g];if(!(m[Ja]||m[_t]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(r)||"";x=n+x;var E=u.get(x);E?E.push(m):u.set(x,[m])}}return u}function Ly(n,r,l){n=n.ownerDocument||n,n.head.insertBefore(l,r==="title"?n.querySelector("head > title"):null)}function zw(n,r,l){if(l===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function zy(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Bw(n,r,l,u){if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=ba(u.href),m=r.querySelector(Pr(g));if(m){r=m._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(n.count++,n=Pl.bind(n),r.then(n,n)),l.state.loading|=4,l.instance=m,yt(m);return}m=r.ownerDocument||r,u=Dy(u),(g=gn.get(g))&&ad(u,g),m=m.createElement("link"),yt(m);var x=m;x._p=new Promise(function(E,O){x.onload=E,x.onerror=O}),Tt(m,"link",u),l.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,r),(r=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=Pl.bind(n),r.addEventListener("load",l),r.addEventListener("error",l))}}var od=0;function Uw(n,r){return n.stylesheets&&n.count===0&&zl(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var u=setTimeout(function(){if(n.stylesheets&&zl(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+r);0<n.imgBytes&&od===0&&(od=62500*vw());var g=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&zl(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>od?50:800)+r);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function Pl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zl(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Ll=null;function zl(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Ll=new Map,r.forEach(Hw,n),Ll=null,Pl.call(n))}function Hw(n,r){if(!(r.state.loading&4)){var l=Ll.get(n);if(l)var u=l.get(null);else{l=new Map,Ll.set(n,l);for(var g=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<g.length;m++){var x=g[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),u=x)}u&&l.set(null,u)}g=r.instance,x=g.getAttribute("data-precedence"),m=l.get(x)||u,m===u&&l.set(null,g),l.set(x,g),this.count++,u=Pl.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),m?m.parentNode.insertBefore(g,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(g,n.firstChild)),r.state.loading|=4}}var zr={$$typeof:j,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function Fw(n,r,l,u,g,m,x,E,O){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.hiddenUpdates=nu(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function By(n,r,l,u,g,m,x,E,O,I,Y,Q){return n=new Fw(n,r,l,x,O,I,Y,Q,E),r=1,m===!0&&(r|=24),m=Xt(3,null,null,r),n.current=m,m.stateNode=n,r=Hu(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:u,isDehydrated:l,cache:r},$u(m),n}function Uy(n){return n?(n=Xs,n):Xs}function Hy(n,r,l,u,g,m){g=Uy(g),u.context===null?u.context=g:u.pendingContext=g,u=wi(r),u.payload={element:l},m=m===void 0?null:m,m!==null&&(u.callback=m),l=Ti(n,u,r),l!==null&&(Ht(l,n,r),pr(l,n,r))}function Fy(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<r?l:r}}function ld(n,r){Fy(n,r),(n=n.alternate)&&Fy(n,r)}function Iy(n){if(n.tag===13||n.tag===31){var r=ns(n,67108864);r!==null&&Ht(r,n,67108864),ld(n,67108864)}}function qy(n){if(n.tag===13||n.tag===31){var r=tn();r=iu(r);var l=ns(n,r);l!==null&&Ht(l,n,r),ld(n,r)}}var Bl=!0;function Iw(n,r,l,u){var g=H.T;H.T=null;var m=ee.p;try{ee.p=2,cd(n,r,l,u)}finally{ee.p=m,H.T=g}}function qw(n,r,l,u){var g=H.T;H.T=null;var m=ee.p;try{ee.p=8,cd(n,r,l,u)}finally{ee.p=m,H.T=g}}function cd(n,r,l,u){if(Bl){var g=ud(u);if(g===null)Kh(n,r,u,Ul,l),Vy(n,u);else if(Vw(g,n,r,l,u))u.stopPropagation();else if(Vy(n,u),r&4&&-1<$w.indexOf(n)){for(;g!==null;){var m=Us(g);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Qi(m.pendingLanes);if(x!==0){var E=m;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var O=1<<31-Yt(x);E.entanglements[1]|=O,x&=~O}Nn(m),(Pe&6)===0&&(xl=kt()+500,Mr(0))}}break;case 31:case 13:E=ns(m,2),E!==null&&Ht(E,m,2),wl(),ld(m,2)}if(m=ud(u),m===null&&Kh(n,r,u,Ul,l),m===g)break;g=m}g!==null&&u.stopPropagation()}else Kh(n,r,u,null,l)}}function ud(n){return n=du(n),hd(n)}var Ul=null;function hd(n){if(Ul=null,n=Bs(n),n!==null){var r=o(n);if(r===null)n=null;else{var l=r.tag;if(l===13){if(n=c(r),n!==null)return n;n=null}else if(l===31){if(n=h(r),n!==null)return n;n=null}else if(l===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Ul=n,null}function $y(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(J()){case oe:return 2;case xe:return 8;case Gt:case Xi:return 32;case Ls:return 268435456;default:return 32}default:return 32}}var dd=!1,Pi=null,Li=null,zi=null,Br=new Map,Ur=new Map,Bi=[],$w="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vy(n,r){switch(n){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Li=null;break;case"mouseover":case"mouseout":zi=null;break;case"pointerover":case"pointerout":Br.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ur.delete(r.pointerId)}}function Hr(n,r,l,u,g,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:l,eventSystemFlags:u,nativeEvent:m,targetContainers:[g]},r!==null&&(r=Us(r),r!==null&&Iy(r)),n):(n.eventSystemFlags|=u,r=n.targetContainers,g!==null&&r.indexOf(g)===-1&&r.push(g),n)}function Vw(n,r,l,u,g){switch(r){case"focusin":return Pi=Hr(Pi,n,r,l,u,g),!0;case"dragenter":return Li=Hr(Li,n,r,l,u,g),!0;case"mouseover":return zi=Hr(zi,n,r,l,u,g),!0;case"pointerover":var m=g.pointerId;return Br.set(m,Hr(Br.get(m)||null,n,r,l,u,g)),!0;case"gotpointercapture":return m=g.pointerId,Ur.set(m,Hr(Ur.get(m)||null,n,r,l,u,g)),!0}return!1}function Gy(n){var r=Bs(n.target);if(r!==null){var l=o(r);if(l!==null){if(r=l.tag,r===13){if(r=c(l),r!==null){n.blockedOn=r,rg(n.priority,function(){qy(l)});return}}else if(r===31){if(r=h(l),r!==null){n.blockedOn=r,rg(n.priority,function(){qy(l)});return}}else if(r===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Hl(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var l=ud(n.nativeEvent);if(l===null){l=n.nativeEvent;var u=new l.constructor(l.type,l);hu=u,l.target.dispatchEvent(u),hu=null}else return r=Us(l),r!==null&&Iy(r),n.blockedOn=l,!1;r.shift()}return!0}function Wy(n,r,l){Hl(n)&&l.delete(r)}function Gw(){dd=!1,Pi!==null&&Hl(Pi)&&(Pi=null),Li!==null&&Hl(Li)&&(Li=null),zi!==null&&Hl(zi)&&(zi=null),Br.forEach(Wy),Ur.forEach(Wy)}function Fl(n,r){n.blockedOn===r&&(n.blockedOn=null,dd||(dd=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Gw)))}var Il=null;function Yy(n){Il!==n&&(Il=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Il===n&&(Il=null);for(var r=0;r<n.length;r+=3){var l=n[r],u=n[r+1],g=n[r+2];if(typeof u!="function"){if(hd(u||l)===null)continue;break}var m=Us(l);m!==null&&(n.splice(r,3),r-=3,uh(m,{pending:!0,data:g,method:l.method,action:u},u,g))}}))}function _a(n){function r(O){return Fl(O,n)}Pi!==null&&Fl(Pi,n),Li!==null&&Fl(Li,n),zi!==null&&Fl(zi,n),Br.forEach(r),Ur.forEach(r);for(var l=0;l<Bi.length;l++){var u=Bi[l];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Bi.length&&(l=Bi[0],l.blockedOn===null);)Gy(l),l.blockedOn===null&&Bi.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(u=0;u<l.length;u+=3){var g=l[u],m=l[u+1],x=g[Nt]||null;if(typeof m=="function")x||Yy(l);else if(x){var E=null;if(m&&m.hasAttribute("formAction")){if(g=m,x=m[Nt]||null)E=x.formAction;else if(hd(g)!==null)continue}else E=x.action;typeof E=="function"?l[u+1]=E:(l.splice(u,3),u-=3),Yy(l)}}}function Ky(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return g=x})},focusReset:"manual",scroll:"manual"})}function r(){g!==null&&(g(),g=null),u||setTimeout(l,20)}function l(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(l,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),g!==null&&(g(),g=null)}}}function fd(n){this._internalRoot=n}ql.prototype.render=fd.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var l=r.current,u=tn();Hy(l,u,n,r,null,null)},ql.prototype.unmount=fd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Hy(n.current,2,null,n,null,null),wl(),r[zs]=null}};function ql(n){this._internalRoot=n}ql.prototype.unstable_scheduleHydration=function(n){if(n){var r=ag();n={blockedOn:null,target:n,priority:r};for(var l=0;l<Bi.length&&r!==0&&r<Bi[l].priority;l++);Bi.splice(l,0,n),l===0&&Gy(n)}};var Xy=e.version;if(Xy!=="19.2.0")throw Error(s(527,Xy,"19.2.0"));ee.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=f(r),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var Ww={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{Ka=$l.inject(Ww),Wt=$l}catch{}}return Ir.createRoot=function(n,r){if(!a(n))throw Error(s(299));var l=!1,u="",g=im,m=sm,x=am;return r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(x=r.onRecoverableError)),r=By(n,1,!1,null,null,l,u,null,g,m,x,Ky),n[zs]=r.current,Yh(n),new fd(r)},Ir.hydrateRoot=function(n,r,l){if(!a(n))throw Error(s(299));var u=!1,g="",m=im,x=sm,E=am,O=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(E=l.onRecoverableError),l.formState!==void 0&&(O=l.formState)),r=By(n,1,!0,r,l??null,u,g,O,m,x,E,Ky),r.context=Uy(null),l=r.current,u=tn(),u=iu(u),g=wi(u),g.callback=null,Ti(l,g,u),l=u,r.current.lanes=l,Qa(r,l),Nn(r),n[zs]=r.current,Yh(n),new ql(r)},Ir.version="19.2.0",Ir}var rb;function s1(){if(rb)return md.exports;rb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),md.exports=i1(),md.exports}var a1=s1();const r1=yf(a1);var ob="popstate";function o1(i={}){function e(s,a){let{pathname:o,search:c,hash:h}=s.location;return qd("",{pathname:o,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){return typeof a=="string"?a:co(a)}return c1(e,t,null,i)}function Ze(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function sn(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function l1(){return Math.random().toString(36).substring(2,10)}function lb(i,e){return{usr:i.state,key:i.key,idx:e}}function qd(i,e,t=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Ha(e):e,state:t,key:e&&e.key||s||l1()}}function co({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function Ha(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function c1(i,e,t,s={}){let{window:a=document.defaultView,v5Compat:o=!1}=s,c=a.history,h="POP",d=null,f=y();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function y(){return(c.state||{idx:null}).idx}function b(){h="POP";let T=y(),C=T==null?null:T-f;f=T,d&&d({action:h,location:w.location,delta:C})}function v(T,C){h="PUSH";let A=qd(w.location,T,C);f=y()+1;let j=lb(A,f),D=w.createHref(A);try{c.pushState(j,"",D)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(D)}o&&d&&d({action:h,location:w.location,delta:1})}function _(T,C){h="REPLACE";let A=qd(w.location,T,C);f=y();let j=lb(A,f),D=w.createHref(A);c.replaceState(j,"",D),o&&d&&d({action:h,location:w.location,delta:0})}function S(T){return u1(T)}let w={get action(){return h},get location(){return i(a,c)},listen(T){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(ob,b),d=T,()=>{a.removeEventListener(ob,b),d=null}},createHref(T){return e(a,T)},createURL:S,encodeLocation(T){let C=S(T);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:v,replace:_,go(T){return c.go(T)}};return w}function u1(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ze(t,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:co(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function l0(i,e,t="/"){return h1(i,e,t,!1)}function h1(i,e,t,s){let a=typeof e=="string"?Ha(e):e,o=di(a.pathname||"/",t);if(o==null)return null;let c=c0(i);d1(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let f=w1(o);h=x1(c[d],f,s)}return h}function c0(i,e=[],t=[],s="",a=!1){let o=(c,h,d=a,f)=>{let y={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(s)&&d)return;Ze(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length)}let b=hi([s,y.relativePath]),v=t.concat(y);c.children&&c.children.length>0&&(Ze(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),c0(c.children,e,v,b,d)),!(c.path==null&&!c.index)&&e.push({path:b,score:v1(b,c.index),routesMeta:v})};return i.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))o(c,h);else for(let d of u0(c.path))o(c,h,!0,d)}),e}function u0(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(s.length===0)return a?[o,""]:[o];let c=u0(s.join("/")),h=[];return h.push(...c.map(d=>d===""?o:[o,d].join("/"))),a&&h.push(...c),h.map(d=>i.startsWith("/")&&d===""?"/":d)}function d1(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:_1(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var f1=/^:[\w-]+$/,g1=3,p1=2,m1=1,y1=10,b1=-2,cb=i=>i==="*";function v1(i,e){let t=i.split("/"),s=t.length;return t.some(cb)&&(s+=b1),e&&(s+=p1),t.filter(a=>!cb(a)).reduce((a,o)=>a+(f1.test(o)?g1:o===""?m1:y1),s)}function _1(i,e){return i.length===e.length&&i.slice(0,-1).every((s,a)=>s===e[a])?i[i.length-1]-e[e.length-1]:0}function x1(i,e,t=!1){let{routesMeta:s}=i,a={},o="/",c=[];for(let h=0;h<s.length;++h){let d=s[h],f=h===s.length-1,y=o==="/"?e:e.slice(o.length)||"/",b=wc({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},y),v=d.route;if(!b&&f&&t&&!s[s.length-1].route.index&&(b=wc({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!b)return null;Object.assign(a,b.params),c.push({params:a,pathname:hi([o,b.pathname]),pathnameBase:A1(hi([o,b.pathnameBase])),route:v}),b.pathnameBase!=="/"&&(o=hi([o,b.pathnameBase]))}return c}function wc(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=S1(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:s.reduce((f,{paramName:y,isOptional:b},v)=>{if(y==="*"){let S=h[v]||"";c=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const _=h[v];return b&&!_?f[y]=void 0:f[y]=(_||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:i}}function S1(i,e=!1,t=!0){sn(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(s.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),s]}function w1(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return sn(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function di(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}var T1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,E1=i=>T1.test(i);function C1(i,e="/"){let{pathname:t,search:s="",hash:a=""}=typeof i=="string"?Ha(i):i,o;if(t)if(E1(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),sn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=ub(t.substring(1),"/"):o=ub(t,e)}else o=e;return{pathname:o,search:O1(s),hash:R1(a)}}function ub(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function _d(i,e,t,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function j1(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function vf(i){let e=j1(i);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function _f(i,e,t,s=!1){let a;typeof i=="string"?a=Ha(i):(a={...i},Ze(!a.pathname||!a.pathname.includes("?"),_d("?","pathname","search",a)),Ze(!a.pathname||!a.pathname.includes("#"),_d("#","pathname","hash",a)),Ze(!a.search||!a.search.includes("#"),_d("#","search","hash",a)));let o=i===""||a.pathname==="",c=o?"/":a.pathname,h;if(c==null)h=t;else{let b=e.length-1;if(!s&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),b-=1;a.pathname=v.join("/")}h=b>=0?e[b]:"/"}let d=C1(a,h),f=c&&c!=="/"&&c.endsWith("/"),y=(o||c===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(f||y)&&(d.pathname+="/"),d}var hi=i=>i.join("/").replace(/\/\/+/g,"/"),A1=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),O1=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,R1=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function M1(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var h0=["POST","PUT","PATCH","DELETE"];new Set(h0);var k1=["GET",...h0];new Set(k1);var Fa=k.createContext(null);Fa.displayName="DataRouter";var Ic=k.createContext(null);Ic.displayName="DataRouterState";k.createContext(!1);var d0=k.createContext({isTransitioning:!1});d0.displayName="ViewTransition";var D1=k.createContext(new Map);D1.displayName="Fetchers";var N1=k.createContext(null);N1.displayName="Await";var Cn=k.createContext(null);Cn.displayName="Navigation";var So=k.createContext(null);So.displayName="Location";var jn=k.createContext({outlet:null,matches:[],isDataRoute:!1});jn.displayName="Route";var xf=k.createContext(null);xf.displayName="RouteError";function P1(i,{relative:e}={}){Ze(Ia(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=k.useContext(Cn),{hash:a,pathname:o,search:c}=wo(i,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:hi([t,o])),s.createHref({pathname:h,search:c,hash:a})}function Ia(){return k.useContext(So)!=null}function An(){return Ze(Ia(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(So).location}var f0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function g0(i){k.useContext(Cn).static||k.useLayoutEffect(i)}function qc(){let{isDataRoute:i}=k.useContext(jn);return i?K1():L1()}function L1(){Ze(Ia(),"useNavigate() may be used only in the context of a <Router> component.");let i=k.useContext(Fa),{basename:e,navigator:t}=k.useContext(Cn),{matches:s}=k.useContext(jn),{pathname:a}=An(),o=JSON.stringify(vf(s)),c=k.useRef(!1);return g0(()=>{c.current=!0}),k.useCallback((d,f={})=>{if(sn(c.current,f0),!c.current)return;if(typeof d=="number"){t.go(d);return}let y=_f(d,JSON.parse(o),a,f.relative==="path");i==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:hi([e,y.pathname])),(f.replace?t.replace:t.push)(y,f.state,f)},[e,t,o,a,i])}k.createContext(null);function z1(){let{matches:i}=k.useContext(jn),e=i[i.length-1];return e?e.params:{}}function wo(i,{relative:e}={}){let{matches:t}=k.useContext(jn),{pathname:s}=An(),a=JSON.stringify(vf(t));return k.useMemo(()=>_f(i,JSON.parse(a),s,e==="path"),[i,a,s,e])}function B1(i,e){return p0(i,e)}function p0(i,e,t,s,a){Ze(Ia(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=k.useContext(Cn),{matches:c}=k.useContext(jn),h=c[c.length-1],d=h?h.params:{},f=h?h.pathname:"/",y=h?h.pathnameBase:"/",b=h&&h.route;{let A=b&&b.path||"";m0(f,!b||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let v=An(),_;if(e){let A=typeof e=="string"?Ha(e):e;Ze(y==="/"||A.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${A.pathname}" was given in the \`location\` prop.`),_=A}else _=v;let S=_.pathname||"/",w=S;if(y!=="/"){let A=y.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(A.length).join("/")}let T=l0(i,{pathname:w});sn(b||T!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),sn(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=q1(T&&T.map(A=>Object.assign({},A,{params:Object.assign({},d,A.params),pathname:hi([y,o.encodeLocation?o.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?y:hi([y,o.encodeLocation?o.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),c,t,s,a);return e&&C?k.createElement(So.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},C):C}function U1(){let i=Y1(),e=M1(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:o},"ErrorBoundary")," or"," ",k.createElement("code",{style:o},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:a},t):null,c)}var H1=k.createElement(U1,null),F1=class extends k.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?k.createElement(jn.Provider,{value:this.props.routeContext},k.createElement(xf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function I1({routeContext:i,match:e,children:t}){let s=k.useContext(Fa);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(jn.Provider,{value:i},t)}function q1(i,e=[],t=null,s=null,a=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let o=i,c=t?.errors;if(c!=null){let y=o.findIndex(b=>b.route.id&&c?.[b.route.id]!==void 0);Ze(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let h=!1,d=-1;if(t)for(let y=0;y<o.length;y++){let b=o[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(d=y),b.route.id){let{loaderData:v,errors:_}=t,S=b.route.loader&&!v.hasOwnProperty(b.route.id)&&(!_||_[b.route.id]===void 0);if(b.route.lazy||S){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}let f=t&&s?(y,b)=>{s(y,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:b})}:void 0;return o.reduceRight((y,b,v)=>{let _,S=!1,w=null,T=null;t&&(_=c&&b.route.id?c[b.route.id]:void 0,w=b.route.errorElement||H1,h&&(d<0&&v===0?(m0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,T=null):d===v&&(S=!0,T=b.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,v+1)),A=()=>{let j;return _?j=w:S?j=T:b.route.Component?j=k.createElement(b.route.Component,null):b.route.element?j=b.route.element:j=y,k.createElement(I1,{match:b,routeContext:{outlet:y,matches:C,isDataRoute:t!=null},children:j})};return t&&(b.route.ErrorBoundary||b.route.errorElement||v===0)?k.createElement(F1,{location:t.location,revalidation:t.revalidation,component:w,error:_,children:A(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:f}):A()},null)}function Sf(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $1(i){let e=k.useContext(Fa);return Ze(e,Sf(i)),e}function V1(i){let e=k.useContext(Ic);return Ze(e,Sf(i)),e}function G1(i){let e=k.useContext(jn);return Ze(e,Sf(i)),e}function wf(i){let e=G1(i),t=e.matches[e.matches.length-1];return Ze(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function W1(){return wf("useRouteId")}function Y1(){let i=k.useContext(xf),e=V1("useRouteError"),t=wf("useRouteError");return i!==void 0?i:e.errors?.[t]}function K1(){let{router:i}=$1("useNavigate"),e=wf("useNavigate"),t=k.useRef(!1);return g0(()=>{t.current=!0}),k.useCallback(async(a,o={})=>{sn(t.current,f0),t.current&&(typeof a=="number"?i.navigate(a):await i.navigate(a,{fromRouteId:e,...o}))},[i,e])}var hb={};function m0(i,e,t){!e&&!hb[i]&&(hb[i]=!0,sn(!1,t))}k.memo(X1);function X1({routes:i,future:e,state:t,unstable_onError:s}){return p0(i,void 0,t,s,e)}function y0({to:i,replace:e,state:t,relative:s}){Ze(Ia(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=k.useContext(Cn);sn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=k.useContext(jn),{pathname:c}=An(),h=qc(),d=_f(i,vf(o),c,s==="path"),f=JSON.stringify(d);return k.useEffect(()=>{h(JSON.parse(f),{replace:e,state:t,relative:s})},[h,f,s,e,t]),null}function Aa(i){Ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Q1({basename:i="/",children:e=null,location:t,navigationType:s="POP",navigator:a,static:o=!1}){Ze(!Ia(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof t=="string"&&(t=Ha(t));let{pathname:d="/",search:f="",hash:y="",state:b=null,key:v="default"}=t,_=k.useMemo(()=>{let S=di(d,c);return S==null?null:{location:{pathname:S,search:f,hash:y,state:b,key:v},navigationType:s}},[c,d,f,y,b,v,s]);return sn(_!=null,`<Router basename="${c}"> is not able to match the URL "${d}${f}${y}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:k.createElement(Cn.Provider,{value:h},k.createElement(So.Provider,{children:e,value:_}))}function J1({children:i,location:e}){return B1($d(i),e)}function $d(i,e=[]){let t=[];return k.Children.forEach(i,(s,a)=>{if(!k.isValidElement(s))return;let o=[...e,a];if(s.type===k.Fragment){t.push.apply(t,$d(s.props.children,o));return}Ze(s.type===Aa,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ze(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=$d(s.props.children,o)),t.push(c)}),t}var pc="get",mc="application/x-www-form-urlencoded";function $c(i){return i!=null&&typeof i.tagName=="string"}function Z1(i){return $c(i)&&i.tagName.toLowerCase()==="button"}function eT(i){return $c(i)&&i.tagName.toLowerCase()==="form"}function tT(i){return $c(i)&&i.tagName.toLowerCase()==="input"}function nT(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function iT(i,e){return i.button===0&&(!e||e==="_self")&&!nT(i)}function Vd(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,t)=>{let s=i[t];return e.concat(Array.isArray(s)?s.map(a=>[t,a]):[[t,s]])},[]))}function sT(i,e){let t=Vd(i);return e&&e.forEach((s,a)=>{t.has(a)||e.getAll(a).forEach(o=>{t.append(a,o)})}),t}var Vl=null;function aT(){if(Vl===null)try{new FormData(document.createElement("form"),0),Vl=!1}catch{Vl=!0}return Vl}var rT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xd(i){return i!=null&&!rT.has(i)?(sn(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mc}"`),null):i}function oT(i,e){let t,s,a,o,c;if(eT(i)){let h=i.getAttribute("action");s=h?di(h,e):null,t=i.getAttribute("method")||pc,a=xd(i.getAttribute("enctype"))||mc,o=new FormData(i)}else if(Z1(i)||tT(i)&&(i.type==="submit"||i.type==="image")){let h=i.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=i.getAttribute("formaction")||h.getAttribute("action");if(s=d?di(d,e):null,t=i.getAttribute("formmethod")||h.getAttribute("method")||pc,a=xd(i.getAttribute("formenctype"))||xd(h.getAttribute("enctype"))||mc,o=new FormData(h,i),!aT()){let{name:f,type:y,value:b}=i;if(y==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,b)}}else{if($c(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=pc,s=null,a=mc,c=i}return o&&a==="text/plain"&&(c=o,o=void 0),{action:s,method:t.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Tf(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function lT(i,e,t){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&di(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function cT(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uT(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function hT(i,e,t){let s=await Promise.all(i.map(async a=>{let o=e.routes[a.route.id];if(o){let c=await cT(o,t);return c.links?c.links():[]}return[]}));return pT(s.flat(1).filter(uT).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function db(i,e,t,s,a,o){let c=(d,f)=>t[f]?d.route.id!==t[f].route.id:!0,h=(d,f)=>t[f].pathname!==d.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==d.params["*"];return o==="assets"?e.filter((d,f)=>c(d,f)||h(d,f)):o==="data"?e.filter((d,f)=>{let y=s.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(c(d,f)||h(d,f))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function dT(i,e,{includeHydrateFallback:t}={}){return fT(i.map(s=>{let a=e.routes[s.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function fT(i){return[...new Set(i)]}function gT(i){let e={},t=Object.keys(i).sort();for(let s of t)e[s]=i[s];return e}function pT(i,e){let t=new Set;return new Set(e),i.reduce((s,a)=>{let o=JSON.stringify(gT(a));return t.has(o)||(t.add(o),s.push({key:o,link:a})),s},[])}function b0(){let i=k.useContext(Fa);return Tf(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function mT(){let i=k.useContext(Ic);return Tf(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var Ef=k.createContext(void 0);Ef.displayName="FrameworkContext";function v0(){let i=k.useContext(Ef);return Tf(i,"You must render this element inside a <HydratedRouter> element"),i}function yT(i,e){let t=k.useContext(Ef),[s,a]=k.useState(!1),[o,c]=k.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:f,onMouseLeave:y,onTouchStart:b}=e,v=k.useRef(null);k.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let w=C=>{C.forEach(A=>{c(A.isIntersecting)})},T=new IntersectionObserver(w,{threshold:.5});return v.current&&T.observe(v.current),()=>{T.disconnect()}}},[i]),k.useEffect(()=>{if(s){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[s]);let _=()=>{a(!0)},S=()=>{a(!1),c(!1)};return t?i!=="intent"?[o,v,{}]:[o,v,{onFocus:qr(h,_),onBlur:qr(d,S),onMouseEnter:qr(f,_),onMouseLeave:qr(y,S),onTouchStart:qr(b,_)}]:[!1,v,{}]}function qr(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function bT({page:i,...e}){let{router:t}=b0(),s=k.useMemo(()=>l0(t.routes,i,t.basename),[t.routes,i,t.basename]);return s?k.createElement(_T,{page:i,matches:s,...e}):null}function vT(i){let{manifest:e,routeModules:t}=v0(),[s,a]=k.useState([]);return k.useEffect(()=>{let o=!1;return hT(i,e,t).then(c=>{o||a(c)}),()=>{o=!0}},[i,e,t]),s}function _T({page:i,matches:e,...t}){let s=An(),{manifest:a,routeModules:o}=v0(),{basename:c}=b0(),{loaderData:h,matches:d}=mT(),f=k.useMemo(()=>db(i,e,d,a,s,"data"),[i,e,d,a,s]),y=k.useMemo(()=>db(i,e,d,a,s,"assets"),[i,e,d,a,s]),b=k.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let S=new Set,w=!1;if(e.forEach(C=>{let A=a.routes[C.route.id];!A||!A.hasLoader||(!f.some(j=>j.route.id===C.route.id)&&C.route.id in h&&o[C.route.id]?.shouldRevalidate||A.hasClientLoader?w=!0:S.add(C.route.id))}),S.size===0)return[];let T=lT(i,c,"data");return w&&S.size>0&&T.searchParams.set("_routes",e.filter(C=>S.has(C.route.id)).map(C=>C.route.id).join(",")),[T.pathname+T.search]},[c,h,s,a,f,e,i,o]),v=k.useMemo(()=>dT(y,a),[y,a]),_=vT(y);return k.createElement(k.Fragment,null,b.map(S=>k.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),v.map(S=>k.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),_.map(({key:S,link:w})=>k.createElement("link",{key:S,nonce:t.nonce,...w})))}function xT(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var _0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_0&&(window.__reactRouterVersion="7.9.6")}catch{}function ST({basename:i,children:e,window:t}){let s=k.useRef();s.current==null&&(s.current=o1({window:t,v5Compat:!0}));let a=s.current,[o,c]=k.useState({action:a.action,location:a.location}),h=k.useCallback(d=>{k.startTransition(()=>c(d))},[c]);return k.useLayoutEffect(()=>a.listen(h),[a,h]),k.createElement(Q1,{basename:i,children:e,location:o.location,navigationType:o.action,navigator:a})}var x0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,so=k.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:a,reloadDocument:o,replace:c,state:h,target:d,to:f,preventScrollReset:y,viewTransition:b,...v},_){let{basename:S}=k.useContext(Cn),w=typeof f=="string"&&x0.test(f),T,C=!1;if(typeof f=="string"&&w&&(T=f,_0))try{let L=new URL(window.location.href),Z=f.startsWith("//")?new URL(L.protocol+f):new URL(f),W=di(Z.pathname,S);Z.origin===L.origin&&W!=null?f=W+Z.search+Z.hash:C=!0}catch{sn(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=P1(f,{relative:a}),[j,D,N]=yT(s,v),q=CT(f,{replace:c,state:h,target:d,preventScrollReset:y,relative:a,viewTransition:b});function P(L){e&&e(L),L.defaultPrevented||q(L)}let U=k.createElement("a",{...v,...N,href:T||A,onClick:C||o?e:P,ref:xT(_,D),target:d,"data-discover":!w&&t==="render"?"true":void 0});return j&&!w?k.createElement(k.Fragment,null,U,k.createElement(bT,{page:A})):U});so.displayName="Link";var wT=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:a=!1,style:o,to:c,viewTransition:h,children:d,...f},y){let b=wo(c,{relative:f.relative}),v=An(),_=k.useContext(Ic),{navigator:S,basename:w}=k.useContext(Cn),T=_!=null&&kT(b)&&h===!0,C=S.encodeLocation?S.encodeLocation(b).pathname:b.pathname,A=v.pathname,j=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;t||(A=A.toLowerCase(),j=j?j.toLowerCase():null,C=C.toLowerCase()),j&&w&&(j=di(j,w)||j);const D=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let N=A===C||!a&&A.startsWith(C)&&A.charAt(D)==="/",q=j!=null&&(j===C||!a&&j.startsWith(C)&&j.charAt(C.length)==="/"),P={isActive:N,isPending:q,isTransitioning:T},U=N?e:void 0,L;typeof s=="function"?L=s(P):L=[s,N?"active":null,q?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let Z=typeof o=="function"?o(P):o;return k.createElement(so,{...f,"aria-current":U,className:L,ref:y,style:Z,to:c,viewTransition:h},typeof d=="function"?d(P):d)});wT.displayName="NavLink";var TT=k.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:a,state:o,method:c=pc,action:h,onSubmit:d,relative:f,preventScrollReset:y,viewTransition:b,...v},_)=>{let S=RT(),w=MT(h,{relative:f}),T=c.toLowerCase()==="get"?"get":"post",C=typeof h=="string"&&x0.test(h),A=j=>{if(d&&d(j),j.defaultPrevented)return;j.preventDefault();let D=j.nativeEvent.submitter,N=D?.getAttribute("formmethod")||c;S(D||j.currentTarget,{fetcherKey:e,method:N,navigate:t,replace:a,state:o,relative:f,preventScrollReset:y,viewTransition:b})};return k.createElement("form",{ref:_,method:T,action:w,onSubmit:s?d:A,...v,"data-discover":!C&&i==="render"?"true":void 0})});TT.displayName="Form";function ET(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function S0(i){let e=k.useContext(Fa);return Ze(e,ET(i)),e}function CT(i,{target:e,replace:t,state:s,preventScrollReset:a,relative:o,viewTransition:c}={}){let h=qc(),d=An(),f=wo(i,{relative:o});return k.useCallback(y=>{if(iT(y,e)){y.preventDefault();let b=t!==void 0?t:co(d)===co(f);h(i,{replace:b,state:s,preventScrollReset:a,relative:o,viewTransition:c})}},[d,h,f,t,s,e,i,a,o,c])}function jT(i){sn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=k.useRef(Vd(i)),t=k.useRef(!1),s=An(),a=k.useMemo(()=>sT(s.search,t.current?null:e.current),[s.search]),o=qc(),c=k.useCallback((h,d)=>{const f=Vd(typeof h=="function"?h(new URLSearchParams(a)):h);t.current=!0,o("?"+f,d)},[o,a]);return[a,c]}var AT=0,OT=()=>`__${String(++AT)}__`;function RT(){let{router:i}=S0("useSubmit"),{basename:e}=k.useContext(Cn),t=W1();return k.useCallback(async(s,a={})=>{let{action:o,method:c,encType:h,formData:d,body:f}=oT(s,e);if(a.navigate===!1){let y=a.fetcherKey||OT();await i.fetch(y,t,a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||h,flushSync:a.flushSync})}else await i.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:d,body:f,formMethod:a.method||c,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,e,t])}function MT(i,{relative:e}={}){let{basename:t}=k.useContext(Cn),s=k.useContext(jn);Ze(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),o={...wo(i||".",{relative:e})},c=An();if(i==null){o.search=c.search;let h=new URLSearchParams(o.search),d=h.getAll("index");if(d.some(y=>y==="")){h.delete("index"),d.filter(b=>b).forEach(b=>h.append("index",b));let y=h.toString();o.search=y?`?${y}`:""}}return(!i||i===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:hi([t,o.pathname])),co(o)}function kT(i,{relative:e}={}){let t=k.useContext(d0);Ze(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=S0("useViewTransitionState"),a=wo(i,{relative:e});if(!t.isTransitioning)return!1;let o=di(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=di(t.nextLocation.pathname,s)||t.nextLocation.pathname;return wc(a.pathname,c)!=null||wc(a.pathname,o)!=null}var si={},Gl={},Gd=function(i,e){return Gd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,s){t.__proto__=s}||function(t,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])},Gd(i,e)};function w0(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Gd(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Tc=function(){return Tc=Object.assign||function(e){for(var t,s=1,a=arguments.length;s<a;s++){t=arguments[s];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Tc.apply(this,arguments)};function qa(i,e){var t={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(t[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(i);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(i,s[a])&&(t[s[a]]=i[s[a]]);return t}function T0(i,e,t,s){var a=arguments.length,o=a<3?e:s===null?s=Object.getOwnPropertyDescriptor(e,t):s,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(i,e,t,s);else for(var h=i.length-1;h>=0;h--)(c=i[h])&&(o=(a<3?c(o):a>3?c(e,t,o):c(e,t))||o);return a>3&&o&&Object.defineProperty(e,t,o),o}function E0(i,e){return function(t,s){e(t,s,i)}}function C0(i,e,t,s,a,o){function c(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var h=s.kind,d=h==="getter"?"get":h==="setter"?"set":"value",f=!e&&i?s.static?i:i.prototype:null,y=e||(f?Object.getOwnPropertyDescriptor(f,s.name):{}),b,v=!1,_=t.length-1;_>=0;_--){var S={};for(var w in s)S[w]=w==="access"?{}:s[w];for(var w in s.access)S.access[w]=s.access[w];S.addInitializer=function(C){if(v)throw new TypeError("Cannot add initializers after decoration has completed");o.push(c(C||null))};var T=(0,t[_])(h==="accessor"?{get:y.get,set:y.set}:y[d],S);if(h==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(b=c(T.get))&&(y.get=b),(b=c(T.set))&&(y.set=b),(b=c(T.init))&&a.unshift(b)}else(b=c(T))&&(h==="field"?a.unshift(b):y[d]=b)}f&&Object.defineProperty(f,s.name,y),v=!0}function j0(i,e,t){for(var s=arguments.length>2,a=0;a<e.length;a++)t=s?e[a].call(i,t):e[a].call(i);return s?t:void 0}function A0(i){return typeof i=="symbol"?i:"".concat(i)}function O0(i,e,t){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:t?"".concat(t," ",e):e})}function R0(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function le(i,e,t,s){function a(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function h(y){try{f(s.next(y))}catch(b){c(b)}}function d(y){try{f(s.throw(y))}catch(b){c(b)}}function f(y){y.done?o(y.value):a(y.value).then(h,d)}f((s=s.apply(i,e||[])).next())})}function M0(i,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},s,a,o,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=h(0),c.throw=h(1),c.return=h(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(f){return function(y){return d([f,y])}}function d(f){if(s)throw new TypeError("Generator is already executing.");for(;c&&(c=0,f[0]&&(t=0)),t;)try{if(s=1,a&&(o=f[0]&2?a.return:f[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,f[1])).done)return o;switch(a=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,a=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){t.label=f[1];break}if(f[0]===6&&t.label<o[1]){t.label=o[1],o=f;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(f);break}o[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(i,t)}catch(y){f=[6,y],a=0}finally{s=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var Vc=Object.create?(function(i,e,t,s){s===void 0&&(s=t);var a=Object.getOwnPropertyDescriptor(e,t);(!a||("get"in a?!e.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(i,s,a)}):(function(i,e,t,s){s===void 0&&(s=t),i[s]=e[t]});function k0(i,e){for(var t in i)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Vc(e,i,t)}function Ec(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],s=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&s>=i.length&&(i=void 0),{value:i&&i[s++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cf(i,e){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var s=t.call(i),a,o=[],c;try{for(;(e===void 0||e-- >0)&&!(a=s.next()).done;)o.push(a.value)}catch(h){c={error:h}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(c)throw c.error}}return o}function D0(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Cf(arguments[e]));return i}function N0(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var s=Array(i),a=0,e=0;e<t;e++)for(var o=arguments[e],c=0,h=o.length;c<h;c++,a++)s[a]=o[c];return s}function P0(i,e,t){if(t||arguments.length===2)for(var s=0,a=e.length,o;s<a;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return i.concat(o||Array.prototype.slice.call(e))}function La(i){return this instanceof La?(this.v=i,this):new La(i)}function L0(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(i,e||[]),a,o=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(_){return function(S){return Promise.resolve(S).then(_,b)}}function h(_,S){s[_]&&(a[_]=function(w){return new Promise(function(T,C){o.push([_,w,T,C])>1||d(_,w)})},S&&(a[_]=S(a[_])))}function d(_,S){try{f(s[_](S))}catch(w){v(o[0][3],w)}}function f(_){_.value instanceof La?Promise.resolve(_.value.v).then(y,b):v(o[0][2],_)}function y(_){d("next",_)}function b(_){d("throw",_)}function v(_,S){_(S),o.shift(),o.length&&d(o[0][0],o[0][1])}}function z0(i){var e,t;return e={},s("next"),s("throw",function(a){throw a}),s("return"),e[Symbol.iterator]=function(){return this},e;function s(a,o){e[a]=i[a]?function(c){return(t=!t)?{value:La(i[a](c)),done:!1}:o?o(c):c}:o}}function B0(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof Ec=="function"?Ec(i):i[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(o){t[o]=i[o]&&function(c){return new Promise(function(h,d){c=i[o](c),a(h,d,c.done,c.value)})}}function a(o,c,h,d){Promise.resolve(d).then(function(f){o({value:f,done:h})},c)}}function U0(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}var DT=Object.create?(function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}):function(i,e){i.default=e},Wd=function(i){return Wd=Object.getOwnPropertyNames||function(e){var t=[];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[t.length]=s);return t},Wd(i)};function H0(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t=Wd(i),s=0;s<t.length;s++)t[s]!=="default"&&Vc(e,i,t[s]);return DT(e,i),e}function F0(i){return i&&i.__esModule?i:{default:i}}function I0(i,e,t,s){if(t==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!s:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?s:t==="a"?s.call(i):s?s.value:e.get(i)}function q0(i,e,t,s,a){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!a:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?a.call(i,t):a?a.value=t:e.set(i,t),t}function $0(i,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?e===i:i.has(e)}function V0(i,e,t){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var s,a;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(s===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],t&&(a=s)}if(typeof s!="function")throw new TypeError("Object not disposable.");a&&(s=function(){try{a.call(this)}catch(o){return Promise.reject(o)}}),i.stack.push({value:e,dispose:s,async:t})}else t&&i.stack.push({async:!0});return e}var NT=typeof SuppressedError=="function"?SuppressedError:function(i,e,t){var s=new Error(t);return s.name="SuppressedError",s.error=i,s.suppressed=e,s};function G0(i){function e(o){i.error=i.hasError?new NT(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}var t,s=0;function a(){for(;t=i.stack.pop();)try{if(!t.async&&s===1)return s=0,i.stack.push(t),Promise.resolve().then(a);if(t.dispose){var o=t.dispose.call(t.value);if(t.async)return s|=2,Promise.resolve(o).then(a,function(c){return e(c),a()})}else s|=1}catch(c){e(c)}if(s===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}function W0(i,e){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(t,s,a,o,c){return s?e?".jsx":".js":a&&(!o||!c)?t:a+o+"."+c.toLowerCase()+"js"}):i}const PT={__extends:w0,__assign:Tc,__rest:qa,__decorate:T0,__param:E0,__esDecorate:C0,__runInitializers:j0,__propKey:A0,__setFunctionName:O0,__metadata:R0,__awaiter:le,__generator:M0,__createBinding:Vc,__exportStar:k0,__values:Ec,__read:Cf,__spread:D0,__spreadArrays:N0,__spreadArray:P0,__await:La,__asyncGenerator:L0,__asyncDelegator:z0,__asyncValues:B0,__makeTemplateObject:U0,__importStar:H0,__importDefault:F0,__classPrivateFieldGet:I0,__classPrivateFieldSet:q0,__classPrivateFieldIn:$0,__addDisposableResource:V0,__disposeResources:G0,__rewriteRelativeImportExtension:W0},LT=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:V0,get __assign(){return Tc},__asyncDelegator:z0,__asyncGenerator:L0,__asyncValues:B0,__await:La,__awaiter:le,__classPrivateFieldGet:I0,__classPrivateFieldIn:$0,__classPrivateFieldSet:q0,__createBinding:Vc,__decorate:T0,__disposeResources:G0,__esDecorate:C0,__exportStar:k0,__extends:w0,__generator:M0,__importDefault:F0,__importStar:H0,__makeTemplateObject:U0,__metadata:R0,__param:E0,__propKey:A0,__read:Cf,__rest:qa,__rewriteRelativeImportExtension:W0,__runInitializers:j0,__setFunctionName:O0,__spread:D0,__spreadArray:P0,__spreadArrays:N0,__values:Ec,default:PT},Symbol.toStringTag,{value:"Module"})),zT=i=>i?(...e)=>i(...e):(...e)=>fetch(...e);let Gc=class extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}},Y0=class extends Gc{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Yd=class extends Gc{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Kd=class extends Gc{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Cc;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Cc||(Cc={}));class BT{constructor(e,{headers:t={},customFetch:s,region:a=Cc.Any}={}){this.url=e,this.headers=t,this.region=a,this.fetch=zT(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return le(this,arguments,void 0,function*(t,s={}){var a;let o,c;try{const{headers:h,method:d,body:f,signal:y,timeout:b}=s;let v={},{region:_}=s;_||(_=this.region);const S=new URL(`${this.url}/${t}`);_&&_!=="any"&&(v["x-region"]=_,S.searchParams.set("forceFunctionRegion",_));let w;f&&(h&&!Object.prototype.hasOwnProperty.call(h,"Content-Type")||!h)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",w=f):typeof f=="string"?(v["Content-Type"]="text/plain",w=f):typeof FormData<"u"&&f instanceof FormData?w=f:(v["Content-Type"]="application/json",w=JSON.stringify(f)):w=f;let T=y;b&&(c=new AbortController,o=setTimeout(()=>c.abort(),b),y?(T=c.signal,y.addEventListener("abort",()=>c.abort())):T=c.signal);const C=yield this.fetch(S.toString(),{method:d||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),h),body:w,signal:T}).catch(N=>{throw new Y0(N)}),A=C.headers.get("x-relay-error");if(A&&A==="true")throw new Yd(C);if(!C.ok)throw new Kd(C);let j=((a=C.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),D;return j==="application/json"?D=yield C.json():j==="application/octet-stream"||j==="application/pdf"?D=yield C.blob():j==="text/event-stream"?D=C:j==="multipart/form-data"?D=yield C.formData():D=yield C.text(),{data:D,error:null,response:C}}catch(h){return{data:null,error:h,response:h instanceof Kd||h instanceof Yd?h.context:void 0}}finally{o&&clearTimeout(o)}})}}const UT=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return Cc},FunctionsClient:BT,FunctionsError:Gc,FunctionsFetchError:Y0,FunctionsHttpError:Kd,FunctionsRelayError:Yd},Symbol.toStringTag,{value:"Module"})),K0=xo(UT);var At={};const $a=xo(LT);var Wl={},Yl={},Kl={},Xl={},Ql={},Jl={},fb;function X0(){if(fb)return Jl;fb=1,Object.defineProperty(Jl,"__esModule",{value:!0});class i extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return Jl.default=i,Jl}var gb;function Q0(){if(gb)return Ql;gb=1,Object.defineProperty(Ql,"__esModule",{value:!0});const e=$a.__importDefault(X0());let t=class{constructor(a){var o,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(o=a.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=new Headers(this.headers),this.headers.set(a,o),this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let h=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async d=>{var f,y,b,v;let _=null,S=null,w=null,T=d.status,C=d.statusText;if(d.ok){if(this.method!=="HEAD"){const N=await d.text();N===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?S=N:S=JSON.parse(N))}const j=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),D=(b=d.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");j&&D&&D.length>1&&(w=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(S)&&(S.length>1?(_={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,w=null,T=406,C="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{const j=await d.text();try{_=JSON.parse(j),Array.isArray(_)&&d.status===404&&(S=[],_=null,T=200,C="OK")}catch{d.status===404&&j===""?(T=204,C="No Content"):_={message:j}}if(_&&this.isMaybeSingle&&(!((v=_?.details)===null||v===void 0)&&v.includes("0 rows"))&&(_=null,T=200,C="OK"),_&&this.shouldThrowOnError)throw new e.default(_)}return{error:_,data:S,count:w,status:T,statusText:C}});return this.shouldThrowOnError||(h=h.catch(d=>{var f,y,b,v,_,S;let w="";const T=d?.cause;if(T){const C=(f=T?.message)!==null&&f!==void 0?f:"",A=(y=T?.code)!==null&&y!==void 0?y:"";w=`${(b=d?.name)!==null&&b!==void 0?b:"FetchError"}: ${d?.message}`,w+=`

Caused by: ${(v=T?.name)!==null&&v!==void 0?v:"Error"}: ${C}`,A&&(w+=` (${A})`),T?.stack&&(w+=`
${T.stack}`)}else w=(_=d?.stack)!==null&&_!==void 0?_:"";return{error:{message:`${(S=d?.name)!==null&&S!==void 0?S:"FetchError"}: ${d?.message}`,details:w,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),h.then(a,o)}returns(){return this}overrideTypes(){return this}};return Ql.default=t,Ql}var pb;function J0(){if(pb)return Xl;pb=1,Object.defineProperty(Xl,"__esModule",{value:!0});const e=$a.__importDefault(Q0());let t=class extends e.default{select(a){let o=!1;const c=(a??"*").split("").map(h=>/\s/.test(h)&&!o?"":(h==='"'&&(o=!o),h)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:o=!0,nullsFirst:c,foreignTable:h,referencedTable:d=h}={}){const f=d?`${d}.order`:"order",y=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${y?`${y},`:""}${a}.${o?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:o,referencedTable:c=o}={}){const h=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(h,`${a}`),this}range(a,o,{foreignTable:c,referencedTable:h=c}={}){const d=typeof h>"u"?"offset":`${h}.offset`,f=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(d,`${a}`),this.url.searchParams.set(f,`${o-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:o=!1,settings:c=!1,buffers:h=!1,wal:d=!1,format:f="text"}={}){var y;const b=[a?"analyze":null,o?"verbose":null,c?"settings":null,h?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${b};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};return Xl.default=t,Xl}var mb;function jf(){if(mb)return Kl;mb=1,Object.defineProperty(Kl,"__esModule",{value:!0});const e=$a.__importDefault(J0()),t=new RegExp("[,()]");let s=class extends e.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}regexMatch(o,c){return this.url.searchParams.append(o,`match.${c}`),this}regexIMatch(o,c){return this.url.searchParams.append(o,`imatch.${c}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}isDistinct(o,c){return this.url.searchParams.append(o,`isdistinct.${c}`),this}in(o,c){const h=Array.from(new Set(c)).map(d=>typeof d=="string"&&t.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(o,`in.(${h})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:h,type:d}={}){let f="";d==="plain"?f="pl":d==="phrase"?f="ph":d==="websearch"&&(f="w");const y=h===void 0?"":`(${h})`;return this.url.searchParams.append(o,`${f}fts${y}.${c}`),this}match(o){return Object.entries(o).forEach(([c,h])=>{this.url.searchParams.append(c,`eq.${h}`)}),this}not(o,c,h){return this.url.searchParams.append(o,`not.${c}.${h}`),this}or(o,{foreignTable:c,referencedTable:h=c}={}){const d=h?`${h}.or`:"or";return this.url.searchParams.append(d,`(${o})`),this}filter(o,c,h){return this.url.searchParams.append(o,`${c}.${h}`),this}};return Kl.default=s,Kl}var yb;function Z0(){if(yb)return Yl;yb=1,Object.defineProperty(Yl,"__esModule",{value:!0});const e=$a.__importDefault(jf());let t=class{constructor(a,{headers:o={},schema:c,fetch:h}){this.url=a,this.headers=new Headers(o),this.schema=c,this.fetch=h}select(a,o){const{head:c=!1,count:h}=o??{},d=c?"HEAD":"GET";let f=!1;const y=(a??"*").split("").map(b=>/\s/.test(b)&&!f?"":(b==='"'&&(f=!f),b)).join("");return this.url.searchParams.set("select",y),h&&this.headers.append("Prefer",`count=${h}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:o,defaultToNull:c=!0}={}){var h;const d="POST";if(o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((y,b)=>y.concat(Object.keys(b)),[]);if(f.length>0){const y=[...new Set(f)].map(b=>`"${b}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(a,{onConflict:o,ignoreDuplicates:c=!1,count:h,defaultToNull:d=!0}={}){var f;const y="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),h&&this.headers.append("Prefer",`count=${h}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const b=a.reduce((v,_)=>v.concat(Object.keys(_)),[]);if(b.length>0){const v=[...new Set(b)].map(_=>`"${_}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(a,{count:o}={}){var c;const h="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var o;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};return Yl.default=t,Yl}var bb;function HT(){if(bb)return Wl;bb=1,Object.defineProperty(Wl,"__esModule",{value:!0});const i=$a,e=i.__importDefault(Z0()),t=i.__importDefault(jf());let s=class e_{constructor(o,{headers:c={},schema:h,fetch:d}={}){this.url=o,this.headers=new Headers(c),this.schemaName=h,this.fetch=d}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${o}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new e_(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:h=!1,get:d=!1,count:f}={}){var y;let b;const v=new URL(`${this.url}/rpc/${o}`);let _;h||d?(b=h?"HEAD":"GET",Object.entries(c).filter(([w,T])=>T!==void 0).map(([w,T])=>[w,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([w,T])=>{v.searchParams.append(w,T)})):(b="POST",_=c);const S=new Headers(this.headers);return f&&S.set("Prefer",`count=${f}`),new t.default({method:b,url:v,headers:S,schema:this.schemaName,body:_,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}};return Wl.default=s,Wl}var vb;function t_(){if(vb)return At;vb=1,Object.defineProperty(At,"__esModule",{value:!0}),At.PostgrestError=At.PostgrestBuilder=At.PostgrestTransformBuilder=At.PostgrestFilterBuilder=At.PostgrestQueryBuilder=At.PostgrestClient=void 0;const i=$a,e=i.__importDefault(HT());At.PostgrestClient=e.default;const t=i.__importDefault(Z0());At.PostgrestQueryBuilder=t.default;const s=i.__importDefault(jf());At.PostgrestFilterBuilder=s.default;const a=i.__importDefault(J0());At.PostgrestTransformBuilder=a.default;const o=i.__importDefault(Q0());At.PostgrestBuilder=o.default;const c=i.__importDefault(X0());return At.PostgrestError=c.default,At.default={PostgrestClient:e.default,PostgrestQueryBuilder:t.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:o.default,PostgrestError:c.default},At}class n_{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const s=t.node,a=parseInt(s.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const s=this.getWebSocketConstructor();return new s(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const FT="2.87.1",IT=`realtime-js/${FT}`,i_="1.0.0",qT="2.0.0",_b=i_,Xd=1e4,$T=1e3,VT=100;var js;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(js||(js={}));var dt;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(dt||(dt={}));var Tn;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Tn||(Tn={}));var Qd;(function(i){i.websocket="websocket"})(Qd||(Qd={}));var As;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(As||(As={}));class GT{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let s=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(s))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(e){var t,s;const a=(s=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&s!==void 0?s:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,s){var a,o;const c=e.topic,h=(a=e.ref)!==null&&a!==void 0?a:"",d=(o=e.join_ref)!==null&&o!==void 0?o:"",f=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},b=Object.keys(y).length===0?"":JSON.stringify(y);if(d.length>255)throw new Error(`joinRef length ${d.length} exceeds maximum of 255`);if(h.length>255)throw new Error(`ref length ${h.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`metadata length ${b.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+d.length+h.length+c.length+f.length+b.length,_=new ArrayBuffer(this.HEADER_LENGTH+v);let S=new DataView(_),w=0;S.setUint8(w++,this.KINDS.userBroadcastPush),S.setUint8(w++,d.length),S.setUint8(w++,h.length),S.setUint8(w++,c.length),S.setUint8(w++,f.length),S.setUint8(w++,b.length),S.setUint8(w++,t),Array.from(d,C=>S.setUint8(w++,C.charCodeAt(0))),Array.from(h,C=>S.setUint8(w++,C.charCodeAt(0))),Array.from(c,C=>S.setUint8(w++,C.charCodeAt(0))),Array.from(f,C=>S.setUint8(w++,C.charCodeAt(0))),Array.from(b,C=>S.setUint8(w++,C.charCodeAt(0)));var T=new Uint8Array(_.byteLength+s.byteLength);return T.set(new Uint8Array(_),0),T.set(new Uint8Array(s),_.byteLength),T.buffer}decode(e,t){if(this._isArrayBuffer(e)){let s=this._binaryDecode(e);return t(s)}if(typeof e=="string"){const s=JSON.parse(e),[a,o,c,h,d]=s;return t({join_ref:a,ref:o,topic:c,event:h,payload:d})}return t({})}_binaryDecode(e){const t=new DataView(e),s=t.getUint8(0),a=new TextDecoder;switch(s){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,a)}}_decodeUserBroadcast(e,t,s){const a=t.getUint8(1),o=t.getUint8(2),c=t.getUint8(3),h=t.getUint8(4);let d=this.HEADER_LENGTH+4;const f=s.decode(e.slice(d,d+a));d=d+a;const y=s.decode(e.slice(d,d+o));d=d+o;const b=s.decode(e.slice(d,d+c));d=d+c;const v=e.slice(d,e.byteLength),_=h===this.JSON_ENCODING?JSON.parse(s.decode(v)):v,S={type:this.BROADCAST_EVENT,event:y,payload:_};return c>0&&(S.meta=JSON.parse(b)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e?.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([s])=>t.includes(s)))}}class s_{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var We;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(We||(We={}));const xb=(i,e,t={})=>{var s;const a=(s=t.skipTypes)!==null&&s!==void 0?s:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=WT(c,i,e,a),o),{}):{}},WT=(i,e,t,s)=>{const a=e.find(h=>h.name===i),o=a?.type,c=t[i];return o&&!s.includes(o)?a_(o,c):Jd(c)},a_=(i,e)=>{if(i.charAt(0)==="_"){const t=i.slice(1,i.length);return QT(e,t)}switch(i){case We.bool:return YT(e);case We.float4:case We.float8:case We.int2:case We.int4:case We.int8:case We.numeric:case We.oid:return KT(e);case We.json:case We.jsonb:return XT(e);case We.timestamp:return JT(e);case We.abstime:case We.date:case We.daterange:case We.int4range:case We.int8range:case We.money:case We.reltime:case We.text:case We.time:case We.timestamptz:case We.timetz:case We.tsrange:case We.tstzrange:return Jd(e);default:return Jd(e)}},Jd=i=>i,YT=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},KT=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},XT=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},QT=(i,e)=>{if(typeof i!="string")return i;const t=i.length-1,s=i[t];if(i[0]==="{"&&s==="}"){let o;const c=i.slice(1,t);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(h=>a_(e,h))}return i},JT=i=>typeof i=="string"?i.replace(" ","T"):i,r_=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Sd{constructor(e,t,s={},a=Xd){this.channel=e,this.event=t,this.payload=s,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(s=>s.status===e).forEach(s=>s.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Zd;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Zd||(Zd={}));let o_=class yc{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},a=>{const{onJoin:o,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=yc.syncState(this.state,a,o,c),this.pendingDiffs.forEach(d=>{this.state=yc.syncDiff(this.state,d,o,c)}),this.pendingDiffs=[],h()}),this.channel._on(s.diff,{},a=>{const{onJoin:o,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=yc.syncDiff(this.state,a,o,c),h())}),this.onJoin((a,o,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:o,newPresences:c})}),this.onLeave((a,o,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,a){const o=this.cloneDeep(e),c=this.transformState(t),h={},d={};return this.map(o,(f,y)=>{c[f]||(d[f]=y)}),this.map(c,(f,y)=>{const b=o[f];if(b){const v=y.map(T=>T.presence_ref),_=b.map(T=>T.presence_ref),S=y.filter(T=>_.indexOf(T.presence_ref)<0),w=b.filter(T=>v.indexOf(T.presence_ref)<0);S.length>0&&(h[f]=S),w.length>0&&(d[f]=w)}else h[f]=y}),this.syncDiff(o,{joins:h,leaves:d},s,a)}static syncDiff(e,t,s,a){const{joins:o,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),a||(a=()=>{}),this.map(o,(h,d)=>{var f;const y=(f=e[h])!==null&&f!==void 0?f:[];if(e[h]=this.cloneDeep(d),y.length>0){const b=e[h].map(_=>_.presence_ref),v=y.filter(_=>b.indexOf(_.presence_ref)<0);e[h].unshift(...v)}s(h,y,d)}),this.map(c,(h,d)=>{let f=e[h];if(!f)return;const y=d.map(b=>b.presence_ref);f=f.filter(b=>y.indexOf(b.presence_ref)<0),e[h]=f,a(h,f,d),f.length===0&&delete e[h]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const a=e[s];return"metas"in a?t[s]=a.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[s]=a,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var ef;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(ef||(ef={}));var Ma;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Ma||(Ma={}));var Bn;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Bn||(Bn={}));const ZT=dt;let l_=class Jr{constructor(e,t={config:{}},s){var a,o;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=dt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Sd(this,Tn.join,this.params,this.timeout),this.rejoinTimer=new s_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=dt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=dt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=dt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tn.reply,{},(c,h)=>{this._trigger(this._replyEventName(h),c)}),this.presence=new o_(this),this.broadcastEndpointURL=r_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,a,o;if(this.socket.isConnected()||this.socket.connect(),this.state==dt.closed){const{config:{broadcast:c,presence:h,private:d}}=this.params,f=(a=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(_=>_.filter))!==null&&a!==void 0?a:[],y=!!this.bindings[Ma.PRESENCE]&&this.bindings[Ma.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,b={},v={broadcast:c,presence:Object.assign(Object.assign({},h),{enabled:y}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(b.access_token=this.socket.accessTokenValue),this._onError(_=>e?.(Bn.CHANNEL_ERROR,_)),this._onClose(()=>e?.(Bn.CLOSED)),this.updateJoinPayload(Object.assign({config:v},b)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:_})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){e?.(Bn.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,T=(S=w?.length)!==null&&S!==void 0?S:0,C=[];for(let A=0;A<T;A++){const j=w[A],{filter:{event:D,schema:N,table:q,filter:P}}=j,U=_&&_[A];if(U&&U.event===D&&Jr.isFilterValueEqual(U.schema,N)&&Jr.isFilterValueEqual(U.table,q)&&Jr.isFilterValueEqual(U.filter,P))C.push(Object.assign(Object.assign({},j),{id:U.id}));else{this.unsubscribe(),this.state=dt.errored,e?.(Bn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Bn.SUBSCRIBED);return}}).receive("error",_=>{this.state=dt.errored,e?.(Bn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e?.(Bn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===dt.joined&&e===Ma.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,s)}async httpSend(e,t,s={}){var a;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},h=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=s.timeout)!==null&&a!==void 0?a:this.timeout);if(h.status===202)return{success:!0};let d=h.statusText;try{const f=await h.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(e,t={}){var s,a;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=e,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(s=t.timeout)!==null&&s!==void 0?s:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,h,d;const f=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((d=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||d===void 0)&&d.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=dt.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tn.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(a=>{s=new Sd(this,Tn.leave,{},e),s.receive("ok",()=>{t(),a("ok")}).receive("timeout",()=>{t(),a("timed out")}).receive("error",()=>{a("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{s?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=dt.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const a=new AbortController,o=setTimeout(()=>a.abort(),s),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:a.signal}));return clearTimeout(o),c}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Sd(this,e,t,s);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>VT){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var a,o;const c=e.toLocaleLowerCase(),{close:h,error:d,leave:f,join:y}=Tn;if(s&&[h,d,f,y].indexOf(c)>=0&&s!==this._joinRef())return;let v=this._onMessage(c,t,s);if(t&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(_=>{var S,w,T;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((T=(w=_.filter)===null||w===void 0?void 0:w.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===c}).map(_=>_.callback(v,s)):(o=this.bindings[c])===null||o===void 0||o.filter(_=>{var S,w,T,C,A,j;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in _){const D=_.id,N=(S=_.filter)===null||S===void 0?void 0:S.event;return D&&((w=t.ids)===null||w===void 0?void 0:w.includes(D))&&(N==="*"||N?.toLocaleLowerCase()===((T=t.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const D=(A=(C=_?.filter)===null||C===void 0?void 0:C.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return D==="*"||D===((j=t?.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===c}).map(_=>{if(typeof v=="object"&&"ids"in v){const S=v.data,{schema:w,table:T,commit_timestamp:C,type:A,errors:j}=S;v=Object.assign(Object.assign({},{schema:w,table:T,commit_timestamp:C,eventType:A,new:{},old:{},errors:j}),this._getPayloadRecords(S))}_.callback(v,s)})}_isClosed(){return this.state===dt.closed}_isJoined(){return this.state===dt.joined}_isJoining(){return this.state===dt.joining}_isLeaving(){return this.state===dt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const a=e.toLocaleLowerCase(),o={type:a,filter:t,callback:s};return this.bindings[a]?this.bindings[a].push(o):this.bindings[a]=[o],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(a=>{var o;return!(((o=a.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===s&&Jr.isEqual(a.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tn.close,{},e)}_onError(e){this._on(Tn.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=dt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=xb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=xb(e.columns,e.old_record)),t}};const wd=()=>{},Zl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},eE=[1e3,2e3,5e3,1e4],tE=1e4,nE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let iE=class{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Xd,this.transport=null,this.heartbeatIntervalMs=Zl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wd,this.ref=0,this.reconnectTimer=null,this.vsn=_b,this.logger=wd,this.conn=null,this.sendBuffer=[],this.serializer=new GT,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...o)=>a(...o):(...o)=>fetch(...o),!(!((s=t?.params)===null||s===void 0)&&s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Qd.websocket}`,this.httpEndpoint=r_(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=n_.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case js.connecting:return As.Connecting;case js.open:return As.Open;case js.closing:return As.Closing;default:return As.Closed}}isConnected(){return this.connectionState()===As.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const s=`realtime:${e}`,a=this.getChannels().find(o=>o.topic===s);if(a)return a;{const o=new l_(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:s,payload:a,ref:o}=e,c=()=>{this.encode(e,h=>{var d;(d=this.conn)===null||d===void 0||d.send(h)})};this.log("push",`${t} ${s} (${o})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close($T,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Zl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:s,event:a,payload:o,ref:c}=t,h=c?`(${c})`:"",d=o.status||"";this.log("receive",`${d} ${s} ${a} ${h}`.trim(),o),this.channels.filter(f=>f._isMember(s)).forEach(f=>f._trigger(a,o,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===js.open||this.conn.readyState===js.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Tn.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const s=e.match(/\?/)?"&":"?",a=new URLSearchParams(t);return`${e}${s}${a}`}_workerObjectUrl(e){let t;if(e)t=e;else{const s=new Blob([nE],{type:"application/javascript"});t=URL.createObjectURL(s)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,s=!1;if(e)t=e,s=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(a){this.log("error","Error fetching access token from callback",a),t=this.accessTokenValue}else t=this.accessTokenValue;s?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(a=>{const o={access_token:t,version:IT};t&&a.updateJoinPayload(o),a.joinedOnce&&a._isJoined()&&a._push(Tn.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(a){this.log("error",`error in ${e} callback`,a)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new s_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,a,o,c,h,d,f,y,b,v,_;switch(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(s=e?.timeout)!==null&&s!==void 0?s:Xd,this.heartbeatIntervalMs=(a=e?.heartbeatIntervalMs)!==null&&a!==void 0?a:Zl.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e?.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(h=e?.heartbeatCallback)!==null&&h!==void 0?h:wd,this.vsn=(d=e?.vsn)!==null&&d!==void 0?d:_b,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=e?.reconnectAfterMs)!==null&&f!==void 0?f:(S=>eE[S-1]||tE),this.vsn){case i_:this.encode=(y=e?.encode)!==null&&y!==void 0?y:((S,w)=>w(JSON.stringify(S))),this.decode=(b=e?.decode)!==null&&b!==void 0?b:((S,w)=>w(JSON.parse(S)));break;case qT:this.encode=(v=e?.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(_=e?.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}};const sE=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:ZT,get REALTIME_LISTEN_TYPES(){return Ma},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return ef},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Zd},get REALTIME_SUBSCRIBE_STATES(){return Bn},RealtimeChannel:l_,RealtimeClient:iE,RealtimePresence:o_,WebSocketFactory:n_},Symbol.toStringTag,{value:"Module"})),c_=xo(sE);class To extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Je(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class u_ extends To{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jc extends To{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Af=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),aE=()=>Response,tf=i=>{if(Array.isArray(i))return i.map(t=>tf(t));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([t,s])=>{const a=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[a]=tf(s)}),e},rE=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},oE=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i),Td=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},lE=(i,e,t)=>le(void 0,void 0,void 0,function*(){const s=yield aE();i instanceof s&&!t?.noResolveJson?i.json().then(a=>{const o=i.status||500,c=a?.statusCode||o+"";e(new u_(Td(a),o,c))}).catch(a=>{e(new jc(Td(a),a))}):e(new jc(Td(i),i))}),cE=(i,e,t,s)=>{const a={method:i,headers:e?.headers||{}};return i==="GET"||!s?a:(rE(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,e?.duplex&&(a.duplex=e.duplex),Object.assign(Object.assign({},a),t))};function Eo(i,e,t,s,a,o){return le(this,void 0,void 0,function*(){return new Promise((c,h)=>{i(t,cE(e,s,a,o)).then(d=>{if(!d.ok)throw d;return s?.noResolveJson?d:d.json()}).then(d=>c(d)).catch(d=>lE(d,h,s))})})}function uo(i,e,t,s){return le(this,void 0,void 0,function*(){return Eo(i,"GET",e,t,s)})}function wn(i,e,t,s,a){return le(this,void 0,void 0,function*(){return Eo(i,"POST",e,s,a,t)})}function nf(i,e,t,s,a){return le(this,void 0,void 0,function*(){return Eo(i,"PUT",e,s,a,t)})}function uE(i,e,t,s){return le(this,void 0,void 0,function*(){return Eo(i,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),s)})}function Of(i,e,t,s,a){return le(this,void 0,void 0,function*(){return Eo(i,"DELETE",e,s,a,t)})}class hE{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return le(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Je(e))return{data:null,error:e};throw e}})}}var h_;class dE{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[h_]="BlobDownloadBuilder",this.promise=null}asStream(){return new hE(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return le(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Je(e))return{data:null,error:e};throw e}})}}h_=Symbol.toStringTag;const fE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Sb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class gE{constructor(e,t={},s,a){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=Af(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,a){return le(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},Sb),a);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const d=c.metadata;typeof Blob<"u"&&s instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),d&&o.append("metadata",this.encodeMetadata(d)),o.append("",s)):typeof FormData<"u"&&s instanceof FormData?(o=s,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),d&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(d))):(o=s,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,d&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(d))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),a?.headers&&(h=Object.assign(Object.assign({},h),a.headers));const f=this._removeEmptyFolders(t),y=this._getFinalPath(f),b=yield(e=="PUT"?nf:wn)(this.fetch,`${this.url}/object/${y}`,o,Object.assign({headers:h},c?.duplex?{duplex:c.duplex}:{}));return{data:{path:f,id:b.Id,fullPath:b.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Je(o))return{data:null,error:o};throw o}})}upload(e,t,s){return le(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,a){return le(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),c=this._getFinalPath(o),h=new URL(this.url+`/object/upload/sign/${c}`);h.searchParams.set("token",t);try{let d;const f=Object.assign({upsert:Sb.upsert},a),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&s instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",s)):typeof FormData<"u"&&s instanceof FormData?(d=s,d.append("cacheControl",f.cacheControl)):(d=s,y["cache-control"]=`max-age=${f.cacheControl}`,y["content-type"]=f.contentType);const b=yield nf(this.fetch,h.toString(),d,{headers:y});return{data:{path:o,fullPath:b.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Je(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(e,t){return le(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const a=Object.assign({},this.headers);t?.upsert&&(a["x-upsert"]="true");const o=yield wn(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:a}),c=new URL(this.url+o.url),h=c.searchParams.get("token");if(!h)throw new To("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:h},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}})}update(e,t,s){return le(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return le(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Je(a))return{data:null,error:a};throw a}})}copy(e,t,s){return le(this,void 0,void 0,function*(){try{return{data:{path:(yield wn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:s?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Je(a))return{data:null,error:a};throw a}})}createSignedUrl(e,t,s){return le(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),o=yield wn(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:t},s?.transform?{transform:s.transform}:{}),{headers:this.headers});const c=s?.download?`&download=${s.download===!0?"":s.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Je(a))return{data:null,error:a};throw a}})}createSignedUrls(e,t,s){return le(this,void 0,void 0,function*(){try{const a=yield wn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=s?.download?`&download=${s.download===!0?"":s.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Je(a))return{data:null,error:a};throw a}})}download(e,t){const a=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),c=o?`?${o}`:"",h=this._getFinalPath(e),d=()=>uo(this.fetch,`${this.url}/${a}/${h}${c}`,{headers:this.headers,noResolveJson:!0});return new dE(d,this.shouldThrowOnError)}info(e){return le(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const s=yield uo(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:tf(s),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}})}exists(e){return le(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield uE(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Je(s)&&s instanceof jc){const a=s.originalError;if([400,404].includes(a?.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),a=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&a.push(o);const h=typeof t?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(t?.transform||{});d!==""&&a.push(d);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${s}${f}`)}}}remove(e){return le(this,void 0,void 0,function*(){try{return{data:yield Of(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Je(t))return{data:null,error:t};throw t}})}list(e,t,s){return le(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},fE),t),{prefix:e||""});return{data:yield wn(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},s),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Je(a))return{data:null,error:a};throw a}})}listV2(e,t){return le(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield wn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const d_="2.87.1",f_={"X-Client-Info":`storage-js/${d_}`};class pE{constructor(e,t={},s,a){this.shouldThrowOnError=!1;const o=new URL(e);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},f_),t),this.fetch=Af(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return le(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield uo(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Je(t))return{data:null,error:t};throw t}})}getBucket(e){return le(this,void 0,void 0,function*(){try{return{data:yield uo(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Je(t))return{data:null,error:t};throw t}})}createBucket(e){return le(this,arguments,void 0,function*(t,s={public:!1}){try{return{data:yield wn(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:s.type,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Je(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return le(this,void 0,void 0,function*(){try{return{data:yield nf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Je(s))return{data:null,error:s};throw s}})}emptyBucket(e){return le(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Je(t))return{data:null,error:t};throw t}})}deleteBucket(e){return le(this,void 0,void 0,function*(){try{return{data:yield Of(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Je(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}var ho=class extends Error{constructor(i,e){super(i),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&e.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function mE(i,e,t){const s=new URL(e,i);if(t)for(const[a,o]of Object.entries(t))o!==void 0&&s.searchParams.set(a,o);return s.toString()}async function yE(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function bE(i){const e=i.fetchImpl??globalThis.fetch;return{async request({method:t,path:s,query:a,body:o,headers:c}){const h=mE(i.baseUrl,s,a),d=await yE(i.auth),f=await e(h,{method:t,headers:{...o?{"Content-Type":"application/json"}:{},...d,...c},body:o?JSON.stringify(o):void 0}),y=await f.text(),b=(f.headers.get("content-type")||"").includes("application/json"),v=b&&y?JSON.parse(y):y;if(!f.ok){const _=b?v:void 0,S=_?.error;throw new ho(S?.message??`Request failed with status ${f.status}`,{status:f.status,icebergType:S?.type,icebergCode:S?.code,details:_})}return{status:f.status,headers:f.headers,data:v}}}}function ec(i){return i.join("")}var vE=class{constructor(i,e=""){this.client=i,this.prefix=e}async listNamespaces(i){const e=i?{parent:ec(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(s=>({namespace:s}))}async createNamespace(i,e){const t={namespace:i.namespace,properties:e?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ec(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ec(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ec(i.namespace)}`}),!0}catch(e){if(e instanceof ho&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(i,e){try{return await this.createNamespace(i,e)}catch(t){if(t instanceof ho&&t.status===409)return;throw t}}};function xa(i){return i.join("")}var _E=class{constructor(i,e="",t){this.client=i,this.prefix=e,this.accessDelegation=t}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xa(i.namespace)}/tables`})).data.identifiers}async createTable(i,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xa(i.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(i,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xa(i.namespace)}/tables/${i.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(i,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xa(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String(e?.purge??!1)}})}async loadTable(i){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xa(i.namespace)}/tables/${i.name}`,headers:e})).data.metadata}async tableExists(i){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xa(i.namespace)}/tables/${i.name}`,headers:e}),!0}catch(t){if(t instanceof ho&&t.status===404)return!1;throw t}}async createTableIfNotExists(i,e){try{return await this.createTable(i,e)}catch(t){if(t instanceof ho&&t.status===409)return await this.loadTable({namespace:i.namespace,name:e.name});throw t}}},xE=class{constructor(i){let e="v1";i.catalogName&&(e+=`/${i.catalogName}`);const t=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=bE({baseUrl:t,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=i.accessDelegation?.join(","),this.namespaceOps=new vE(this.client,e),this.tableOps=new _E(this.client,e,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,e){return this.namespaceOps.createNamespace(i,e)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,e){return this.tableOps.createTable(i,e)}async updateTable(i,e){return this.tableOps.updateTable(i,e)}async dropTable(i,e){await this.tableOps.dropTable(i,e)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,e){return this.namespaceOps.createNamespaceIfNotExists(i,e)}async createTableIfNotExists(i,e){return this.tableOps.createTableIfNotExists(i,e)}};class g_{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},f_),t),this.fetch=Af(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return le(this,void 0,void 0,function*(){try{return{data:yield wn(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Je(t))return{data:null,error:t};throw t}})}listBuckets(e){return le(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const s=t.toString(),a=s?`${this.url}/bucket?${s}`:`${this.url}/bucket`;return{data:yield uo(this.fetch,a,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Je(t))return{data:null,error:t};throw t}})}deleteBucket(e){return le(this,void 0,void 0,function*(){try{return{data:yield Of(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Je(t))return{data:null,error:t};throw t}})}from(e){if(!oE(e))throw new To("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new xE({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>le(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),s=this.shouldThrowOnError;return new Proxy(t,{get(o,c){const h=o[c];return typeof h!="function"?h:(...d)=>le(this,void 0,void 0,function*(){try{return{data:yield h.apply(o,d),error:null}}catch(f){if(s)throw f;return{data:null,error:f}}})}})}}const Rf={"X-Client-Info":`storage-js/${d_}`,"Content-Type":"application/json"};class Mf extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function qt(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class bc extends Mf{constructor(e,t,s){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class p_ extends Mf{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var sf;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(sf||(sf={}));const Wc=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),SE=()=>Response,m_=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},wE=i=>Array.from(new Float32Array(i)),TE=(i,e)=>{if(e!==void 0&&i.float32.length!==e)throw new Error(`Vector dimension mismatch: expected ${e}, got ${i.float32.length}`)},wb=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),EE=(i,e,t)=>le(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!t?.noResolveJson){const a=i.status||500,o=i;if(typeof o.json=="function")o.json().then(c=>{const h=c?.statusCode||c?.code||a+"";e(new bc(wb(c),a,h))}).catch(()=>{const c=a+"",h=o.statusText||`HTTP ${a} error`;e(new bc(h,a,c))});else{const c=a+"",h=o.statusText||`HTTP ${a} error`;e(new bc(h,a,c))}}else e(new p_(wb(i),i))}),CE=(i,e,t,s)=>{const a={method:i,headers:e?.headers||{}};return s?(m_(s)?(a.headers=Object.assign({"Content-Type":"application/json"},e?.headers),a.body=JSON.stringify(s)):a.body=s,Object.assign(Object.assign({},a),t)):a};function jE(i,e,t,s,a,o){return le(this,void 0,void 0,function*(){return new Promise((c,h)=>{i(t,CE(e,s,a,o)).then(d=>{if(!d.ok)throw d;if(s?.noResolveJson)return d;const f=d.headers.get("content-type");return!f||!f.includes("application/json")?{}:d.json()}).then(d=>c(d)).catch(d=>EE(d,h,s))})})}function nn(i,e,t,s,a){return le(this,void 0,void 0,function*(){return jE(i,"POST",e,s,a,t)})}class y_{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rf),t),this.fetch=Wc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return le(this,void 0,void 0,function*(){try{return{data:(yield nn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}getIndex(e,t){return le(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(qt(s))return{data:null,error:s};throw s}})}listIndexes(e){return le(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return le(this,void 0,void 0,function*(){try{return{data:(yield nn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(qt(s))return{data:null,error:s};throw s}})}}class b_{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rf),t),this.fetch=Wc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return le(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield nn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}getVectors(e){return le(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}listVectors(e){return le(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield nn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}queryVectors(e){return le(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}deleteVectors(e){return le(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield nn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}}class v_{constructor(e,t={},s){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Rf),t),this.fetch=Wc(s)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return le(this,void 0,void 0,function*(){try{return{data:(yield nn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}getBucket(e){return le(this,void 0,void 0,function*(){try{return{data:yield nn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}listBuckets(){return le(this,arguments,void 0,function*(e={}){try{return{data:yield nn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return le(this,void 0,void 0,function*(){try{return{data:(yield nn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(qt(t))return{data:null,error:t};throw t}})}}class __ extends v_{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new x_(this.url,this.headers,e,this.fetch)}createBucket(e){const t=Object.create(null,{createBucket:{get:()=>super.createBucket}});return le(this,void 0,void 0,function*(){return t.createBucket.call(this,e)})}getBucket(e){const t=Object.create(null,{getBucket:{get:()=>super.getBucket}});return le(this,void 0,void 0,function*(){return t.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return le(this,arguments,void 0,function*(t={}){return e.listBuckets.call(this,t)})}deleteBucket(e){const t=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return le(this,void 0,void 0,function*(){return t.deleteBucket.call(this,e)})}}class x_ extends y_{constructor(e,t,s,a){super(e,t,a),this.vectorBucketName=s}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return le(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return le(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return le(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return le(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new S_(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class S_ extends b_{constructor(e,t,s,a,o){super(e,t,o),this.vectorBucketName=s,this.indexName=a}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return le(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return le(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return le(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return le(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return le(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class AE extends pE{constructor(e,t={},s,a){super(e,t,s,a)}from(e){return new gE(this.url,this.headers,e,this.fetch)}get vectors(){return new __(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new g_(this.url+"/iceberg",this.headers,this.fetch)}}const OE=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:g_,StorageApiError:u_,StorageClient:AE,StorageError:To,StorageUnknownError:jc,StorageVectorsApiError:bc,StorageVectorsClient:__,StorageVectorsError:Mf,get StorageVectorsErrorCode(){return sf},StorageVectorsUnknownError:p_,VectorBucketApi:v_,VectorBucketScope:x_,VectorDataApi:b_,VectorIndexApi:y_,VectorIndexScope:S_,isPlainObject:m_,isStorageError:Je,isStorageVectorsError:qt,normalizeToFloat32:wE,resolveFetch:Wc,resolveResponse:SE,validateVectorDimension:TE},Symbol.toStringTag,{value:"Module"})),RE=xo(OE);var Ed={},$r={},Tb;function ME(){return Tb||(Tb=1,Object.defineProperty($r,"__esModule",{value:!0}),$r.version=void 0,$r.version="2.87.1"),$r}var Eb;function kE(){return Eb||(Eb=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_REALTIME_OPTIONS=i.DEFAULT_AUTH_OPTIONS=i.DEFAULT_DB_OPTIONS=i.DEFAULT_GLOBAL_OPTIONS=i.DEFAULT_HEADERS=void 0;const e=ME();let t="";typeof Deno<"u"?t="deno":typeof document<"u"?t="web":typeof navigator<"u"&&navigator.product==="ReactNative"?t="react-native":t="node",i.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${t}/${e.version}`},i.DEFAULT_GLOBAL_OPTIONS={headers:i.DEFAULT_HEADERS},i.DEFAULT_DB_OPTIONS={schema:"public"},i.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},i.DEFAULT_REALTIME_OPTIONS={}})(Ed)),Ed}var Cd={},Cb;function DE(){return Cb||(Cb=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.fetchWithAuth=i.resolveHeadersConstructor=i.resolveFetch=void 0;const e=a=>a?(...o)=>a(...o):(...o)=>fetch(...o);i.resolveFetch=e;const t=()=>Headers;i.resolveHeadersConstructor=t;const s=(a,o,c)=>{const h=(0,i.resolveFetch)(c),d=(0,i.resolveHeadersConstructor)();return async(f,y)=>{var b;const v=(b=await o())!==null&&b!==void 0?b:a;let _=new d(y?.headers);return _.has("apikey")||_.set("apikey",a),_.has("Authorization")||_.set("Authorization",`Bearer ${v}`),h(f,Object.assign(Object.assign({},y),{headers:_}))}};i.fetchWithAuth=s})(Cd)),Cd}var ai={},jb;function NE(){if(jb)return ai;jb=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.isBrowser=void 0,ai.uuid=i,ai.ensureTrailingSlash=e,ai.applySettingDefaults=s,ai.validateSupabaseUrl=a;function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){var c=Math.random()*16|0,h=o=="x"?c:c&3|8;return h.toString(16)})}function e(o){return o.endsWith("/")?o:o+"/"}const t=()=>typeof window<"u";ai.isBrowser=t;function s(o,c){var h,d;const{db:f,auth:y,realtime:b,global:v}=o,{db:_,auth:S,realtime:w,global:T}=c,C={db:Object.assign(Object.assign({},_),f),auth:Object.assign(Object.assign({},S),y),realtime:Object.assign(Object.assign({},w),b),storage:{},global:Object.assign(Object.assign(Object.assign({},T),v),{headers:Object.assign(Object.assign({},(h=T?.headers)!==null&&h!==void 0?h:{}),(d=v?.headers)!==null&&d!==void 0?d:{})}),accessToken:async()=>""};return o.accessToken?C.accessToken=o.accessToken:delete C.accessToken,C}function a(o){const c=o?.trim();if(!c)throw new Error("supabaseUrl is required.");if(!c.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(e(c))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return ai}var Vr={};const w_="2.87.1",Oa=30*1e3,af=3,jd=af*Oa,PE="http://localhost:9999",LE="supabase.auth.token",zE={"X-Client-Info":`gotrue-js/${w_}`},rf="X-Supabase-Api-Version",T_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,UE=600*1e3;let za=class extends Error{constructor(e,t,s){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=s}};function de(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}let E_=class extends za{constructor(e,t,s){super(e,t,s),this.name="AuthApiError",this.status=t,this.code=s}};function C_(i){return de(i)&&i.name==="AuthApiError"}let Hi=class extends za{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},fi=class extends za{constructor(e,t,s,a){super(e,s,a),this.name=t,this.status=s}},It=class extends fi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function j_(i){return de(i)&&i.name==="AuthSessionMissingError"}let Ss=class extends fi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Zr=class extends fi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},eo=class extends fi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function A_(i){return de(i)&&i.name==="AuthImplicitGrantRedirectError"}let of=class extends fi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ac=class extends fi{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function vc(i){return de(i)&&i.name==="AuthRetryableFetchError"}let lf=class extends fi{constructor(e,t,s){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=s}};function HE(i){return de(i)&&i.name==="AuthWeakPasswordError"}let Oc=class extends fi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const Rc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ab=` 	
\r=`.split(""),FE=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<Ab.length;e+=1)i[Ab[e].charCodeAt(0)]=-2;for(let e=0;e<Rc.length;e+=1)i[Rc[e].charCodeAt(0)]=e;return i})();function Ob(i,e,t){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Rc[s]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const s=e.queue>>e.queuedBits-6&63;t(Rc[s]),e.queuedBits-=6}}function O_(i,e,t){const s=FE[i];if(s>-1)for(e.queue=e.queue<<6|s,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Rb(i){const e=[],t=c=>{e.push(String.fromCodePoint(c))},s={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},o=c=>{$E(c,s,t)};for(let c=0;c<i.length;c+=1)O_(i.charCodeAt(c),a,o);return e.join("")}function IE(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function qE(i,e){for(let t=0;t<i.length;t+=1){let s=i.charCodeAt(t);if(s>55295&&s<=56319){const a=(s-55296)*1024&65535;s=(i.charCodeAt(t+1)-56320&65535|a)+65536,t+=1}IE(s,e)}}function $E(i,e,t){if(e.utf8seq===0){if(i<=127){t(i);return}for(let s=1;s<6;s+=1)if((i>>7-s&1)===0){e.utf8seq=s;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function ka(i){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};for(let a=0;a<i.length;a+=1)O_(i.charCodeAt(a),t,s);return new Uint8Array(e)}function VE(i){const e=[];return qE(i,t=>e.push(t)),new Uint8Array(e)}function Os(i){const e=[],t={queue:0,queuedBits:0},s=a=>{e.push(a)};return i.forEach(a=>Ob(a,t,s)),Ob(null,t,s),e.join("")}function GE(i){return Math.round(Date.now()/1e3)+i}function WE(){return Symbol("auth-callback")}const Ct=()=>typeof window<"u"&&typeof document<"u",ps={tested:!1,writable:!1},R_=()=>{if(!Ct())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ps.tested)return ps.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),ps.tested=!0,ps.writable=!0}catch{ps.tested=!0,ps.writable=!1}return ps.writable};function YE(i){const e={},t=new URL(i);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((a,o)=>{e[o]=a})}catch{}return t.searchParams.forEach((s,a)=>{e[a]=s}),e}const M_=i=>i?(...e)=>i(...e):(...e)=>fetch(...e),KE=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Ra=async(i,e,t)=>{await i.setItem(e,JSON.stringify(t))},ms=async(i,e)=>{const t=await i.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Et=async(i,e)=>{await i.removeItem(e)};class Yc{constructor(){this.promise=new Yc.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Yc.promiseConstructor=Promise;function Ad(i){const e=i.split(".");if(e.length!==3)throw new Oc("Invalid JWT structure");for(let s=0;s<e.length;s++)if(!BE.test(e[s]))throw new Oc("JWT not in base64url format");return{header:JSON.parse(Rb(e[0])),payload:JSON.parse(Rb(e[1])),signature:ka(e[2]),raw:{header:e[0],payload:e[1]}}}async function XE(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function QE(i,e){return new Promise((s,a)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await i(o);if(!e(o,null,c)){s(c);return}}catch(c){if(!e(o,c)){a(c);return}}})()})}function JE(i){return("0"+i.toString(16)).substr(-2)}function ZE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=t.length;let a="";for(let o=0;o<56;o++)a+=t.charAt(Math.floor(Math.random()*s));return a}return crypto.getRandomValues(e),Array.from(e,JE).join("")}async function eC(i){const t=new TextEncoder().encode(i),s=await crypto.subtle.digest("SHA-256",t),a=new Uint8Array(s);return Array.from(a).map(o=>String.fromCharCode(o)).join("")}async function tC(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const t=await eC(i);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sa(i,e,t=!1){const s=ZE();let a=s;t&&(a+="/PASSWORD_RECOVERY"),await Ra(i,`${e}-code-verifier`,a);const o=await tC(s);return[o,s===o?"plain":"s256"]}const nC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function iC(i){const e=i.headers.get(rf);if(!e||!e.match(nC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function sC(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function aC(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wa(i){if(!rC.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Od(){const i={};return new Proxy(i,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const s=t.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oC(i,e){return new Proxy(i,{get:(t,s,a)=>{if(s==="__isInsecureUserWarningProxy")return!0;if(typeof s=="symbol"){const o=s.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,s,a)}return!e.value&&typeof s=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,s,a)}})}function Mb(i){return JSON.parse(JSON.stringify(i))}const ws=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),lC=[502,503,504];async function kb(i){var e;if(!KE(i))throw new Ac(ws(i),0);if(lC.includes(i.status))throw new Ac(ws(i),i.status);let t;try{t=await i.json()}catch(o){throw new Hi(ws(o),o)}let s;const a=iC(i);if(a&&a.getTime()>=T_["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?s=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(s=t.error_code),s){if(s==="weak_password")throw new lf(ws(t),i.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(s==="session_not_found")throw new It}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new lf(ws(t),i.status,t.weak_password.reasons);throw new E_(ws(t),i.status||500,s)}const cC=(i,e,t,s)=>{const a={method:i,headers:e?.headers||{}};return i==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),a.body=JSON.stringify(s),Object.assign(Object.assign({},a),t))};async function be(i,e,t,s){var a;const o=Object.assign({},s?.headers);o[rf]||(o[rf]=T_["2024-01-01"].name),s?.jwt&&(o.Authorization=`Bearer ${s.jwt}`);const c=(a=s?.query)!==null&&a!==void 0?a:{};s?.redirectTo&&(c.redirect_to=s.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",d=await uC(i,e,t+h,{headers:o,noResolveJson:s?.noResolveJson},{},s?.body);return s?.xform?s?.xform(d):{data:Object.assign({},d),error:null}}async function uC(i,e,t,s,a,o){const c=cC(e,s,a,o);let h;try{h=await i(t,Object.assign({},c))}catch(d){throw console.error(d),new Ac(ws(d),0)}if(h.ok||await kb(h),s?.noResolveJson)return h;try{return await h.json()}catch(d){await kb(d)}}function Sn(i){var e;let t=null;fC(i)&&(t=Object.assign({},i),i.expires_at||(t.expires_at=GE(i.expires_in)));const s=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:t,user:s},error:null}}function Db(i){const e=Sn(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((t,s)=>t&&typeof s=="string",!0)&&(e.data.weak_password=i.weak_password),e}function Fi(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function hC(i){return{data:i,error:null}}function dC(i){const{action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o}=i,c=qa(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:t,hashed_token:s,redirect_to:a,verification_type:o},d=Object.assign({},c);return{data:{properties:h,user:d},error:null}}function Nb(i){return i}function fC(i){return i.access_token&&i.refresh_token&&i.expires_in}const _c=["global","local","others"];let kf=class{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=M_(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=_c[0]){if(_c.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_c.join(", ")}`);try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(de(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Fi})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=qa(e,["options"]),a=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(a.new_email=s?.newEmail,delete a.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:dC,redirectTo:t?.redirectTo})}catch(t){if(de(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Fi})}catch(t){if(de(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,a,o,c,h,d;try{const f={nextPage:null,lastPage:0,total:0},y=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Nb});if(y.error)throw y.error;const b=await y.json(),v=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,_=(d=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(S=>{const w=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(S.split(";")[1].split("=")[1]);f[`${T}Page`]=w}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},b),f),error:null}}catch(f){if(de(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){wa(e);try{return await be(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Fi})}catch(t){if(de(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){wa(e);try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Fi})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){wa(e);try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Fi})}catch(s){if(de(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){wa(e.userId);try{const{data:t,error:s}=await be(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:t,error:s}}catch(t){if(de(t))return{data:null,error:t};throw t}}async _deleteFactor(e){wa(e.userId),wa(e.id);try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(de(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,s,a,o,c,h,d;try{const f={nextPage:null,lastPage:0,total:0},y=await be(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&s!==void 0?s:"",per_page:(o=(a=e?.perPage)===null||a===void 0?void 0:a.toString())!==null&&o!==void 0?o:""},xform:Nb});if(y.error)throw y.error;const b=await y.json(),v=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,_=(d=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&d!==void 0?d:[];return _.length>0&&(_.forEach(S=>{const w=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(S.split(";")[1].split("=")[1]);f[`${T}Page`]=w}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},b),f),error:null}}catch(f){if(de(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(de(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await be(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(de(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await be(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(de(s))return{data:null,error:s};throw s}}async _deleteOAuthClient(e){try{return await be(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(de(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await be(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(de(t))return{data:null,error:t};throw t}}};function Pb(i={}){return{getItem:e=>i[e]||null,setItem:(e,t)=>{i[e]=t},removeItem:e=>{delete i[e]}}}const Ts={debug:!!(globalThis&&R_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Df extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}let k_=class extends Df{};class gC extends Df{}async function D_(i,e,t){Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const s=new globalThis.AbortController;return e>0&&setTimeout(()=>{s.abort(),Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async a=>{if(a){Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,a.name);try{return await t()}finally{Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,a.name)}}else{if(e===0)throw Ts.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new k_(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Ts.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}const Lb={};async function pC(i,e,t){var s;const a=(s=Lb[i])!==null&&s!==void 0?s:Promise.resolve(),o=Promise.race([a.catch(()=>null),e>=0?new Promise((c,h)=>{setTimeout(()=>{h(new gC(`Acquring process lock with name "${i}" timed out`))},e)}):null].filter(c=>c)).catch(c=>{if(c&&c.isAcquireTimeout)throw c;return null}).then(async()=>await t());return Lb[i]=o.catch(async c=>{if(c&&c.isAcquireTimeout)return await a,null;throw c}),await o}function mC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function N_(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function yC(i){return parseInt(i,16)}function bC(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,s=>s.toString(16).padStart(2,"0")).join("")}function vC(i){var e;const{chainId:t,domain:s,expirationTime:a,issuedAt:o=new Date,nonce:c,notBefore:h,requestId:d,resources:f,scheme:y,uri:b,version:v}=i;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!s)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!b)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const _=N_(i.address),S=y?`${y}://${s}`:s,w=i.statement?`${i.statement}
`:"",T=`${S} wants you to sign in with your Ethereum account:
${_}

${w}`;let C=`URI: ${b}
Version: ${v}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(a&&(C+=`
Expiration Time: ${a.toISOString()}`),h&&(C+=`
Not Before: ${h.toISOString()}`),d&&(C+=`
Request ID: ${d}`),f){let A=`
Resources:`;for(const j of f){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);A+=`
- ${j}`}C+=A}return`${T}
${C}`}class ft extends Error{constructor({message:e,code:t,cause:s,name:a}){var o;super(e,{cause:s}),this.__isWebAuthnError=!0,this.name=(o=a??(s instanceof Error?s.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=t}}class Mc extends ft{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function _C({error:i,options:e}){var t,s,a;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ft({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((t=o.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new ft({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ft({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new ft({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new ft({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new ft({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return o.pubKeyCredParams.filter(h=>h.type==="public-key").length===0?new ft({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new ft({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const c=window.location.hostname;if(P_(c)){if(o.rp.id!==c)return new ft({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ft({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new ft({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function xC({error:i,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ft({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new ft({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const s=window.location.hostname;if(P_(s)){if(t.rpId!==s)return new ft({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new ft({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new ft({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new ft({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class SC{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const wC=new SC;function TC(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:t,excludeCredentials:s}=i,a=qa(i,["challenge","user","excludeCredentials"]),o=ka(e).buffer,c=Object.assign(Object.assign({},t),{id:ka(t.id).buffer}),h=Object.assign(Object.assign({},a),{challenge:o,user:c});if(s&&s.length>0){h.excludeCredentials=new Array(s.length);for(let d=0;d<s.length;d++){const f=s[d];h.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:ka(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return h}function EC(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:t}=i,s=qa(i,["challenge","allowCredentials"]),a=ka(e).buffer,o=Object.assign(Object.assign({},s),{challenge:a});if(t&&t.length>0){o.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const h=t[c];o.allowCredentials[c]=Object.assign(Object.assign({},h),{id:ka(h.id).buffer,type:h.type||"public-key",transports:h.transports})}}return o}function CC(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i;return{id:i.id,rawId:i.id,response:{attestationObject:Os(new Uint8Array(i.response.attestationObject)),clientDataJSON:Os(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function jC(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const t=i,s=i.getClientExtensionResults(),a=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:Os(new Uint8Array(a.authenticatorData)),clientDataJSON:Os(new Uint8Array(a.clientDataJSON)),signature:Os(new Uint8Array(a.signature)),userHandle:a.userHandle?Os(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:s,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function P_(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function zb(){var i,e;return!!(Ct()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator?.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function AC(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Mc("Browser returned unexpected credential type",e)}:{data:null,error:new Mc("Empty credential response",e)}}catch(e){return{data:null,error:_C({error:e,options:i})}}}async function OC(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Mc("Browser returned unexpected credential type",e)}:{data:null,error:new Mc("Empty credential response",e)}}catch(e){return{data:null,error:xC({error:e,options:i})}}}const RC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},MC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function kc(...i){const e=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),t=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),s={};for(const a of i)if(a)for(const o in a){const c=a[o];if(c!==void 0)if(Array.isArray(c))s[o]=c;else if(t(c))s[o]=c;else if(e(c)){const h=s[o];e(h)?s[o]=kc(h,c):s[o]=kc(c)}else s[o]=c}return s}function kC(i,e){return kc(RC,i,e||{})}function DC(i,e){return kc(MC,i,e||{})}class NC{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:s,signal:a},o){try{const{data:c,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!c)return{data:null,error:h};const d=a??wC.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:f}=c.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${s}`),f.displayName||(f.displayName=f.name)}switch(c.webauthn.type){case"create":{const f=kC(c.webauthn.credential_options.publicKey,o?.create),{data:y,error:b}=await AC({publicKey:f,signal:d});return y?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:b}}case"request":{const f=DC(c.webauthn.credential_options.publicKey,o?.request),{data:y,error:b}=await OC(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:f,signal:d}));return y?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:b}}}}catch(c){return de(c)?{data:null,error:c}:{data:null,error:new Hi("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:t,webauthn:s}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:s})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!t)return{data:null,error:new za("rpId is required for WebAuthn authentication")};try{if(!zb())return{data:null,error:new Hi("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:s},signal:a},{request:o});if(!c)return{data:null,error:h};const{webauthn:d}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:d.type,rpId:t,rpOrigins:s,credential_response:d.credential_response}})}catch(c){return de(c)?{data:null,error:c}:{data:null,error:new Hi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:s=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},o){if(!t)return{data:null,error:new za("rpId is required for WebAuthn registration")};try{if(!zb())return{data:null,error:new Hi("Browser does not support WebAuthn",null)};const{data:c,error:h}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(y=>{var b;return(b=y.data)===null||b===void 0?void 0:b.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===e&&v.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y?.id}):void 0),{data:null,error:h};const{data:d,error:f}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:s},signal:a},{create:o});return d?this._verify({factorId:c.id,challengeId:d.challengeId,webauthn:{rpId:t,rpOrigins:s,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(c){return de(c)?{data:null,error:c}:{data:null,error:new Hi("Unexpected error in register",c)}}}}mC();const PC={url:PE,storageKey:LE,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:zE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Bb(i,e,t){return await t()}const Ta={};let Nf=class cf{get jwks(){var e,t;return(t=(e=Ta[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){Ta[this.storageKey]=Object.assign(Object.assign({},Ta[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=Ta[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ta[this.storageKey]=Object.assign(Object.assign({},Ta[this.storageKey]),{cachedAt:e})}constructor(e){var t,s,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},PC),e);if(this.storageKey=o.storageKey,this.instanceID=(t=cf.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,cf.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Ct()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new kf({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=M_(o.fetch),this.lock=o.lock||Bb,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:this.persistSession&&Ct()&&(!((s=globalThis?.navigator)===null||s===void 0)&&s.locks)?this.lock=D_:this.lock=Bb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new NC(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:R_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Pb(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Pb(this.memoryStorage)),Ct()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${w_}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},s="none";if(Ct()&&(t=YE(window.location.href),this._isImplicitGrantCallback(t)?s="implicit":await this._isPKCECallback(t)&&(s="pkce")),Ct()&&this.detectSessionInUrl&&s!=="none"){const{data:a,error:o}=await this._getSessionFromURL(t,s);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),A_(o)){const d=(e=o.details)===null||e===void 0?void 0:e.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:h}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return de(t)?this._returnResult({error:t}):this._returnResult({error:new Hi("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,s,a;try{const o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:Sn}),{data:c,error:h}=o;if(h||!c)return this._returnResult({data:{user:null,session:null},error:h});const d=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(o){if(de(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var t,s,a;try{let o;if("email"in e){const{email:y,password:b,options:v}=e;let _=null,S=null;this.flowType==="pkce"&&([_,S]=await Sa(this.storage,this.storageKey)),o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:y,password:b,data:(t=v?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:_,code_challenge_method:S},xform:Sn})}else if("phone"in e){const{phone:y,password:b,options:v}=e;o=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:b,data:(s=v?.data)!==null&&s!==void 0?s:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:Sn})}else throw new Zr("You must provide either an email or phone number and a password");const{data:c,error:h}=o;if(h||!c)return await Et(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:h});const d=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(o){if(await Et(this.storage,`${this.storageKey}-code-verifier`),de(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:c,options:h}=e;t=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Db})}else if("phone"in e){const{phone:o,password:c,options:h}=e;t=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Db})}else throw new Zr("You must provide either an email or phone number and a password");const{data:s,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!s||!s.session||!s.user){const o=new Ss;return this._returnResult({data:{user:null,session:null},error:o})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:a})}catch(t){if(de(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,s,a,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,s,a,o,c,h,d,f,y,b,v;let _,S;if("message"in e)_=e.message,S=e.signature;else{const{chain:w,wallet:T,statement:C,options:A}=e;let j;if(Ct())if(typeof T=="object")j=T;else{const L=window;if("ethereum"in L&&typeof L.ethereum=="object"&&"request"in L.ethereum&&typeof L.ethereum.request=="function")j=L.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!A?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=T}const D=new URL((t=A?.url)!==null&&t!==void 0?t:window.location.href),N=await j.request({method:"eth_requestAccounts"}).then(L=>L).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!N||N.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const q=N_(N[0]);let P=(s=A?.signInWithEthereum)===null||s===void 0?void 0:s.chainId;if(!P){const L=await j.request({method:"eth_chainId"});P=yC(L)}const U={domain:D.host,address:q,statement:C,uri:D.href,version:"1",chainId:P,nonce:(a=A?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(o=A?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(h=A?.signInWithEthereum)===null||h===void 0?void 0:h.expirationTime,notBefore:(d=A?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=A?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(y=A?.signInWithEthereum)===null||y===void 0?void 0:y.resources};_=vC(U),S=await j.request({method:"personal_sign",params:[bC(_),q]})}try{const{data:w,error:T}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:S},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Sn});if(T)throw T;if(!w||!w.session||!w.user){const C=new Ss;return this._returnResult({data:{user:null,session:null},error:C})}return w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),this._returnResult({data:Object.assign({},w),error:T})}catch(w){if(de(w))return this._returnResult({data:{user:null,session:null},error:w});throw w}}async signInWithSolana(e){var t,s,a,o,c,h,d,f,y,b,v,_;let S,w;if("message"in e)S=e.message,w=e.signature;else{const{chain:T,wallet:C,statement:A,options:j}=e;let D;if(Ct())if(typeof C=="object")D=C;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))D=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!j?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=C}const N=new URL((t=j?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in D&&D.signIn){const q=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j?.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),A?{statement:A}:null));let P;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")P=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)P=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)S=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),w=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${N.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(a=(s=j?.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=j?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((c=j?.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((h=j?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((d=j?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((f=j?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((b=(y=j?.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||b===void 0)&&b.length?["Resources",...j.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const q=await D.signMessage(new TextEncoder().encode(S),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=q}}try{const{data:T,error:C}=await be(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:Os(w)},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:Sn});if(C)throw C;if(!T||!T.session||!T.user){const A=new Ss;return this._returnResult({data:{user:null,session:null},error:A})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:C})}catch(T){if(de(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(e){const t=await ms(this.storage,`${this.storageKey}-code-verifier`),[s,a]=(t??"").split("/");try{const{data:o,error:c}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:Sn});if(await Et(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const h=new Ss;return this._returnResult({data:{user:null,session:null,redirectType:null},error:h})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:c})}catch(o){if(await Et(this.storage,`${this.storageKey}-code-verifier`),de(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:t,provider:s,token:a,access_token:o,nonce:c}=e,h=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:a,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Sn}),{data:d,error:f}=h;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!d||!d.session||!d.user){const y=new Ss;return this._returnResult({data:{user:null,session:null},error:y})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:d,error:f})}catch(t){if(de(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,s,a,o,c;try{if("email"in e){const{email:h,options:d}=e;let f=null,y=null;this.flowType==="pkce"&&([f,y]=await Sa(this.storage,this.storageKey));const{error:b}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(t=d?.data)!==null&&t!==void 0?t:{},create_user:(s=d?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:y},redirectTo:d?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:b})}if("phone"in e){const{phone:h,options:d}=e,{data:f,error:y}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(a=d?.data)!==null&&a!==void 0?a:{},create_user:(o=d?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(c=d?.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f?.message_id},error:y})}throw new Zr("You must provide either an email or phone number.")}catch(h){if(await Et(this.storage,`${this.storageKey}-code-verifier`),de(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async verifyOtp(e){var t,s;try{let a,o;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(s=e.options)===null||s===void 0?void 0:s.captchaToken);const{data:c,error:h}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:Sn});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const d=c.session,f=c.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),this._returnResult({data:{user:f,session:d},error:null})}catch(a){if(de(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(e){var t,s,a,o,c;try{let h=null,d=null;this.flowType==="pkce"&&([h,d]=await Sa(this.storage,this.storageKey));const f=await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&s!==void 0?s:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:h,code_challenge_method:d}),headers:this.headers,xform:hC});return!((o=f.data)===null||o===void 0)&&o.url&&Ct()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(h){if(await Et(this.storage,`${this.storageKey}-code-verifier`),de(h))return this._returnResult({data:null,error:h});throw h}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new It;const{error:a}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(e){if(de(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:s,type:a,options:o}=e,{error:c}=await be(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:s,type:a,options:o}=e,{data:c,error:h}=await be(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c?.message_id},error:h})}throw new Zr("You must provide either an email or phone number and a type")}catch(t){if(de(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await s,await t()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=t();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await ms(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const s=e.expires_at?e.expires_at*1e3-Date.now()<jd:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s){if(this.userStorage){const c=await ms(this.userStorage,this.storageKey+"-user");c?.user?e.user=c.user:e.user=Od()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=oC(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(-1,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Fi}):await this._useSession(async t=>{var s,a,o;const{data:c,error:h}=t;if(h)throw h;return!(!((s=c.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new It}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:Fi})})}catch(t){if(de(t))return j_(t)&&(await this._removeSession(),await Et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:a,error:o}=s;if(o)throw o;if(!a.session)throw new It;const c=a.session;let h=null,d=null;this.flowType==="pkce"&&e.email!=null&&([h,d]=await Sa(this.storage,this.storageKey));const{data:f,error:y}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:d}),jwt:c.access_token,xform:Fi});if(y)throw y;return c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(s){if(await Et(this.storage,`${this.storageKey}-code-verifier`),de(s))return this._returnResult({data:{user:null},error:s});throw s}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new It;const t=Date.now()/1e3;let s=t,a=!0,o=null;const{payload:c}=Ad(e.access_token);if(c.exp&&(s=c.exp,a=s<=t),a){const{data:h,error:d}=await this._callRefreshToken(e.refresh_token);if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!h)return{data:{user:null,session:null},error:null};o=h}else{const{data:h,error:d}=await this._getUser(e.access_token);if(d)throw d;o={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(t){if(de(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:c,error:h}=t;if(h)throw h;e=(s=c.session)!==null&&s!==void 0?s:void 0}if(!e?.refresh_token)throw new It;const{data:a,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(de(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Ct())throw new eo("No browser detected.");if(e.error||e.error_description||e.error_code)throw new eo(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new of("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new eo("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new of("No code detected.");const{data:A,error:j}=await this._exchangeCodeForSession(e.code);if(j)throw j;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:a,access_token:o,refresh_token:c,expires_in:h,expires_at:d,token_type:f}=e;if(!o||!h||!c||!f)throw new eo("No session defined in URL");const y=Math.round(Date.now()/1e3),b=parseInt(h);let v=y+b;d&&(v=parseInt(d));const _=v-y;_*1e3<=Oa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${b}s`);const S=v-b;y-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,v,y):y-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,v,y);const{data:w,error:T}=await this._getUser(o);if(T)throw T;const C={provider_token:s,provider_refresh_token:a,access_token:o,expires_in:b,expires_at:v,refresh_token:c,token_type:f,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(s){if(de(s))return this._returnResult({data:{session:null,redirectType:null},error:s});throw s}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ms(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return this._returnResult({error:o});const c=(s=a.session)===null||s===void 0?void 0:s.access_token;if(c){const{error:h}=await this.admin.signOut(c,e);if(h&&!(C_(h)&&(h.status===404||h.status===401||h.status===403)))return this._returnResult({error:h})}return e!=="others"&&(await this._removeSession(),await Et(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=WE(),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,a;try{const{data:{session:o},error:c}=t;if(c)throw c;await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let s=null,a=null;this.flowType==="pkce"&&([s,a]=await Sa(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:a,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(await Et(this.storage,`${this.storageKey}-code-verifier`),de(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:t,error:s}=await this.getUser();if(s)throw s;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:s,error:a}=await this._useSession(async o=>{var c,h,d,f,y;const{data:b,error:v}=o;if(v)throw v;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(d=e.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",_,{headers:this.headers,jwt:(y=(f=b.session)===null||f===void 0?void 0:f.access_token)!==null&&y!==void 0?y:void 0})});if(a)throw a;return Ct()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(s?.url),this._returnResult({data:{provider:e.provider,url:s?.url},error:null})}catch(s){if(de(s))return this._returnResult({data:{provider:e.provider,url:null},error:s});throw s}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var s;try{const{error:a,data:{session:o}}=t;if(a)throw a;const{options:c,provider:h,token:d,access_token:f,nonce:y}=e,b=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(s=o?.access_token)!==null&&s!==void 0?s:void 0,body:{provider:h,id_token:d,access_token:f,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Sn}),{data:v,error:_}=b;return _?this._returnResult({data:{user:null,session:null},error:_}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new Ss}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:_}))}catch(a){if(await Et(this.storage,`${this.storageKey}-code-verifier`),de(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:c}=t;if(c)throw c;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0})})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await QE(async a=>(a>0&&await XE(200*Math.pow(2,a-1)),this._debug(t,"refreshing attempt",a),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Sn})),(a,o)=>{const c=200*Math.pow(2,a);return o&&vc(o)&&Date.now()+c-s<Oa})}catch(s){if(this._debug(t,"error",s),de(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Ct()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e,t;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const a=await ms(this.storage,this.storageKey);if(a&&this.userStorage){let c=await ms(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await Ra(this.userStorage,this.storageKey+"-user",c)),a.user=(e=c?.user)!==null&&e!==void 0?e:Od()}else if(a&&!a.user&&!a.user){const c=await ms(this.storage,this.storageKey+"-user");c&&c?.user?(a.user=c.user,await Et(this.storage,this.storageKey+"-user"),await Ra(this.storage,this.storageKey,a)):a.user=Od()}if(this._debug(s,"session from storage",a),!this._isValidSession(a)){this._debug(s,"session is not valid"),a!==null&&await this._removeSession();return}const o=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<jd;if(this._debug(s,`session has${o?"":" not"} expired with margin of ${jd}s`),o){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),vc(c)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(a.access_token);!h&&c?.user?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(s,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(s,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(s,"error",a),console.error(a);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new It;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Yc;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new It;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const h={data:o.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(o){if(this._debug(a,"error",o),de(o)){const c={data:null,error:o};return vc(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,t,s=!0){const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,t)}catch(d){o.push(d)}});if(await Promise.all(c),o.length>0){for(let h=0;h<o.length;h+=1)console.error(o[h]);throw o[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Et(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),s=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!s&&t.user&&await Ra(this.userStorage,this.storageKey+"-user",{user:t.user});const a=Object.assign({},t);delete a.user;const o=Mb(a);await Ra(this.storage,this.storageKey,o)}else{const a=Mb(t);await Ra(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Et(this.storage,this.storageKey),await Et(this.storage,this.storageKey+"-code-verifier"),await Et(this.storage,this.storageKey+"-user"),this.userStorage&&await Et(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ct()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Oa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:s}}=t;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((s.expires_at*1e3-e)/Oa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Oa}ms, refresh threshold is ${af} ticks`),a<=af&&await this._callRefreshToken(s.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Df)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ct()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,s){const a=[`provider=${encodeURIComponent(t)}`];if(s?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s?.scopes&&a.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[o,c]=await Sa(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(h.toString())}if(s?.queryParams){const o=new URLSearchParams(s.queryParams);a.push(o.toString())}return s?.skipBrowserRedirect&&a.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;return o?this._returnResult({data:null,error:o}):await be(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token})})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,a;const{data:o,error:c}=t;if(c)return this._returnResult({data:null,error:c});const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:d,error:f}=await be(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(s=o?.session)===null||s===void 0?void 0:s.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&d.type==="totp"&&(!((a=d?.totp)===null||a===void 0)&&a.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),this._returnResult({data:d,error:null}))})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?CC(e.webauthn.credential_response):jC(e.webauthn.credential_response)})}:{code:e.code}),{data:h,error:d}=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});return d?this._returnResult({data:null,error:d}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),this._returnResult({data:h,error:d}))})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var s;const{data:a,error:o}=t;if(o)return this._returnResult({data:null,error:o});const c=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(s=a?.session)===null||s===void 0?void 0:s.access_token});if(c.error)return c;const{data:h}=c;if(h.type!=="webauthn")return{data:h,error:null};switch(h.webauthn.type){case"create":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:TC(h.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},h),{webauthn:Object.assign(Object.assign({},h.webauthn),{credential_options:Object.assign(Object.assign({},h.webauthn.credential_options),{publicKey:EC(h.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?this._returnResult({data:null,error:s}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:s}=await this.getUser();if(s)return{data:null,error:s};const a={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=t?.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:s},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ad(s.access_token);let c=null;o.aal&&(c=o.aal);let h=c;((t=(e=s.user.factors)===null||e===void 0?void 0:e.filter(y=>y.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(h="aal2");const f=o.amr||[];return{data:{currentLevel:c,nextLevel:h,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?await be(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:s.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new It})})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new It});const c=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&Ct()&&!t?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _denyAuthorization(e,t){try{return await this._useSession(async s=>{const{data:{session:a},error:o}=s;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new It});const c=await be(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:h=>({data:h,error:null})});return c.data&&c.data.redirect_url&&Ct()&&!t?.skipBrowserRedirect&&window.location.assign(c.data.redirect_url),c})}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;return s?this._returnResult({data:null,error:s}):t?await be(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new It})})}catch(e){if(de(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:s},error:a}=t;return a?this._returnResult({data:null,error:a}):s?(await be(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new It})})}catch(t){if(de(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let s=t.keys.find(h=>h.kid===e);if(s)return s;const a=Date.now();if(s=this.jwks.keys.find(h=>h.kid===e),s&&this.jwks_cached_at+UE>a)return s;const{data:o,error:c}=await be(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=a,s=o.keys.find(h=>h.kid===e),!s)?null:s}async getClaims(e,t={}){try{let s=e;if(!s){const{data:_,error:S}=await this.getSession();if(S||!_.session)return this._returnResult({data:null,error:S});s=_.session.access_token}const{header:a,payload:o,signature:c,raw:{header:h,payload:d}}=Ad(s);t?.allowExpired||sC(o.exp);const f=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!f){const{error:_}=await this.getUser(s);if(_)throw _;return{data:{claims:o,header:a,signature:c},error:null}}const y=aC(a.alg),b=await crypto.subtle.importKey("jwk",f,y,!0,["verify"]);if(!await crypto.subtle.verify(y,b,c,VE(`${h}.${d}`)))throw new Oc("Invalid JWT signature");return{data:{claims:o,header:a,signature:c},error:null}}catch(s){if(de(s))return this._returnResult({data:null,error:s});throw s}}};Nf.nextInstanceID={};const LC=kf,zC=Nf,BC=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:LC,AuthApiError:E_,AuthClient:zC,AuthError:za,AuthImplicitGrantRedirectError:eo,AuthInvalidCredentialsError:Zr,AuthInvalidJwtError:Oc,AuthInvalidTokenResponseError:Ss,AuthPKCEGrantCodeExchangeError:of,AuthRetryableFetchError:Ac,AuthSessionMissingError:It,AuthUnknownError:Hi,AuthWeakPasswordError:lf,CustomAuthError:fi,GoTrueAdminApi:kf,GoTrueClient:Nf,NavigatorLockAcquireTimeoutError:k_,SIGN_OUT_SCOPES:_c,isAuthApiError:C_,isAuthError:de,isAuthImplicitGrantRedirectError:A_,isAuthRetryableFetchError:vc,isAuthSessionMissingError:j_,isAuthWeakPasswordError:HE,lockInternals:Ts,navigatorLock:D_,processLock:pC},Symbol.toStringTag,{value:"Module"})),L_=xo(BC);var Ub;function UC(){if(Ub)return Vr;Ub=1,Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.SupabaseAuthClient=void 0;const i=L_;let e=class extends i.AuthClient{constructor(s){super(s)}};return Vr.SupabaseAuthClient=e,Vr}var Hb;function Fb(){if(Hb)return Gl;Hb=1,Object.defineProperty(Gl,"__esModule",{value:!0});const i=K0,e=t_(),t=c_,s=RE,a=kE(),o=DE(),c=NE(),h=UC();class d{constructor(y,b,v){var _,S,w;this.supabaseUrl=y,this.supabaseKey=b;const T=(0,c.validateSupabaseUrl)(y);if(!b)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",T),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",T),this.storageUrl=new URL("storage/v1",T),this.functionsUrl=new URL("functions/v1",T);const C=`sb-${T.hostname.split(".")[0]}-auth-token`,A={db:a.DEFAULT_DB_OPTIONS,realtime:a.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},a.DEFAULT_AUTH_OPTIONS),{storageKey:C}),global:a.DEFAULT_GLOBAL_OPTIONS},j=(0,c.applySettingDefaults)(v??{},A);this.storageKey=(_=j.auth.storageKey)!==null&&_!==void 0?_:"",this.headers=(S=j.global.headers)!==null&&S!==void 0?S:{},j.accessToken?(this.accessToken=j.accessToken,this.auth=new Proxy({},{get:(D,N)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(N)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((w=j.auth)!==null&&w!==void 0?w:{},this.headers,j.global.fetch),this.fetch=(0,o.fetchWithAuth)(b,this._getAccessToken.bind(this),j.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},j.realtime)),this.accessToken&&this.accessToken().then(D=>this.realtime.setAuth(D)).catch(D=>console.warn("Failed to set initial Realtime auth token:",D)),this.rest=new e.PostgrestClient(new URL("rest/v1",T).href,{headers:this.headers,schema:j.db.schema,fetch:this.fetch}),this.storage=new s.StorageClient(this.storageUrl.href,this.headers,this.fetch,v?.storage),j.accessToken||this._listenForAuthEvents()}get functions(){return new i.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(y){return this.rest.from(y)}schema(y){return this.rest.schema(y)}rpc(y,b={},v={head:!1,get:!1,count:void 0}){return this.rest.rpc(y,b,v)}channel(y,b={config:{}}){return this.realtime.channel(y,b)}getChannels(){return this.realtime.getChannels()}removeChannel(y){return this.realtime.removeChannel(y)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var y,b;if(this.accessToken)return await this.accessToken();const{data:v}=await this.auth.getSession();return(b=(y=v.session)===null||y===void 0?void 0:y.access_token)!==null&&b!==void 0?b:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:y,persistSession:b,detectSessionInUrl:v,storage:_,userStorage:S,storageKey:w,flowType:T,lock:C,debug:A,throwOnError:j},D,N){const q={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new h.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},q),D),storageKey:w,autoRefreshToken:y,persistSession:b,detectSessionInUrl:v,storage:_,userStorage:S,flowType:T,lock:C,debug:A,throwOnError:j,fetch:N,hasCustomAuthorizationHeader:Object.keys(this.headers).some(P=>P.toLowerCase()==="authorization")})}_initRealtimeClient(y){return new t.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},y),{params:Object.assign({apikey:this.supabaseKey},y?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((b,v)=>{this._handleTokenChanged(b,"CLIENT",v?.access_token)})}_handleTokenChanged(y,b,v){(y==="TOKEN_REFRESHED"||y==="SIGNED_IN")&&this.changedAccessToken!==v?(this.changedAccessToken=v,this.realtime.setAuth(v)):y==="SIGNED_OUT"&&(this.realtime.setAuth(),b=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Gl.default=d,Gl}var Ib;function HC(){return Ib||(Ib=1,(function(i){var e=si&&si.__createBinding||(Object.create?(function(y,b,v,_){_===void 0&&(_=v);var S=Object.getOwnPropertyDescriptor(b,v);(!S||("get"in S?!b.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return b[v]}}),Object.defineProperty(y,_,S)}):(function(y,b,v,_){_===void 0&&(_=v),y[_]=b[v]})),t=si&&si.__exportStar||function(y,b){for(var v in y)v!=="default"&&!Object.prototype.hasOwnProperty.call(b,v)&&e(b,y,v)},s=si&&si.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(i,"__esModule",{value:!0}),i.createClient=i.SupabaseClient=i.FunctionRegion=i.FunctionsError=i.FunctionsRelayError=i.FunctionsFetchError=i.FunctionsHttpError=i.PostgrestError=void 0;const a=s(Fb());t(L_,i);var o=t_();Object.defineProperty(i,"PostgrestError",{enumerable:!0,get:function(){return o.PostgrestError}});var c=K0;Object.defineProperty(i,"FunctionsHttpError",{enumerable:!0,get:function(){return c.FunctionsHttpError}}),Object.defineProperty(i,"FunctionsFetchError",{enumerable:!0,get:function(){return c.FunctionsFetchError}}),Object.defineProperty(i,"FunctionsRelayError",{enumerable:!0,get:function(){return c.FunctionsRelayError}}),Object.defineProperty(i,"FunctionsError",{enumerable:!0,get:function(){return c.FunctionsError}}),Object.defineProperty(i,"FunctionRegion",{enumerable:!0,get:function(){return c.FunctionRegion}}),t(c_,i);var h=Fb();Object.defineProperty(i,"SupabaseClient",{enumerable:!0,get:function(){return s(h).default}});const d=(y,b,v)=>new a.default(y,b,v);i.createClient=d;function f(){if(typeof window<"u"||typeof process>"u")return!1;const y=process.version;if(y==null)return!1;const b=y.match(/^v(\d+)\./);return b?parseInt(b[1],10)<=18:!1}f()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(si)),si}var z_=HC();const B_=yf(z_),FC=Kw({__proto__:null,default:B_},[z_]),{PostgrestError:xM,FunctionsHttpError:SM,FunctionsFetchError:wM,FunctionsRelayError:TM,FunctionsError:EM,FunctionRegion:CM,SupabaseClient:jM,createClient:IC,GoTrueAdminApi:AM,GoTrueClient:OM,AuthAdminApi:RM,AuthClient:MM,navigatorLock:kM,NavigatorLockAcquireTimeoutError:DM,lockInternals:NM,processLock:PM,SIGN_OUT_SCOPES:LM,AuthError:zM,AuthApiError:BM,AuthUnknownError:UM,CustomAuthError:HM,AuthSessionMissingError:FM,AuthInvalidTokenResponseError:IM,AuthInvalidCredentialsError:qM,AuthImplicitGrantRedirectError:$M,AuthPKCEGrantCodeExchangeError:VM,AuthRetryableFetchError:GM,AuthWeakPasswordError:WM,AuthInvalidJwtError:YM,isAuthError:KM,isAuthApiError:XM,isAuthSessionMissingError:QM,isAuthImplicitGrantRedirectError:JM,isAuthRetryableFetchError:ZM,isAuthWeakPasswordError:ek,RealtimePresence:tk,RealtimeChannel:nk,RealtimeClient:ik,REALTIME_LISTEN_TYPES:sk,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:ak,REALTIME_PRESENCE_LISTEN_EVENTS:rk,REALTIME_SUBSCRIBE_STATES:ok,REALTIME_CHANNEL_STATES:lk}=B_||FC,qC="https://gimldhrqyzpgaxfueokt.supabase.co",$C="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdpbWxkaHJxeXpwZ2F4ZnVlb2t0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUzNzAwMzksImV4cCI6MjA4MDk0NjAzOX0.jGLt8yyu9psWRus5ksfY-dBvhTfgF3o5SHx2Ngwy0VE",Le=IC(qC,$C),U_=k.createContext(void 0);function VC({children:i}){const[e,t]=k.useState(null),[s,a]=k.useState(null),[o,c]=k.useState(!0);k.useEffect(()=>{Le.auth.getSession().then(({data:{session:b}})=>{a(b),t(b?.user??null),c(!1)});const{data:{subscription:y}}=Le.auth.onAuthStateChange((b,v)=>{a(v),t(v?.user??null),c(!1)});return()=>y.unsubscribe()},[]);const h=async(y,b)=>{const{error:v}=await Le.auth.signUp({email:y,password:b});return{error:v}},d=async(y,b)=>{const{error:v}=await Le.auth.signInWithPassword({email:y,password:b});return{error:v}},f=async()=>{await Le.auth.signOut()};return p.jsx(U_.Provider,{value:{user:e,session:s,loading:o,signUp:h,signIn:d,signOut:f},children:i})}function Co(){const i=k.useContext(U_);if(i===void 0)throw new Error("useAuth must be used within an AuthProvider");return i}const GC=()=>{const i=An(),{signOut:e}=Co(),t=a=>i.pathname===a,s=async()=>{await e()};return p.jsx("nav",{className:"no-print",style:{background:"#020617",borderBottom:"1px solid #1f2937",padding:"0 24px"},children:p.jsxs("div",{style:{maxWidth:1400,margin:"0 auto",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[p.jsxs("div",{style:{display:"flex",gap:8},children:[p.jsx(so,{to:"/",style:{padding:"16px 20px",textDecoration:"none",color:t("/")?"#38bdf8":"#e5e7eb",borderBottom:t("/")?"2px solid #38bdf8":"2px solid transparent",fontSize:14,fontWeight:500,transition:"all 0.2s"},children:"Create Invoice"}),p.jsx(so,{to:"/preview",style:{padding:"16px 20px",textDecoration:"none",color:t("/preview")?"#38bdf8":"#e5e7eb",borderBottom:t("/preview")?"2px solid #38bdf8":"2px solid transparent",fontSize:14,fontWeight:500,transition:"all 0.2s"},children:"Preview"}),p.jsx(so,{to:"/dashboard",style:{padding:"16px 20px",textDecoration:"none",color:t("/dashboard")?"#38bdf8":"#e5e7eb",borderBottom:t("/dashboard")?"2px solid #38bdf8":"2px solid transparent",fontSize:14,fontWeight:500,transition:"all 0.2s"},children:"Dashboard"})]}),p.jsx("button",{onClick:s,style:{padding:"8px 16px",fontSize:14,fontWeight:500,color:"#e5e7eb",backgroundColor:"transparent",border:"1px solid #374151",borderRadius:6,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor="#1f2937",a.currentTarget.style.borderColor="#4b5563"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="transparent",a.currentTarget.style.borderColor="#374151"},children:"Logout"})]})})};function tc({children:i}){const{user:e,loading:t}=Co();return t?p.jsxs("div",{style:Rd.loadingContainer,children:[p.jsx("div",{style:Rd.spinner}),p.jsx("p",{style:Rd.loadingText,children:"Loading..."})]}):e?p.jsx(p.Fragment,{children:i}):p.jsx(y0,{to:"/login",replace:!0})}const Rd={loadingContainer:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5"},spinner:{width:"40px",height:"40px",border:"3px solid #e0e0e0",borderTopColor:"#0066cc",borderRadius:"50%",animation:"spin 1s linear infinite"},loadingText:{marginTop:"16px",fontSize:"16px",color:"#666"}};function WC(){const[i,e]=k.useState(!1),[t,s]=k.useState(""),[a,o]=k.useState(""),[c,h]=k.useState(""),[d,f]=k.useState(""),[y,b]=k.useState(!1),[v,_]=k.useState(""),{signIn:S,signUp:w}=Co(),T=async C=>{if(C.preventDefault(),f(""),_(""),!t||!a){f("Please fill in all fields");return}if(i&&a!==c){f("Passwords do not match");return}if(a.length<6){f("Password must be at least 6 characters");return}b(!0);try{if(i){const{error:A}=await w(t,a);A?f(A.message):(_("Account created successfully! You can now sign in."),e(!1),o(""),h(""))}else{const{error:A}=await S(t,a);A&&f(A.message)}}catch{f("An unexpected error occurred")}finally{b(!1)}};return p.jsx("div",{style:rt.container,children:p.jsxs("div",{style:rt.card,children:[p.jsxs("div",{style:rt.header,children:[p.jsx("h1",{style:rt.title,children:"Invoice Manager"}),p.jsx("p",{style:rt.subtitle,children:i?"Create your account":"Sign in to your account"})]}),p.jsxs("form",{onSubmit:T,style:rt.form,children:[d&&p.jsx("div",{style:rt.error,children:d}),v&&p.jsx("div",{style:rt.success,children:v}),p.jsxs("div",{style:rt.inputGroup,children:[p.jsx("label",{style:rt.label,children:"Email"}),p.jsx("input",{type:"email",value:t,onChange:C=>s(C.target.value),style:rt.input,placeholder:"Enter your email",disabled:y})]}),p.jsxs("div",{style:rt.inputGroup,children:[p.jsx("label",{style:rt.label,children:"Password"}),p.jsx("input",{type:"password",value:a,onChange:C=>o(C.target.value),style:rt.input,placeholder:"Enter your password",disabled:y})]}),i&&p.jsxs("div",{style:rt.inputGroup,children:[p.jsx("label",{style:rt.label,children:"Confirm Password"}),p.jsx("input",{type:"password",value:c,onChange:C=>h(C.target.value),style:rt.input,placeholder:"Confirm your password",disabled:y})]}),p.jsx("button",{type:"submit",style:{...rt.submitButton,opacity:y?.7:1,cursor:y?"not-allowed":"pointer"},disabled:y,children:y?"Please wait...":i?"Create Account":"Sign In"})]}),p.jsxs("div",{style:rt.footer,children:[p.jsx("p",{style:rt.footerText,children:i?"Already have an account?":"Don't have an account?"}),p.jsx("button",{type:"button",onClick:()=>{e(!i),f(""),_("")},style:rt.switchButton,disabled:y,children:i?"Sign In":"Create Account"})]})]})})}const rt={container:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",padding:"20px"},card:{backgroundColor:"#ffffff",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",padding:"40px",width:"100%",maxWidth:"420px"},header:{textAlign:"center",marginBottom:"32px"},title:{fontSize:"28px",fontWeight:"700",color:"#1a1a2e",margin:"0 0 8px 0"},subtitle:{fontSize:"16px",color:"#666",margin:0},form:{display:"flex",flexDirection:"column",gap:"20px"},inputGroup:{display:"flex",flexDirection:"column",gap:"6px"},label:{fontSize:"14px",fontWeight:"500",color:"#333"},input:{padding:"12px 16px",fontSize:"16px",border:"1px solid #ddd",borderRadius:"8px",outline:"none",transition:"border-color 0.2s, box-shadow 0.2s",backgroundColor:"#fff",color:"#333"},submitButton:{padding:"14px 24px",fontSize:"16px",fontWeight:"600",color:"#fff",backgroundColor:"#0066cc",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s",marginTop:"8px"},footer:{marginTop:"24px",textAlign:"center",paddingTop:"24px",borderTop:"1px solid #eee"},footerText:{fontSize:"14px",color:"#666",margin:"0 0 12px 0"},switchButton:{padding:"10px 20px",fontSize:"14px",fontWeight:"500",color:"#0066cc",backgroundColor:"transparent",border:"1px solid #0066cc",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s, color 0.2s"},error:{padding:"12px 16px",backgroundColor:"#fee2e2",color:"#dc2626",borderRadius:"8px",fontSize:"14px"},success:{padding:"12px 16px",backgroundColor:"#dcfce7",color:"#16a34a",borderRadius:"8px",fontSize:"14px"}},YC=async()=>{const e=`INV-${new Date().getFullYear()}-`,{data:t}=await Le.from("invoices").select("invoice_no").like("invoice_no",`${e}%`).order("invoice_no",{ascending:!1}).limit(1).maybeSingle();if(t){const a=parseInt(t.invoice_no.split("-")[2])+1;return`${e}${String(a).padStart(3,"0")}`}return`${e}001`},KC=async i=>{try{const{client:e,meta:t,items:s,vatRate:a,discount:o,notes:c}=i,h=s.reduce((T,C)=>T+C.qty*C.unitPrice,0),d=Math.max(h-o,0),f=d*a/100,y=d+f;let b=null;if(e.name||e.email){const{data:T}=await Le.from("clients").select("id").eq("email",e.email).maybeSingle();if(T)b=T.id;else{const{data:C,error:A}=await Le.from("clients").insert({name:e.name,company:e.company,address:e.address,phone:e.phone,email:e.email,site_address:e.siteAddress}).select().single();if(A)throw A;b=C.id}}const v=await YC(),{data:_,error:S}=await Le.from("invoices").insert({invoice_no:v,client_id:b,project_name:t.projectName,invoice_date:t.date,due_date:t.dueDate||null,subtotal:h,discount:o,vat_rate:a,vat_amount:f,total:y,notes:c,status:"draft",order_class:t.orderClass||"B2B"}).select().single();if(S)throw S;const w=_.id;for(let T=0;T<s.length;T++){const C=s[T],A=C.qty*C.unitPrice,{data:j,error:D}=await Le.from("invoice_items").insert({invoice_id:w,category:C.category,code:C.code,description:C.description,dimensions:C.dimensions,qty:C.qty,unit_price:C.unitPrice,line_total:A,image_url:C.image||null,sort_order:T}).select().single();if(D)throw D;if(C.materials&&C.materials.length>0){const N=C.materials.map(P=>({invoice_item_id:j.id,material_name:P.name,unit:P.unit,qty_per_item:P.qty,total_qty:P.qty*C.qty,unit_cost:P.cost,total_cost:P.cost*P.qty*C.qty})),{error:q}=await Le.from("item_materials").insert(N);if(q)throw q}}return{success:!0,invoiceId:w,invoiceNo:v}}catch(e){return console.error("Error saving invoice:",e),console.error("Error details:",{message:e?.message,details:e?.details,hint:e?.hint,code:e?.code}),{success:!1,error:e}}},H_=async i=>{try{const{data:e,error:t}=await Le.from("invoices").select(`
        *,
        clients (
          name,
          company,
          address,
          phone,
          email,
          site_address
        )
      `).eq("id",i).single();if(t)throw t;const{data:s,error:a}=await Le.from("invoice_items").select("*").eq("invoice_id",i).order("sort_order",{ascending:!0});if(a)throw a;const o=await Promise.all(s.map(async c=>{const{data:h,error:d}=await Le.from("item_materials").select("*").eq("invoice_item_id",c.id);if(d)throw d;return{...c,materials:h||[]}}));return{success:!0,data:{invoice:e,items:o}}}catch(e){return console.error("Error fetching invoice details:",e),{success:!1,error:e}}},XC=({toast:i,onClose:e})=>{const[t,s]=k.useState(!1);k.useEffect(()=>{const d=i.duration||5e3,f=setTimeout(()=>s(!0),d-300),y=setTimeout(()=>e(i.id),d);return()=>{clearTimeout(f),clearTimeout(y)}},[i.id,i.duration,e]);const a=()=>{s(!0),setTimeout(()=>e(i.id),300)},o={success:{bg:"#065f46",border:"#10b981",icon:"#34d399"},error:{bg:"#7f1d1d",border:"#ef4444",icon:"#f87171"},info:{bg:"#1e3a5f",border:"#3b82f6",icon:"#60a5fa"},warning:{bg:"#78350f",border:"#f59e0b",icon:"#fbbf24"}},c={success:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",error:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",info:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",warning:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},h=o[i.type];return p.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:12,padding:"16px 20px",background:h.bg,border:`1px solid ${h.border}`,borderRadius:12,boxShadow:"0 10px 40px rgba(0,0,0,0.4)",minWidth:320,maxWidth:420,animation:t?"slideOut 0.3s ease-out forwards":"slideIn 0.3s ease-out"},children:[p.jsx("svg",{style:{width:24,height:24,flexShrink:0,marginTop:2},fill:"none",stroke:h.icon,viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:c[i.type]})}),p.jsxs("div",{style:{flex:1},children:[p.jsx("div",{style:{fontWeight:600,color:"#fff",fontSize:15,marginBottom:i.message?4:0},children:i.title}),i.message&&p.jsx("div",{style:{color:"rgba(255,255,255,0.8)",fontSize:14,lineHeight:1.5},children:i.message})]}),p.jsx("button",{onClick:a,style:{background:"transparent",border:"none",color:"rgba(255,255,255,0.6)",cursor:"pointer",padding:4,marginTop:-4,marginRight:-8,transition:"color 0.2s"},onMouseEnter:d=>d.currentTarget.style.color="#fff",onMouseLeave:d=>d.currentTarget.style.color="rgba(255,255,255,0.6)",children:p.jsx("svg",{style:{width:20,height:20},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Pf=({toasts:i,onClose:e})=>i.length===0?null:p.jsxs(p.Fragment,{children:[p.jsx("style",{children:`
          @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
          }
          @keyframes slideOut {
            from { transform: translateX(0); opacity: 1; }
            to { transform: translateX(100%); opacity: 0; }
          }
        `}),p.jsx("div",{style:{position:"fixed",top:20,right:20,zIndex:9999,display:"flex",flexDirection:"column",gap:12},children:i.map(t=>p.jsx(XC,{toast:t,onClose:e},t.id))})]}),Lf=()=>{const[i,e]=k.useState([]),t=(d,f,y,b)=>{const v=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;e(_=>[..._,{id:v,type:d,title:f,message:y,duration:b}])};return{toasts:i,removeToast:d=>{e(f=>f.filter(y=>y.id!==d))},success:(d,f,y)=>t("success",d,f,y),error:(d,f,y)=>t("error",d,f,y),info:(d,f,y)=>t("info",d,f,y),warning:(d,f,y)=>t("warning",d,f,y)}},qb=({isOpen:i,title:e,message:t,confirmText:s="OK",cancelText:a="Cancel",confirmVariant:o="primary",onConfirm:c,onCancel:h})=>{const d=k.useRef(null),f=k.useRef(null);if(k.useEffect(()=>(i?(f.current?.focus(),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.body.style.overflow=""}),[i]),k.useEffect(()=>{const v=_=>{i&&_.key==="Escape"&&h()};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[i,h]),!i)return null;const y=v=>{v.target===v.currentTarget&&h()},b=o==="danger"?{background:"linear-gradient(135deg, #991b1b 0%, #dc2626 100%)",color:"#fff"}:{background:"linear-gradient(135deg, #0369a1 0%, #0ea5e9 100%)",color:"#fff"};return p.jsxs(p.Fragment,{children:[p.jsx("style",{children:`
          @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          @keyframes modalSlideIn {
            from { transform: scale(0.95) translateY(-10px); opacity: 0; }
            to { transform: scale(1) translateY(0); opacity: 1; }
          }
        `}),p.jsx("div",{onClick:y,style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,animation:"modalFadeIn 0.2s ease-out",padding:20},children:p.jsxs("div",{ref:d,style:{background:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)",border:"1px solid #334155",borderRadius:16,padding:0,maxWidth:420,width:"100%",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5)",animation:"modalSlideIn 0.25s ease-out"},children:[p.jsxs("div",{style:{padding:"24px 24px 16px",borderBottom:"1px solid #334155"},children:[p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:12},children:[p.jsx("div",{style:{width:40,height:40,borderRadius:10,background:o==="danger"?"rgba(220, 38, 38, 0.15)":"rgba(14, 165, 233, 0.15)",display:"flex",alignItems:"center",justifyContent:"center"},children:o==="danger"?p.jsx("svg",{width:"22",height:"22",fill:"none",stroke:"#f87171",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}):p.jsx("svg",{width:"22",height:"22",fill:"none",stroke:"#38bdf8",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),p.jsx("h2",{style:{margin:0,color:"#f1f5f9",fontSize:20,fontWeight:600},children:e})]}),p.jsx("p",{style:{margin:0,color:"#94a3b8",fontSize:15,lineHeight:1.6,paddingLeft:52},children:t})]}),p.jsxs("div",{style:{padding:"16px 24px",display:"flex",justifyContent:"flex-end",gap:12},children:[p.jsx("button",{onClick:h,style:{padding:"10px 20px",background:"#374151",border:"none",borderRadius:8,color:"#e5e7eb",fontSize:14,fontWeight:500,cursor:"pointer",transition:"background 0.2s"},onMouseEnter:v=>v.currentTarget.style.background="#4b5563",onMouseLeave:v=>v.currentTarget.style.background="#374151",children:a}),p.jsx("button",{ref:f,onClick:c,style:{padding:"10px 24px",border:"none",borderRadius:8,fontSize:14,fontWeight:600,cursor:"pointer",transition:"transform 0.15s, box-shadow 0.15s",...b},onMouseEnter:v=>{v.currentTarget.style.transform="translateY(-1px)",v.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseLeave:v=>{v.currentTarget.style.transform="translateY(0)",v.currentTarget.style.boxShadow="none"},children:s})]})]})})]})},QC=()=>{const i=Lf(),[e]=k.useState({name:"Meduza Studio Works",logoUrl:"/Company%20Logo.svg",address:"Tolon, El Sayeda Zeinab, Cairo , Egypt",phone:"+20 1146700228 / +20 1018705558",email:"info@meduzafurniture.com"}),[t,s]=k.useState({name:"Client Name",company:"Client Company",address:"Client Billing Address",phone:"+20 100 000 0000",email:"client@example.com",siteAddress:"Site / Delivery Address"}),[a,o]=k.useState({invoiceNo:"",date:new Date().toISOString().slice(0,10),dueDate:"",projectName:"Project Name",orderClass:"B2B"}),[c,h]=k.useState(14),[d,f]=k.useState(0),[y,b]=k.useState([]),[v,_]=k.useState(""),[S,w]=k.useState({mouskiRate:24e3,zanRate:36e3,aroRate:85e3,beechPineRate:78e3,mdf10RatePerSheet:650,mdf16RatePerSheet:1050,mdf21RatePerSheet:1350,blockboard18RatePerSheet:1650,walnutVeneerRatePerM2:310,oakVeneerRatePerM2:210,beechVeneerRatePerM2:210,hplRatePerSheet:650,lplRatePerSheet:350,finishPuMatteRatePerM2:350,finishPuHighGlossRatePerM2:420,finishNcRatePerM2:280,finishOilRatePerM2:250,glass6RatePerM2:1350,glass10RatePerM2:1750,marbleRatePerM2:4500,ply25RatePerSheet:200,ply27RatePerSheet:390,ply8RatePerSheet:1050,ply12RatePerSheet:1450,ply18RatePerSheet:2050,foamboardRatePerSheet:2100,upholsterySeatOnly:500,upholsteryFull:700,upholsteryArmFull:900,upholsterySofaLowPerM:1250,upholsterySofaHighPerM:1750,fabricLowRate:220,fabricHighRate:450,steelChassisCostPerPiece:1500,laborRatePerHour:160,defaultAccessories:1500,drawerRunnerRate:310,doorHingeRate:89,defaultProfitMargin:30,compliancePerItem:80}),[T,C]=k.useState(!1),[A,j]=k.useState(!1),[D,N]=k.useState(null),[q,P]=k.useState(!1),[U,L]=k.useState(null),[Z,W]=k.useState(!1),[B,G]=k.useState(null),[ae,re]=k.useState(!1),[H,ee]=k.useState(null),[ue,me]=k.useState(!1),[we,R]=k.useState(null),[K,ne]=k.useState(!1),[se,fe]=k.useState(!1);k.useEffect(()=>{localStorage.removeItem("invoice-preview");const J=localStorage.getItem("invoice-draft");if(J)try{const oe=JSON.parse(J);oe.client&&s(oe.client),oe.meta&&o(oe.meta),oe.items&&oe.items.length>0&&b(oe.items),oe.vatRate!==void 0&&h(oe.vatRate),oe.discount!==void 0&&f(oe.discount),oe.notes!==void 0&&_(oe.notes),oe.pricingConfig&&w(oe.pricingConfig)}catch(oe){console.error("Failed to load draft:",oe)}},[]),k.useEffect(()=>{const J={company:e,client:t,meta:a,items:y,vatRate:c,discount:d,notes:v,pricingConfig:S};localStorage.setItem("invoice-draft",JSON.stringify(J))},[e,t,a,y,c,d,v,S]);const ge=(J,oe,xe)=>{b(Gt=>Gt.map(Xi=>Xi.id===J?{...Xi,[oe]:oe==="qty"||oe==="unitPrice"?Number(xe||0):xe}:Xi))},Oe=()=>{const J={id:Date.now(),category:"Custom furniture",code:"",description:"",dimensions:"",qty:1,unitPrice:0};b(oe=>[...oe,J])},ke=J=>{const oe={id:Date.now(),category:J,code:J,description:"",dimensions:"",qty:1,unitPrice:0};b(xe=>[...xe,oe])},Ge=J=>{b(oe=>oe.filter(xe=>xe.id!==J))},On=(J,oe)=>{const xe=oe.target.files?.[0];if(!xe)return;const Gt=new FileReader;Gt.onload=()=>{b(Xi=>Xi.map(Ls=>Ls.id===J?{...Ls,image:Gt.result}:Ls))},Gt.readAsDataURL(xe)},et=()=>({company:e,client:t,meta:a,items:y,vatRate:c,discount:d,notes:v}),Yi=()=>{const J=et();localStorage.setItem("saved-invoice",JSON.stringify(J)),i.success("Invoice Saved","Invoice saved locally")},Ki=()=>{localStorage.removeItem("invoice-draft"),localStorage.removeItem("invoice-preview"),s({name:"Client Name",company:"Client Company",address:"Client Billing Address",phone:"+20 100 000 0000",email:"client@example.com",siteAddress:"Site / Delivery Address"}),o({invoiceNo:"",date:new Date().toISOString().slice(0,10),dueDate:"",projectName:"Project Name",orderClass:"B2B"}),b([]),h(14),f(0),_("")},ie=()=>{ne(!0)},vt=()=>{ne(!1),Ki()},Vt=()=>{fe(!0)},Rn=async()=>{fe(!1);const J=et(),oe=await KC(J);oe.success?(i.success(`Invoice ${oe.invoiceNo} Saved!`,"View analytics in the Dashboard tab.",6e3),Ki()):(i.error("Save Failed","Failed to save invoice to database. Check the console for details."),console.error("Save failed:",oe.error))},Ao=()=>{const J=localStorage.getItem("saved-invoice");if(!J){i.warning("No Saved Invoice","No locally saved invoice found.");return}try{const oe=JSON.parse(J),xe=oe.items.map(Gt=>({category:Gt.category||"Custom furniture",...Gt}));s(oe.client),o(oe.meta),b(xe),h(oe.vatRate),f(oe.discount),_(oe.notes),i.success("Invoice Loaded","Invoice data restored from local storage.")}catch{i.error("Load Failed","Saved invoice data is corrupted.")}},Ga=J=>{D&&(b(oe=>oe.map(xe=>xe.id===D?{...xe,unitPrice:Math.round(J.price),description:J.description,dimensions:J.dimensions,materials:J.materials??xe.materials}:xe)),j(!1))},Wa=J=>{U&&(b(oe=>oe.map(xe=>xe.id===U?{...xe,unitPrice:Math.round(J.price),description:J.description,materials:J.materials??xe.materials}:xe)),P(!1))},Ya=J=>{we&&(b(oe=>oe.map(xe=>xe.id===we?{...xe,unitPrice:Math.round(J.price),description:J.description,dimensions:J.dimensions||xe.dimensions,materials:J.materials??xe.materials}:xe)),me(!1))},eu=J=>{B&&(b(oe=>oe.map(xe=>xe.id===B?{...xe,unitPrice:Math.round(J.price),description:J.description,dimensions:J.dimensions||xe.dimensions,materials:J.materials??xe.materials}:xe)),W(!1))},tu=J=>{H&&(b(oe=>oe.map(xe=>xe.id===H?{...xe,unitPrice:Math.round(J.price),description:J.description,materials:J.materials??xe.materials}:xe)),re(!1))},kt=J=>{J.category==="Door"?(N(J.id),j(!0)):J.category==="Dining chair"||J.category==="Arm chair"||J.category==="Bar stool"||J.category==="Bench"?(L(J.id),P(!0)):J.category==="Dining table"||J.category==="Coffee table"||J.category==="Side table"||J.category==="Console table"?(G(J.id),W(!0)):J.category==="Sofa straight"||J.category==="Sofa curved"?(ee(J.id),re(!0)):J.category==="Cabinet"?(R(J.id),me(!0)):i.info("Costing Unavailable","Costing is available for doors, seating, tables, sofas and cabinets.")};return p.jsxs("div",{className:"app",children:[p.jsx(Pf,{toasts:i.toasts,onClose:i.removeToast}),p.jsx(qb,{isOpen:K,title:"Clear Invoice",message:"Are you sure you want to clear all invoice data? This action cannot be undone.",confirmText:"Clear",cancelText:"Cancel",confirmVariant:"danger",onConfirm:vt,onCancel:()=>ne(!1)}),p.jsx(qb,{isOpen:se,title:"Submit Invoice",message:"Are you sure you want to add this invoice into the system? The invoice will be saved to the database.",confirmText:"Submit",cancelText:"Cancel",confirmVariant:"primary",onConfirm:Rn,onCancel:()=>fe(!1)}),p.jsxs("div",{className:"form-shell",children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[p.jsx("h1",{className:"app-title",children:"Meduza Invoice Generator"}),p.jsx("button",{type:"button",className:"btn-outline",style:{whiteSpace:"nowrap"},onClick:()=>C(!0),children:"Pricing Settings"})]}),p.jsxs("section",{className:"card",children:[p.jsx("h2",{className:"card-title",children:"Client Info"}),p.jsx(te,{label:"Client Name",value:t.name,onChange:J=>s({...t,name:J})}),p.jsx(te,{label:"Client Company",value:t.company,onChange:J=>s({...t,company:J})}),p.jsx(te,{label:"Billing Address",value:t.address,onChange:J=>s({...t,address:J})}),p.jsx(te,{label:"Phone",value:t.phone,onChange:J=>s({...t,phone:J})}),p.jsx(te,{label:"Email",value:t.email,onChange:J=>s({...t,email:J})}),p.jsx(te,{label:"Site / Delivery Address",value:t.siteAddress,onChange:J=>s({...t,siteAddress:J})})]}),p.jsxs("section",{className:"card",children:[p.jsx("h2",{className:"card-title",children:"Invoice Details"}),p.jsx(te,{label:"Date",type:"date",value:a.date,onChange:J=>o({...a,date:J})}),p.jsx(te,{label:"Due Date",type:"date",value:a.dueDate,onChange:J=>o({...a,dueDate:J})}),p.jsx(te,{label:"Project Name",value:a.projectName,onChange:J=>o({...a,projectName:J})}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Order Class"}),p.jsxs("select",{className:"input",value:a.orderClass||"B2B",onChange:J=>o({...a,orderClass:J.target.value}),children:[p.jsx("option",{value:"B2B",children:"B2B"}),p.jsx("option",{value:"B2C",children:"B2C"})]})]})]}),p.jsxs("section",{className:"card",children:[p.jsx("h2",{className:"card-title",children:"Quick Add Items"}),p.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:[p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>ke("Dining chair"),children:"+ Dining chair"}),p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>ke("Arm chair"),children:"+ Arm chair"}),p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>ke("Bar stool"),children:"+ Bar stool"}),p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>ke("Bench"),children:"+ Bench"}),p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>ke("Dining table"),children:"+ Dining table"}),p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>ke("Cabinet"),children:"+ Cabinet"}),p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>ke("Coffee table"),children:"+ Coffee table"}),p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>ke("Side table"),children:"+ Side table"}),p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>ke("Console table"),children:"+ Console table"}),p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>ke("Sofa straight"),children:"+ Sofa (straight)"}),p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>ke("Sofa curved"),children:"+ Sofa (curved)"}),p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>ke("Door"),children:"+ Door"})]})]}),p.jsxs("section",{className:"card",children:[p.jsx("h2",{className:"card-title",children:"Items"}),y.map(J=>p.jsxs("div",{className:"item-card",children:[p.jsxs("div",{className:"item-row",children:[p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Item Type"}),p.jsxs("select",{className:"input",value:J.category,onChange:oe=>ge(J.id,"category",oe.target.value),children:[p.jsx("option",{value:"Door",children:"Door"}),p.jsx("option",{value:"Dining chair",children:"Dining chair"}),p.jsx("option",{value:"Arm chair",children:"Arm chair"}),p.jsx("option",{value:"Bar stool",children:"Bar stool"}),p.jsx("option",{value:"Bench",children:"Bench"}),p.jsx("option",{value:"Dining table",children:"Dining table"}),p.jsx("option",{value:"Cabinet",children:"Cabinet"}),p.jsx("option",{value:"Coffee table",children:"Coffee table"}),p.jsx("option",{value:"Side table",children:"Side table"}),p.jsx("option",{value:"Console table",children:"Console table"}),p.jsx("option",{value:"Sofa straight",children:"Sofa straight"}),p.jsx("option",{value:"Sofa curved",children:"Sofa curved"}),p.jsx("option",{value:"Custom furniture",children:"Custom furniture"})]})]}),p.jsx(te,{label:"Item Name (Invoice)",value:J.code,onChange:oe=>ge(J.id,"code",oe)})]}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Dimensions (H  W  T cm)",value:J.dimensions,onChange:oe=>ge(J.id,"dimensions",oe)}),p.jsx(te,{label:"Qty",type:"number",value:String(J.qty),onChange:oe=>ge(J.id,"qty",oe)}),p.jsx(te,{label:"Unit Price",type:"number",value:String(J.unitPrice),onChange:oe=>ge(J.id,"unitPrice",oe)})]}),p.jsx(te,{label:"Description",value:J.description,onChange:oe=>ge(J.id,"description",oe)}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Item Image"}),p.jsx("input",{type:"file",accept:"image/*",onChange:oe=>On(J.id,oe)})]}),J.image&&p.jsx("div",{className:"form-image-preview",children:p.jsx("img",{src:J.image,alt:"Item Preview"})}),p.jsxs("div",{className:"item-footer",children:[p.jsxs("span",{children:["Line Total:"," ",p.jsx("strong",{children:(J.qty*J.unitPrice).toLocaleString("en-EG",{style:"currency",currency:"EGP",minimumFractionDigits:2})})]}),p.jsxs("div",{style:{display:"flex",gap:8},children:[p.jsx("button",{type:"button",className:"btn-outline",onClick:()=>kt(J),children:"Costing"}),p.jsx("button",{type:"button",className:"btn-delete",onClick:()=>Ge(J.id),children:"Remove"})]})]})]},J.id)),p.jsx("button",{type:"button",className:"btn-outline",onClick:Oe,children:"+ Add Item"})]}),p.jsxs("section",{className:"card",children:[p.jsx("h2",{className:"card-title",children:"Totals & Tax"}),p.jsx(te,{label:"Discount (EGP)",type:"number",value:String(d),onChange:J=>f(Number(J||0))}),p.jsx(te,{label:"VAT %",type:"number",value:String(c),onChange:J=>h(Number(J||0))})]}),p.jsxs("section",{className:"card",children:[p.jsx("h2",{className:"card-title",children:"Notes / Terms"}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Notes"}),p.jsx("textarea",{className:"textarea",value:v,onChange:J=>_(J.target.value),rows:4})]})]}),p.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[p.jsx("button",{className:"btn-outline",onClick:Yi,children:"Save Locally"}),p.jsx("button",{className:"btn-outline",onClick:Ao,children:"Load Local"}),p.jsx("button",{className:"btn-outline",onClick:ie,style:{marginLeft:"auto",color:"#dc2626"},children:"Clear Form"})]}),p.jsx("button",{className:"btn-primary",onClick:Vt,children:"Submit"})]}),p.jsx(JC,{isOpen:T,config:S,onChange:w,onClose:()=>C(!1)}),p.jsx(ZC,{isOpen:A,onClose:()=>j(!1),onApply:Ga,pricing:S}),p.jsx(ej,{isOpen:q,onClose:()=>P(!1),onApply:Wa,pricing:S}),p.jsx(tj,{isOpen:Z,onClose:()=>W(!1),onApply:eu,pricing:S}),p.jsx(nj,{isOpen:ae,onClose:()=>re(!1),onApply:tu,pricing:S}),p.jsx(ij,{isOpen:ue,onClose:()=>me(!1),onApply:Ya,pricing:S})]})},JC=({isOpen:i,config:e,onChange:t,onClose:s})=>{const[a,o]=k.useState(e),c=(d,f)=>{o(y=>({...y,[d]:Number(f||0)}))},h=()=>{t(a),s()};return i?p.jsx("div",{className:"modal-backdrop",children:p.jsxs("div",{className:"modal-card",children:[p.jsx("h2",{className:"card-title",style:{marginBottom:12},children:"Pricing Settings"}),p.jsx("h3",{className:"card-title",style:{fontSize:12},children:"Natural Wood (EGP / m)"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Mouski",type:"number",value:String(a.mouskiRate),onChange:d=>c("mouskiRate",d)}),p.jsx(te,{label:"Zan (Beech)",type:"number",value:String(a.zanRate),onChange:d=>c("zanRate",d)})]}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Aro (Oak)",type:"number",value:String(a.aroRate),onChange:d=>c("aroRate",d)}),p.jsx(te,{label:"Beech Pine",type:"number",value:String(a.beechPineRate),onChange:d=>c("beechPineRate",d)})]}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"MDF Panels (EGP / sheet 122244)"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"MDF 10 mm",type:"number",value:String(a.mdf10RatePerSheet),onChange:d=>c("mdf10RatePerSheet",d)}),p.jsx(te,{label:"MDF 16 mm",type:"number",value:String(a.mdf16RatePerSheet),onChange:d=>c("mdf16RatePerSheet",d)}),p.jsx(te,{label:"MDF 21 mm",type:"number",value:String(a.mdf21RatePerSheet),onChange:d=>c("mdf21RatePerSheet",d)})]}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"Blockboard & Marble"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Blockboard 18mm (sheet)",type:"number",value:String(a.blockboard18RatePerSheet),onChange:d=>c("blockboard18RatePerSheet",d)}),p.jsx(te,{label:"Marble (EGP / m)",type:"number",value:String(a.marbleRatePerM2),onChange:d=>c("marbleRatePerM2",d)})]}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"Veneer (EGP / m)"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Walnut",type:"number",value:String(a.walnutVeneerRatePerM2),onChange:d=>c("walnutVeneerRatePerM2",d)}),p.jsx(te,{label:"Oak",type:"number",value:String(a.oakVeneerRatePerM2),onChange:d=>c("oakVeneerRatePerM2",d)}),p.jsx(te,{label:"Beech",type:"number",value:String(a.beechVeneerRatePerM2),onChange:d=>c("beechVeneerRatePerM2",d)})]}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"HPL / LPL (EGP / sheet 122244)"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"HPL",type:"number",value:String(a.hplRatePerSheet),onChange:d=>c("hplRatePerSheet",d)}),p.jsx(te,{label:"LPL",type:"number",value:String(a.lplRatePerSheet),onChange:d=>c("lplRatePerSheet",d)})]}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"Finish (EGP / m / face)"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"PU matte",type:"number",value:String(a.finishPuMatteRatePerM2),onChange:d=>c("finishPuMatteRatePerM2",d)}),p.jsx(te,{label:"PU high gloss",type:"number",value:String(a.finishPuHighGlossRatePerM2),onChange:d=>c("finishPuHighGlossRatePerM2",d)})]}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"NC",type:"number",value:String(a.finishNcRatePerM2),onChange:d=>c("finishNcRatePerM2",d)}),p.jsx(te,{label:"Oil / stain",type:"number",value:String(a.finishOilRatePerM2),onChange:d=>c("finishOilRatePerM2",d)})]}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"Glass (EGP / m)"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Glass 6mm white",type:"number",value:String(a.glass6RatePerM2),onChange:d=>c("glass6RatePerM2",d)}),p.jsx(te,{label:"Glass 10mm white",type:"number",value:String(a.glass10RatePerM2),onChange:d=>c("glass10RatePerM2",d)})]}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"Ply wood (EGP / sheet 122244)"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"PLY 2.5mm",type:"number",value:String(a.ply25RatePerSheet),onChange:d=>c("ply25RatePerSheet",d)}),p.jsx(te,{label:"PLY 2.7mm",type:"number",value:String(a.ply27RatePerSheet),onChange:d=>c("ply27RatePerSheet",d)})]}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"PLY 8mm",type:"number",value:String(a.ply8RatePerSheet),onChange:d=>c("ply8RatePerSheet",d)}),p.jsx(te,{label:"PLY 12mm",type:"number",value:String(a.ply12RatePerSheet),onChange:d=>c("ply12RatePerSheet",d)}),p.jsx(te,{label:"PLY 18mm",type:"number",value:String(a.ply18RatePerSheet),onChange:d=>c("ply18RatePerSheet",d)}),p.jsx(te,{label:"Foamboard 18mm (sheet)",type:"number",value:String(a.foamboardRatePerSheet),onChange:d=>c("foamboardRatePerSheet",d)})]}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"Upholstery (chairs / benches)"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Seat only",type:"number",value:String(a.upholsterySeatOnly),onChange:d=>c("upholsterySeatOnly",d)}),p.jsx(te,{label:"Full seat",type:"number",value:String(a.upholsteryFull),onChange:d=>c("upholsteryFull",d)}),p.jsx(te,{label:"Full arm chair",type:"number",value:String(a.upholsteryArmFull),onChange:d=>c("upholsteryArmFull",d)})]}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"Upholstery (sofas)  per meter"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Sofa upholstery low / m",type:"number",value:String(a.upholsterySofaLowPerM),onChange:d=>c("upholsterySofaLowPerM",d)}),p.jsx(te,{label:"Sofa upholstery high / m",type:"number",value:String(a.upholsterySofaHighPerM),onChange:d=>c("upholsterySofaHighPerM",d)})]}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"Fabric (EGP / meter)"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Fabric low (220)",type:"number",value:String(a.fabricLowRate),onChange:d=>c("fabricLowRate",d)}),p.jsx(te,{label:"Fabric high (450)",type:"number",value:String(a.fabricHighRate),onChange:d=>c("fabricHighRate",d)})]}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"Steel chassis"}),p.jsx("div",{className:"item-row",children:p.jsx(te,{label:"Steel chassis / piece",type:"number",value:String(a.steelChassisCostPerPiece),onChange:d=>c("steelChassisCostPerPiece",d)})}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"Hardware"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Drawer runner / drawer",type:"number",value:String(a.drawerRunnerRate),onChange:d=>c("drawerRunnerRate",d)}),p.jsx(te,{label:"Door hinge / piece",type:"number",value:String(a.doorHingeRate),onChange:d=>c("doorHingeRate",d)})]}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"Labor"}),p.jsx("div",{className:"item-row",children:p.jsx(te,{label:"Labor rate (EGP / hour)",type:"number",value:String(a.laborRatePerHour),onChange:d=>c("laborRatePerHour",d)})}),p.jsx("h3",{className:"card-title",style:{fontSize:12,marginTop:10},children:"Defaults & Compliance"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Default accessories (EGP)",type:"number",value:String(a.defaultAccessories),onChange:d=>c("defaultAccessories",d)}),p.jsx(te,{label:"Default profit margin %",type:"number",value:String(a.defaultProfitMargin),onChange:d=>c("defaultProfitMargin",d)}),p.jsx(te,{label:"Compliance / item (EGP)",type:"number",value:String(a.compliancePerItem),onChange:d=>c("compliancePerItem",d)})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12},children:[p.jsx("button",{type:"button",className:"btn-outline",onClick:s,children:"Cancel"}),p.jsx("button",{type:"button",className:"btn-primary",onClick:h,children:"Save"})]})]})}):null},ZC=({isOpen:i,onClose:e,onApply:t,pricing:s})=>{const[a,o]=k.useState({heightCm:220,widthCm:90,thicknessCm:4,veneerType:"Oak",finishType:"PU matte",woodType:"Mouski",glassType:"None",glassAreaM2:0,accessoriesCost:s.defaultAccessories,overheadCost:0,laborHours:0,hasSteelChassis:!1,profitMargin:s.defaultProfitMargin}),c=(G,ae)=>{o(typeof ae=="boolean"?re=>({...re,[G]:ae}):re=>({...re,[G]:typeof re[G]=="number"?Number(ae||0):ae}))},h=a.heightCm/100*(a.widthCm/100),d=h*2,f=h*(a.thicknessCm/100),y=.045*(a.heightCm/220)*(a.widthCm/90);let b=s.mouskiRate;a.woodType==="Zan"&&(b=s.zanRate),a.woodType==="Aro"&&(b=s.aroRate),a.woodType==="BeechPine"&&(b=s.beechPineRate);const v=y*b,_=1.22*2.44,S=d/_,w=S*s.mdf10RatePerSheet;let T=0,C=0;if(a.veneerType==="Walnut")T=d*s.walnutVeneerRatePerM2;else if(a.veneerType==="Oak")T=d*s.oakVeneerRatePerM2;else if(a.veneerType==="Beech")T=d*s.beechVeneerRatePerM2;else if(a.veneerType==="HPL"||a.veneerType==="LPL"){const G=d/_;a.veneerType==="HPL"?T=G*s.hplRatePerSheet:a.veneerType==="LPL"&&(T=G*s.lplRatePerSheet),C=0}if(a.veneerType==="Walnut"||a.veneerType==="Oak"||a.veneerType==="Beech"){let G=0;a.finishType==="PU matte"?G=s.finishPuMatteRatePerM2:a.finishType==="PU high gloss"?G=s.finishPuHighGlossRatePerM2:a.finishType==="NC"?G=s.finishNcRatePerM2:a.finishType==="Oil / stain"&&(G=s.finishOilRatePerM2),C=d*G}let A=0;a.glassType==="Glass6"?A=a.glassAreaM2*s.glass6RatePerM2:a.glassType==="Glass10"&&(A=a.glassAreaM2*s.glass10RatePerM2);const j=a.hasSteelChassis?s.steelChassisCostPerPiece:0,D=a.laborHours*s.laborRatePerHour,N=v+w+T+C+A+j+a.accessoriesCost+a.overheadCost+D,q=N*a.profitMargin/100,P=N+q,U=a.veneerType==="HPL"||a.veneerType==="LPL",L=a.glassType==="Glass6"||a.glassType==="Glass10",Z=()=>{const G=[];let ae="Mouski";a.woodType==="Zan"?ae="Zan (Beech)":a.woodType==="Aro"?ae="Aro (Oak)":a.woodType==="BeechPine"&&(ae="Beech pine"),G.push(`Wood: ${ae}`);let re="";return a.veneerType==="Walnut"?re="Walnut veneer":a.veneerType==="Oak"?re="Oak veneer":a.veneerType==="Beech"?re="Beech veneer":a.veneerType==="HPL"?re="HPL facing":a.veneerType==="LPL"&&(re="LPL facing"),G.push(`Veneer: ${re}`),a.veneerType==="Walnut"||a.veneerType==="Oak"||a.veneerType==="Beech"?G.push(`Finish: ${a.finishType}`):G.push("Finish: none (HPL / LPL)"),a.glassType==="Glass6"?G.push(`Glass: 6mm white, ${a.glassAreaM2.toFixed(2)} m`):a.glassType==="Glass10"?G.push(`Glass: 10mm white, ${a.glassAreaM2.toFixed(2)} m`):G.push("Glass: none"),a.hasSteelChassis&&G.push("Steel chassis: yes"),G.join("  ")},W=[];if(y>0){let G="Mouski";a.woodType==="Zan"?G="Zan (Beech)":a.woodType==="Aro"?G="Aro (Oak)":a.woodType==="BeechPine"&&(G="Beech pine"),W.push({name:`Natural wood frame (${G})`,unit:"m",qty:parseFloat(y.toFixed(3)),cost:b})}if(S>0&&W.push({name:"MDF 10mm (door faces)",unit:"sheet",qty:parseFloat(S.toFixed(3)),cost:s.mdf10RatePerSheet}),a.veneerType==="Walnut"||a.veneerType==="Oak"||a.veneerType==="Beech"){let G=s.walnutVeneerRatePerM2;a.veneerType==="Oak"&&(G=s.oakVeneerRatePerM2),a.veneerType==="Beech"&&(G=s.beechVeneerRatePerM2),W.push({name:`${a.veneerType} veneer`,unit:"m",qty:parseFloat(d.toFixed(3)),cost:G});let ae=0;a.finishType==="PU matte"?ae=s.finishPuMatteRatePerM2:a.finishType==="PU high gloss"?ae=s.finishPuHighGlossRatePerM2:a.finishType==="NC"?ae=s.finishNcRatePerM2:a.finishType==="Oil / stain"&&(ae=s.finishOilRatePerM2),ae>0&&W.push({name:`Finish (${a.finishType})`,unit:"m",qty:parseFloat(d.toFixed(3)),cost:ae})}else if(a.veneerType==="HPL"||a.veneerType==="LPL"){const G=d/_,ae=a.veneerType==="HPL"?s.hplRatePerSheet:s.lplRatePerSheet;W.push({name:`${a.veneerType} laminate`,unit:"sheet",qty:parseFloat(G.toFixed(3)),cost:ae})}if(a.glassAreaM2>0&&(a.glassType==="Glass6"||a.glassType==="Glass10")){const G=a.glassType==="Glass6"?s.glass6RatePerM2:s.glass10RatePerM2;W.push({name:`Glass ${a.glassType==="Glass6"?"6mm":"10mm"}`,unit:"m",qty:parseFloat(a.glassAreaM2.toFixed(3)),cost:G})}a.hasSteelChassis&&W.push({name:"Steel chassis",unit:"piece",qty:1,cost:s.steelChassisCostPerPiece}),a.accessoriesCost>0&&W.push({name:"Accessories",unit:"EGP",qty:1,cost:a.accessoriesCost}),a.overheadCost>0&&W.push({name:"Overhead",unit:"EGP",qty:1,cost:a.overheadCost}),a.laborHours>0&&W.push({name:"Labor",unit:"hour",qty:a.laborHours,cost:s.laborRatePerHour});const B=()=>{const G=Z(),ae=`${a.heightCm}${a.widthCm}${a.thicknessCm} cm`;t({price:P,description:G,dimensions:ae,materials:W})};return i?p.jsx("div",{className:"modal-backdrop",children:p.jsxs("div",{className:"modal-card",children:[p.jsx("h2",{className:"card-title",style:{marginBottom:12},children:"Door Costing"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Height (cm)",type:"number",value:String(a.heightCm),onChange:G=>c("heightCm",G)}),p.jsx(te,{label:"Width (cm)",type:"number",value:String(a.widthCm),onChange:G=>c("widthCm",G)}),p.jsx(te,{label:"Thickness (cm)",type:"number",value:String(a.thicknessCm),onChange:G=>c("thicknessCm",G)})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Frame wood type"}),p.jsxs("select",{className:"input",value:a.woodType,onChange:G=>c("woodType",G.target.value),children:[p.jsx("option",{value:"Mouski",children:"Mouski"}),p.jsx("option",{value:"Zan",children:"Zan (Beech)"}),p.jsx("option",{value:"Aro",children:"Aro (Oak)"}),p.jsx("option",{value:"BeechPine",children:"Beech Pine"})]})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Facing / Skin Type"}),p.jsxs("select",{className:"input",value:a.veneerType,onChange:G=>c("veneerType",G.target.value),children:[p.jsx("option",{value:"Walnut",children:"Walnut veneer"}),p.jsx("option",{value:"Oak",children:"Oak veneer"}),p.jsx("option",{value:"Beech",children:"Beech veneer"}),p.jsx("option",{value:"HPL",children:"HPL"}),p.jsx("option",{value:"LPL",children:"LPL"})]})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Finish Type"}),p.jsxs("select",{className:"input",value:a.finishType,onChange:G=>c("finishType",G.target.value),disabled:U,children:[p.jsx("option",{children:"PU matte"}),p.jsx("option",{children:"PU high gloss"}),p.jsx("option",{children:"NC"}),p.jsx("option",{children:"Oil / stain"})]}),U&&p.jsx("span",{style:{fontSize:10,color:"#9ca3af",marginTop:2,display:"block"},children:"HPL / LPL     (Finish cost = 0)"})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Glass"}),p.jsxs("select",{className:"input",value:a.glassType,onChange:G=>c("glassType",G.target.value),children:[p.jsx("option",{value:"None",children:"No glass"}),p.jsx("option",{value:"Glass6",children:"Glass 6mm white"}),p.jsx("option",{value:"Glass10",children:"Glass 10mm white"})]})]}),L&&p.jsx(te,{label:"Glass area (m)",type:"number",value:String(a.glassAreaM2),onChange:G=>c("glassAreaM2",G)}),p.jsx(te,{label:"Accessories (EGP)",type:"number",value:String(a.accessoriesCost),onChange:G=>c("accessoriesCost",G)}),p.jsx(te,{label:"Overhead (EGP)",type:"number",value:String(a.overheadCost),onChange:G=>c("overheadCost",G)}),p.jsx(te,{label:"Labor hours",type:"number",value:String(a.laborHours),onChange:G=>c("laborHours",G)}),p.jsxs("label",{className:"field field-inline",children:[p.jsx("span",{className:"field-label",children:"Steel chassis"}),p.jsx("input",{type:"checkbox",checked:a.hasSteelChassis,onChange:G=>c("hasSteelChassis",G.target.checked)}),p.jsxs("span",{className:"field-hint",children:["+"," ",s.steelChassisCostPerPiece.toLocaleString("en-EG",{style:"currency",currency:"EGP",minimumFractionDigits:0})," ","per piece"]})]}),p.jsx(te,{label:"Profit Margin %",type:"number",value:String(a.profitMargin),onChange:G=>c("profitMargin",G)}),p.jsxs("div",{style:{fontSize:11,marginTop:8},children:[p.jsxs("div",{children:["Leaf area (one face): ",h.toFixed(2)," m"]}),p.jsxs("div",{children:["Area both faces: ",d.toFixed(2)," m"]}),p.jsxs("div",{children:["Leaf volume: ",f.toFixed(3)," m"]}),p.jsxs("div",{children:["Frame volume (natural wood): ",y.toFixed(3)," m"]}),p.jsxs("div",{children:["Natural wood cost: ",v.toFixed(0)," EGP"]}),p.jsxs("div",{children:["MDF 10mm (both faces): ",w.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Skin / veneer / HPL / LPL: ",T.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Finish cost: ",C.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Glass cost: ",A.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Accessories: ",a.accessoriesCost.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Overhead: ",a.overheadCost.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Labor: ",a.laborHours.toFixed(2)," h "," ",s.laborRatePerHour," = ",D.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Steel chassis: ",j.toFixed(0)," EGP"]}),p.jsx("div",{style:{marginTop:4},children:p.jsxs("strong",{children:["Material cost: ",N.toFixed(0)," EGP"]})}),p.jsxs("div",{children:["Profit (",a.profitMargin,"%): ",q.toFixed(0)," EGP"]}),p.jsx("div",{children:p.jsxs("strong",{children:["Suggested selling price / door: ",P.toFixed(0)," EGP"]})})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12},children:[p.jsx("button",{type:"button",className:"btn-outline",onClick:e,children:"Cancel"}),p.jsx("button",{type:"button",className:"btn-primary",onClick:B,children:"Apply to Item"})]})]})}):null},ej=({isOpen:i,onClose:e,onApply:t,pricing:s})=>{const a=(B,G)=>B==="Dining chair"?G==="Light"?.025:.035:B==="Bar stool"?G==="Light"?.03:.04:B==="Bench"?G==="Light"?.035:.05:G==="Light"?.04:.06,o=(B,G)=>B==="Dining chair"?G==="Light"?3:4:B==="Bar stool"?G==="Light"?3:4.5:B==="Bench"?G==="Light"?3.5:5:G==="Light"?4:5.5,[c,h]=k.useState(()=>{const B="Dining chair",G="Light";return{itemType:B,detailLevel:G,solidVolumeM3:a(B,G),woodType:"Mouski",hasPly:!1,plyThickness:"2.7",plySheets:2,areaM2:1.2,veneerType:"None",finishType:"PU matte",upholsteryType:"Seat only",fabricType:"Low",fabricMeters:1.5,hasSteelChassis:!1,overheadCost:350,laborHours:o(B,G),profitMargin:s.defaultProfitMargin}}),d=(B,G)=>{h(ae=>{const re={...ae,[B]:G};if(B==="itemType"||B==="detailLevel"){const H=B==="itemType"?G:re.itemType,ee=B==="detailLevel"?G:re.detailLevel;re.solidVolumeM3=a(H,ee),re.laborHours=o(H,ee)}return re})};let f=s.mouskiRate;c.woodType==="Zan"&&(f=s.zanRate),c.woodType==="Aro"&&(f=s.aroRate),c.woodType==="BeechPine"&&(f=s.beechPineRate);const y=c.solidVolumeM3*f;let b=0;c.plyThickness==="2.5"?b=s.ply25RatePerSheet:c.plyThickness==="2.7"?b=s.ply27RatePerSheet:c.plyThickness==="8"?b=s.ply8RatePerSheet:c.plyThickness==="12"?b=s.ply12RatePerSheet:c.plyThickness==="18"&&(b=s.ply18RatePerSheet);const v=c.hasPly?c.plySheets*b:0;let _=0;c.veneerType==="Walnut"?_=s.walnutVeneerRatePerM2:c.veneerType==="Oak"?_=s.oakVeneerRatePerM2:c.veneerType==="Beech"&&(_=s.beechVeneerRatePerM2);const S=c.veneerType==="None"?0:c.areaM2*_;let w=0;c.finishType==="PU matte"?w=s.finishPuMatteRatePerM2:c.finishType==="PU high gloss"?w=s.finishPuHighGlossRatePerM2:c.finishType==="NC"?w=s.finishNcRatePerM2:c.finishType==="Oil / stain"&&(w=s.finishOilRatePerM2);const T=c.areaM2*w;let C=0;c.upholsteryType==="Seat only"?C=s.upholsterySeatOnly:c.upholsteryType==="Full"?C=s.upholsteryFull:c.upholsteryType==="Full arm chair"&&(C=s.upholsteryArmFull);let A=0;c.fabricType==="Low"?A=s.fabricLowRate:c.fabricType==="High"&&(A=s.fabricHighRate);const j=c.upholsteryType==="None"?0:c.fabricMeters*A,D=c.hasSteelChassis?s.steelChassisCostPerPiece:0,N=c.laborHours*s.laborRatePerHour,q=y+v+S+T+C+j+c.overheadCost+N+D,P=q*c.profitMargin/100,U=q+P,L=()=>{const B=[];let G="Mouski";c.woodType==="Zan"?G="Zan (Beech)":c.woodType==="Aro"?G="Aro (Oak)":c.woodType==="BeechPine"&&(G="Beech pine"),B.push(`Wood: ${G}`);let ae="none";if(c.veneerType==="Walnut"?ae="Walnut veneer":c.veneerType==="Oak"?ae="Oak veneer":c.veneerType==="Beech"&&(ae="Beech veneer"),B.push(`Veneer: ${ae}`),B.push(`Finish: ${c.finishType}`),c.upholsteryType==="None")B.push("Fabric: none");else{const re=c.fabricType==="Low"?"Low grade":"High grade";B.push(`Fabric: ${re} (${A} EGP/m, ${c.fabricMeters.toFixed(2)} m)`)}return B.join("  ")},Z=[];if(c.solidVolumeM3>0){let B="Mouski";c.woodType==="Zan"?B="Zan (Beech)":c.woodType==="Aro"?B="Aro (Oak)":c.woodType==="BeechPine"&&(B="Beech pine"),Z.push({name:`Natural solid wood (${B})`,unit:"m",qty:parseFloat(c.solidVolumeM3.toFixed(3)),cost:f})}c.hasPly&&c.plySheets>0&&Z.push({name:`Plywood ${c.plyThickness}mm`,unit:"sheet",qty:c.plySheets,cost:b}),c.veneerType!=="None"&&c.areaM2>0&&Z.push({name:`${c.veneerType} veneer`,unit:"m",qty:parseFloat(c.areaM2.toFixed(3)),cost:_}),c.veneerType!=="None"&&c.areaM2>0&&w>0&&Z.push({name:`Finish (${c.finishType})`,unit:"m",qty:parseFloat(c.areaM2.toFixed(3)),cost:w}),c.upholsteryType!=="None"&&Z.push({name:`Upholstery (${c.upholsteryType})`,unit:"piece",qty:1,cost:C}),c.upholsteryType!=="None"&&c.fabricMeters>0&&Z.push({name:`Fabric (${c.fabricType} grade)`,unit:"meter",qty:c.fabricMeters,cost:A}),c.hasSteelChassis&&Z.push({name:"Steel chassis",unit:"piece",qty:1,cost:s.steelChassisCostPerPiece}),c.overheadCost>0&&Z.push({name:"Overhead",unit:"EGP",qty:1,cost:c.overheadCost}),c.laborHours>0&&Z.push({name:"Labor",unit:"hour",qty:c.laborHours,cost:s.laborRatePerHour});const W=()=>{const B=L();t({price:U,description:B,dimensions:"",materials:Z})};return i?p.jsx("div",{className:"modal-backdrop",children:p.jsxs("div",{className:"modal-card",children:[p.jsx("h2",{className:"card-title",style:{marginBottom:12},children:"Seating Costing (Chairs / Bench / Bar stool)"}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Item type"}),p.jsxs("select",{className:"input",value:c.itemType,onChange:B=>d("itemType",B.target.value),children:[p.jsx("option",{children:"Dining chair"}),p.jsx("option",{children:"Bar stool"}),p.jsx("option",{children:"Bench"}),p.jsx("option",{children:"Arm chair"})]})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Solid wood details"}),p.jsxs("select",{className:"input",value:c.detailLevel,onChange:B=>d("detailLevel",B.target.value),children:[p.jsx("option",{value:"Light",children:"Simple details (less wood)"}),p.jsx("option",{value:"Heavy",children:"Rich details (more wood)"})]}),p.jsxs("span",{className:"field-hint",children:["Volume: ",c.solidVolumeM3.toFixed(3)," m"]})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Wood type"}),p.jsxs("select",{className:"input",value:c.woodType,onChange:B=>d("woodType",B.target.value),children:[p.jsx("option",{value:"Mouski",children:"Mouski"}),p.jsx("option",{value:"Zan",children:"Zan (Beech)"}),p.jsx("option",{value:"Aro",children:"Aro (Oak)"}),p.jsx("option",{value:"BeechPine",children:"Beech Pine"})]})]}),p.jsxs("label",{className:"field field-inline",children:[p.jsx("span",{className:"field-label",children:"Curved back / ply layers"}),p.jsx("input",{type:"checkbox",checked:c.hasPly,onChange:B=>d("hasPly",B.target.checked)})]}),c.hasPly&&p.jsxs("div",{className:"item-row",children:[p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Ply thickness"}),p.jsxs("select",{className:"input",value:c.plyThickness,onChange:B=>d("plyThickness",B.target.value),children:[p.jsx("option",{value:"2.5",children:"2.5 mm"}),p.jsx("option",{value:"2.7",children:"2.7 mm"}),p.jsx("option",{value:"8",children:"8 mm"}),p.jsx("option",{value:"12",children:"12 mm"}),p.jsx("option",{value:"18",children:"18 mm"})]})]}),p.jsx(te,{label:"Ply sheets (pcs)",type:"number",value:String(c.plySheets),onChange:B=>d("plySheets",Number(B||0))})]}),p.jsxs("div",{className:"item-row",children:[p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Veneer"}),p.jsxs("select",{className:"input",value:c.veneerType,onChange:B=>d("veneerType",B.target.value),children:[p.jsx("option",{value:"None",children:"None"}),p.jsx("option",{value:"Walnut",children:"Walnut veneer"}),p.jsx("option",{value:"Oak",children:"Oak veneer"}),p.jsx("option",{value:"Beech",children:"Beech veneer"})]})]}),p.jsx(te,{label:"Area for veneer/finish (m)",type:"number",value:String(c.areaM2),onChange:B=>d("areaM2",Number(B||0))})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Finish Type"}),p.jsxs("select",{className:"input",value:c.finishType,onChange:B=>d("finishType",B.target.value),children:[p.jsx("option",{children:"PU matte"}),p.jsx("option",{children:"PU high gloss"}),p.jsx("option",{children:"NC"}),p.jsx("option",{children:"Oil / stain"})]})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Upholstery"}),p.jsxs("select",{className:"input",value:c.upholsteryType,onChange:B=>d("upholsteryType",B.target.value),children:[p.jsx("option",{children:"None"}),p.jsx("option",{children:"Seat only"}),p.jsx("option",{children:"Full"}),p.jsx("option",{children:"Full arm chair"})]})]}),c.upholsteryType!=="None"&&p.jsxs("div",{className:"item-row",children:[p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Fabric type"}),p.jsxs("select",{className:"input",value:c.fabricType,onChange:B=>d("fabricType",B.target.value),children:[p.jsx("option",{value:"Low",children:"Low (220 EGP/m default)"}),p.jsx("option",{value:"High",children:"High (450 EGP/m default)"})]})]}),p.jsx(te,{label:"Fabric length (m)",type:"number",value:String(c.fabricMeters),onChange:B=>d("fabricMeters",Number(B||0))})]}),p.jsxs("label",{className:"field field-inline",children:[p.jsx("span",{className:"field-label",children:"Steel chassis"}),p.jsx("input",{type:"checkbox",checked:c.hasSteelChassis,onChange:B=>d("hasSteelChassis",B.target.checked)}),p.jsxs("span",{className:"field-hint",children:["+"," ",s.steelChassisCostPerPiece.toLocaleString("en-EG",{style:"currency",currency:"EGP",minimumFractionDigits:0})," ","per piece"]})]}),p.jsx(te,{label:"Overhead (EGP)",type:"number",value:String(c.overheadCost),onChange:B=>d("overheadCost",Number(B||0))}),p.jsx(te,{label:"Labor hours",type:"number",value:String(c.laborHours),onChange:B=>d("laborHours",Number(B||0))}),p.jsx(te,{label:"Profit Margin %",type:"number",value:String(c.profitMargin),onChange:B=>d("profitMargin",Number(B||0))}),p.jsxs("div",{style:{fontSize:11,marginTop:8},children:[p.jsxs("div",{children:["Natural wood cost: ",y.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Ply cost: ",v.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Veneer cost: ",S.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Finish cost: ",T.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Upholstery labor: ",C.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Fabric cost: ",j.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Steel chassis: ",D.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Overhead: ",c.overheadCost.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Labor: ",c.laborHours.toFixed(2)," h  ",s.laborRatePerHour," ","= ",N.toFixed(0)," EGP"]}),p.jsxs("div",{style:{marginTop:4,color:"#fff",fontWeight:600},children:["Material cost: ",q.toFixed(0)," EGP"]}),p.jsxs("div",{style:{color:"#fff",fontWeight:600},children:["Profit (",c.profitMargin,"%): ",P.toFixed(0)," EGP"]}),p.jsxs("div",{style:{color:"#fff",fontWeight:600},children:["Suggested selling price / piece: ",U.toFixed(0)," EGP"]})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12},children:[p.jsx("button",{type:"button",className:"btn-outline",onClick:e,children:"Cancel"}),p.jsx("button",{type:"button",className:"btn-primary",onClick:W,children:"Apply to Item"})]})]})}):null},tj=({isOpen:i,onClose:e,onApply:t,pricing:s})=>{const[a,o]=k.useState({lengthCm:220,widthCm:110,heightCm:74,legMaterial:"Wood",woodType:"Mouski",topMaterial:"Marble",veneerType:"None",finishType:"PU matte",overheadCost:0,laborHours:0,profitMargin:s.defaultProfitMargin}),c=(W,B)=>{o(G=>({...G,[W]:B}))},h=1.22*2.44,d=a.lengthCm/100*(a.widthCm/100);let f=0;a.legMaterial==="Wood"&&(f=.35*(a.lengthCm/220)*(a.widthCm/110)*(a.heightCm/74));let y=s.mouskiRate;a.woodType==="Zan"&&(y=s.zanRate),a.woodType==="Aro"&&(y=s.aroRate),a.woodType==="BeechPine"&&(y=s.beechPineRate);const b=f*y;let v=0,_=0,S=0;a.topMaterial==="MDF16"?v=d/h*s.mdf16RatePerSheet:a.topMaterial==="MDF21"?v=d/h*s.mdf21RatePerSheet:a.topMaterial==="Blockboard18"?v=d/h*s.blockboard18RatePerSheet:a.topMaterial==="Marble"?_=d*s.marbleRatePerM2:a.topMaterial==="Glass6"?S=d*s.glass6RatePerM2:a.topMaterial==="Glass10"&&(S=d*s.glass10RatePerM2);const w=a.topMaterial==="MDF16"||a.topMaterial==="MDF21"||a.topMaterial==="Blockboard18";let T=0;a.veneerType==="Walnut"?T=s.walnutVeneerRatePerM2:a.veneerType==="Oak"?T=s.oakVeneerRatePerM2:a.veneerType==="Beech"&&(T=s.beechVeneerRatePerM2);const C=w&&a.veneerType!=="None"?d*T:0;let A=0;a.finishType==="PU matte"?A=s.finishPuMatteRatePerM2:a.finishType==="PU high gloss"?A=s.finishPuHighGlossRatePerM2:a.finishType==="NC"?A=s.finishNcRatePerM2:a.finishType==="Oil / stain"&&(A=s.finishOilRatePerM2);const j=w&&a.veneerType!=="None"?d*A:0,D=a.laborHours*s.laborRatePerHour,N=b+v+_+S+C+j+a.overheadCost+D,q=N*a.profitMargin/100,P=N+q,U=()=>{const W=[];let B="";a.topMaterial==="MDF16"?B="MDF 16mm":a.topMaterial==="MDF21"?B="MDF 21mm":a.topMaterial==="Blockboard18"?B="Blockboard 18mm":a.topMaterial==="Marble"?B="Marble top":a.topMaterial==="Glass6"?B="Glass 6mm top":a.topMaterial==="Glass10"&&(B="Glass 10mm top");let G="Steel";if(a.legMaterial==="Wood"){let ae="Mouski";a.woodType==="Zan"?ae="Zan (Beech)":a.woodType==="Aro"?ae="Aro (Oak)":a.woodType==="BeechPine"&&(ae="Beech pine"),G=ae}if(W.push(`Top: ${B}`),W.push(`Legs: ${G}`),w&&a.veneerType!=="None"){let ae="";a.veneerType==="Walnut"?ae="Walnut veneer":a.veneerType==="Oak"?ae="Oak veneer":a.veneerType==="Beech"&&(ae="Beech veneer"),W.push(`Veneer: ${ae}`),W.push(`Finish: ${a.finishType}`)}return W.join("  ")},L=[];if(a.legMaterial==="Wood"&&f>0){let W="Mouski";a.woodType==="Zan"?W="Zan (Beech)":a.woodType==="Aro"?W="Aro (Oak)":a.woodType==="BeechPine"&&(W="Beech pine"),L.push({name:`Table legs wood (${W})`,unit:"m",qty:parseFloat(f.toFixed(3)),cost:y})}if(a.topMaterial==="MDF16"||a.topMaterial==="MDF21"||a.topMaterial==="Blockboard18"){const W=d/h;let B="MDF 16mm",G=s.mdf16RatePerSheet;a.topMaterial==="MDF21"?(B="MDF 21mm",G=s.mdf21RatePerSheet):a.topMaterial==="Blockboard18"&&(B="Blockboard 18mm",G=s.blockboard18RatePerSheet),L.push({name:`Table top (${B})`,unit:"sheet",qty:parseFloat(W.toFixed(3)),cost:G})}if(a.topMaterial==="Marble"&&L.push({name:"Marble top",unit:"m",qty:parseFloat(d.toFixed(3)),cost:s.marbleRatePerM2}),a.topMaterial==="Glass6"||a.topMaterial==="Glass10"){const W=a.topMaterial==="Glass6"?"6mm":"10mm",B=a.topMaterial==="Glass6"?s.glass6RatePerM2:s.glass10RatePerM2;L.push({name:`Glass top ${W}`,unit:"m",qty:parseFloat(d.toFixed(3)),cost:B})}w&&a.veneerType!=="None"&&L.push({name:`${a.veneerType} veneer`,unit:"m",qty:parseFloat(d.toFixed(3)),cost:T}),w&&a.veneerType!=="None"&&A>0&&L.push({name:`Finish (${a.finishType})`,unit:"m",qty:parseFloat(d.toFixed(3)),cost:A}),a.overheadCost>0&&L.push({name:"Overhead",unit:"EGP",qty:1,cost:a.overheadCost}),a.laborHours>0&&L.push({name:"Labor",unit:"hour",qty:a.laborHours,cost:s.laborRatePerHour});const Z=()=>{const W=U(),B=`${a.lengthCm}${a.widthCm}${a.heightCm} cm`;t({price:P,description:W,dimensions:B,materials:L})};return i?p.jsx("div",{className:"modal-backdrop",children:p.jsxs("div",{className:"modal-card",children:[p.jsx("h2",{className:"card-title",style:{marginBottom:12},children:"Table Costing"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Length (cm)",type:"number",value:String(a.lengthCm),onChange:W=>c("lengthCm",Number(W||0))}),p.jsx(te,{label:"Width (cm)",type:"number",value:String(a.widthCm),onChange:W=>c("widthCm",Number(W||0))}),p.jsx(te,{label:"Height (cm)",type:"number",value:String(a.heightCm),onChange:W=>c("heightCm",Number(W||0))})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Leg material"}),p.jsxs("select",{className:"input",value:a.legMaterial,onChange:W=>c("legMaterial",W.target.value),children:[p.jsx("option",{value:"Wood",children:"Wood"}),p.jsx("option",{value:"Steel",children:"Steel"})]})]}),a.legMaterial==="Wood"&&p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Leg wood type"}),p.jsxs("select",{className:"input",value:a.woodType,onChange:W=>c("woodType",W.target.value),children:[p.jsx("option",{value:"Mouski",children:"Mouski"}),p.jsx("option",{value:"Zan",children:"Zan (Beech)"}),p.jsx("option",{value:"Aro",children:"Aro (Oak)"}),p.jsx("option",{value:"BeechPine",children:"Beech Pine"})]})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Top material"}),p.jsxs("select",{className:"input",value:a.topMaterial,onChange:W=>c("topMaterial",W.target.value),children:[p.jsx("option",{value:"MDF16",children:"MDF 16mm"}),p.jsx("option",{value:"MDF21",children:"MDF 21mm"}),p.jsx("option",{value:"Blockboard18",children:"Blockboard 18mm"}),p.jsx("option",{value:"Marble",children:"Marble"}),p.jsx("option",{value:"Glass6",children:"Glass 6mm"}),p.jsx("option",{value:"Glass10",children:"Glass 10mm"})]})]}),w&&p.jsxs(p.Fragment,{children:[p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Veneer"}),p.jsxs("select",{className:"input",value:a.veneerType,onChange:W=>c("veneerType",W.target.value),children:[p.jsx("option",{value:"None",children:"None"}),p.jsx("option",{value:"Walnut",children:"Walnut veneer"}),p.jsx("option",{value:"Oak",children:"Oak veneer"}),p.jsx("option",{value:"Beech",children:"Beech veneer"})]})]}),a.veneerType!=="None"&&p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Finish Type"}),p.jsxs("select",{className:"input",value:a.finishType,onChange:W=>c("finishType",W.target.value),children:[p.jsx("option",{children:"PU matte"}),p.jsx("option",{children:"PU high gloss"}),p.jsx("option",{children:"NC"}),p.jsx("option",{children:"Oil / stain"})]}),p.jsx("span",{className:"field-hint",children:"Finish is applied on the veneered wooden top area."})]})]}),!w&&p.jsx("span",{className:"field-hint",style:{marginTop:4,display:"block"},children:"Marble / glass tops do not take veneer or finish here."}),p.jsx(te,{label:"Overhead (EGP)",type:"number",value:String(a.overheadCost),onChange:W=>c("overheadCost",Number(W||0))}),p.jsx(te,{label:"Labor hours",type:"number",value:String(a.laborHours),onChange:W=>c("laborHours",Number(W||0))}),p.jsx(te,{label:"Profit Margin %",type:"number",value:String(a.profitMargin),onChange:W=>c("profitMargin",Number(W||0))}),p.jsxs("div",{style:{fontSize:11,marginTop:8},children:[p.jsxs("div",{children:["Top area: ",d.toFixed(2)," m"]}),p.jsxs("div",{children:["Legs wood volume: ",f.toFixed(3)," m"]}),p.jsxs("div",{children:["Legs wood cost: ",b.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Top core cost: ",v.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Marble cost: ",_.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Glass cost: ",S.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Veneer cost: ",C.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Finish cost: ",j.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Overhead: ",a.overheadCost.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Labor: ",a.laborHours.toFixed(2)," h  ",s.laborRatePerHour," ","= ",D.toFixed(0)," EGP"]}),p.jsxs("div",{style:{marginTop:4,color:"#fff",fontWeight:600},children:["Material cost: ",N.toFixed(0)," EGP"]}),p.jsxs("div",{style:{color:"#fff",fontWeight:600},children:["Profit (",a.profitMargin,"%): ",q.toFixed(0)," EGP"]}),p.jsxs("div",{style:{color:"#fff",fontWeight:600},children:["Suggested selling price / table: ",P.toFixed(0)," EGP"]})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12},children:[p.jsx("button",{type:"button",className:"btn-outline",onClick:e,children:"Cancel"}),p.jsx("button",{type:"button",className:"btn-primary",onClick:Z,children:"Apply to Item"})]})]})}):null},nj=({isOpen:i,onClose:e,onApply:t,pricing:s})=>{const[a,o]=k.useState({sofaType:"Straight",lengthM:2.5,woodType:"Mouski",solidVolumePerM3:.06,veneerType:"None",veneerAreaM2:4,finishType:"PU matte",upholsteryQuality:"Low",fabricGrade:"Low",fabricMeters:8,overheadCost:0,laborHours:0,profitMargin:s.defaultProfitMargin}),c=(L,Z)=>{o(W=>{const B={...W,[L]:Z};return L==="sofaType"&&(B.solidVolumePerM3=Z==="Straight"?.06:.08),B})};let h=s.mouskiRate;a.woodType==="Zan"&&(h=s.zanRate),a.woodType==="Aro"&&(h=s.aroRate),a.woodType==="BeechPine"&&(h=s.beechPineRate);const d=a.lengthM*a.solidVolumePerM3,f=d*h;let y=0;a.veneerType==="Walnut"?y=s.walnutVeneerRatePerM2:a.veneerType==="Oak"?y=s.oakVeneerRatePerM2:a.veneerType==="Beech"&&(y=s.beechVeneerRatePerM2);const b=a.veneerType==="None"?0:a.veneerAreaM2*y;let v=0;a.finishType==="PU matte"?v=s.finishPuMatteRatePerM2:a.finishType==="PU high gloss"?v=s.finishPuHighGlossRatePerM2:a.finishType==="NC"?v=s.finishNcRatePerM2:a.finishType==="Oil / stain"&&(v=s.finishOilRatePerM2);const _=a.veneerType==="None"?0:a.veneerAreaM2*v;let S=0;a.upholsteryQuality==="Low"?S=s.upholsterySofaLowPerM:a.upholsteryQuality==="High"&&(S=s.upholsterySofaHighPerM);const w=a.upholsteryQuality==="None"?0:a.lengthM*S;let T=0;a.fabricGrade==="Low"?T=s.fabricLowRate:a.fabricGrade==="High"&&(T=s.fabricHighRate);const C=a.upholsteryQuality==="None"?0:a.fabricMeters*T,A=a.laborHours*s.laborRatePerHour,j=f+b+_+w+C+a.overheadCost+A,D=j*a.profitMargin/100,N=j+D,q=()=>{const L=[];let Z="Mouski";a.woodType==="Zan"?Z="Zan (Beech)":a.woodType==="Aro"?Z="Aro (Oak)":a.woodType==="BeechPine"&&(Z="Beech pine"),L.push(`Wood: ${Z}`);let W="none";if(a.veneerType==="Walnut"?W="Walnut veneer":a.veneerType==="Oak"?W="Oak veneer":a.veneerType==="Beech"&&(W="Beech veneer"),L.push(`Veneer: ${W}`),L.push(`Finish: ${a.veneerType==="None"?"none":a.finishType}`),a.upholsteryQuality==="None")L.push("Fabric: none");else{const B=a.fabricGrade==="Low"?"Low grade":"High grade";L.push(`Fabric: ${B} (${T} EGP/m, ${a.fabricMeters.toFixed(2)} m)`)}return L.join("  ")},P=[];if(d>0){let L="Mouski";a.woodType==="Zan"?L="Zan (Beech)":a.woodType==="Aro"?L="Aro (Oak)":a.woodType==="BeechPine"&&(L="Beech pine"),P.push({name:`Natural solid wood (${L})`,unit:"m",qty:parseFloat(d.toFixed(3)),cost:h})}a.veneerType!=="None"&&a.veneerAreaM2>0&&P.push({name:`${a.veneerType} veneer`,unit:"m",qty:parseFloat(a.veneerAreaM2.toFixed(3)),cost:y}),a.veneerType!=="None"&&a.veneerAreaM2>0&&v>0&&P.push({name:`Finish (${a.finishType})`,unit:"m",qty:parseFloat(a.veneerAreaM2.toFixed(3)),cost:v}),a.upholsteryQuality!=="None"&&P.push({name:`Upholstery (${a.upholsteryQuality} quality)`,unit:"meter",qty:a.lengthM,cost:S}),a.upholsteryQuality!=="None"&&a.fabricMeters>0&&P.push({name:`Fabric (${a.fabricGrade} grade)`,unit:"meter",qty:a.fabricMeters,cost:T}),a.overheadCost>0&&P.push({name:"Overhead",unit:"EGP",qty:1,cost:a.overheadCost}),a.laborHours>0&&P.push({name:"Labor",unit:"hour",qty:a.laborHours,cost:s.laborRatePerHour});const U=()=>{const L=q();t({price:N,description:L,dimensions:"",materials:P})};return i?p.jsx("div",{className:"modal-backdrop",children:p.jsxs("div",{className:"modal-card",children:[p.jsx("h2",{className:"card-title",style:{marginBottom:12},children:"Sofa Costing (per meter)"}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Sofa type"}),p.jsxs("select",{className:"input",value:a.sofaType,onChange:L=>c("sofaType",L.target.value),children:[p.jsx("option",{value:"Straight",children:"Straight"}),p.jsx("option",{value:"Curved",children:"Curved"})]}),p.jsx("span",{className:"field-hint",children:"Curved sofas take more wood and labor."})]}),p.jsx(te,{label:"Length (m)",type:"number",value:String(a.lengthM),onChange:L=>c("lengthM",Number(L||0))}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Wood type"}),p.jsxs("select",{className:"input",value:a.woodType,onChange:L=>c("woodType",L.target.value),children:[p.jsx("option",{value:"Mouski",children:"Mouski"}),p.jsx("option",{value:"Zan",children:"Zan (Beech)"}),p.jsx("option",{value:"Aro",children:"Aro (Oak)"}),p.jsx("option",{value:"BeechPine",children:"Beech Pine"})]})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Veneer"}),p.jsxs("select",{className:"input",value:a.veneerType,onChange:L=>c("veneerType",L.target.value),children:[p.jsx("option",{value:"None",children:"None"}),p.jsx("option",{value:"Walnut",children:"Walnut veneer"}),p.jsx("option",{value:"Oak",children:"Oak veneer"}),p.jsx("option",{value:"Beech",children:"Beech veneer"})]})]}),a.veneerType!=="None"&&p.jsxs(p.Fragment,{children:[p.jsx(te,{label:"Veneer / finish area (m)",type:"number",value:String(a.veneerAreaM2),onChange:L=>c("veneerAreaM2",Number(L||0))}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Finish Type"}),p.jsxs("select",{className:"input",value:a.finishType,onChange:L=>c("finishType",L.target.value),children:[p.jsx("option",{children:"PU matte"}),p.jsx("option",{children:"PU high gloss"}),p.jsx("option",{children:"NC"}),p.jsx("option",{children:"Oil / stain"})]})]})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Upholstery quality"}),p.jsxs("select",{className:"input",value:a.upholsteryQuality,onChange:L=>c("upholsteryQuality",L.target.value),children:[p.jsx("option",{value:"None",children:"None"}),p.jsx("option",{value:"Low",children:"Low (1250 EGP/m default)"}),p.jsx("option",{value:"High",children:"High (1750 EGP/m default)"})]})]}),a.upholsteryQuality!=="None"&&p.jsxs(p.Fragment,{children:[p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Fabric grade"}),p.jsxs("select",{className:"input",value:a.fabricGrade,onChange:L=>c("fabricGrade",L.target.value),children:[p.jsx("option",{value:"Low",children:"Low (220 EGP/m default)"}),p.jsx("option",{value:"High",children:"High (450 EGP/m default)"})]})]}),p.jsx(te,{label:"Fabric length (m)",type:"number",value:String(a.fabricMeters),onChange:L=>c("fabricMeters",Number(L||0))})]}),p.jsx(te,{label:"Overhead (EGP)",type:"number",value:String(a.overheadCost),onChange:L=>c("overheadCost",Number(L||0))}),p.jsx(te,{label:"Labor hours",type:"number",value:String(a.laborHours),onChange:L=>c("laborHours",Number(L||0))}),p.jsx(te,{label:"Profit Margin %",type:"number",value:String(a.profitMargin),onChange:L=>c("profitMargin",Number(L||0))}),p.jsxs("div",{style:{fontSize:11,marginTop:8},children:[p.jsxs("div",{children:["Wood volume: ",d.toFixed(3)," m"]}),p.jsxs("div",{children:["Wood cost: ",f.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Veneer cost: ",b.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Finish cost: ",_.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Upholstery cost: ",w.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Fabric cost: ",C.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Overhead: ",a.overheadCost.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Labor: ",a.laborHours.toFixed(2)," h  ",s.laborRatePerHour," ","= ",A.toFixed(0)," EGP"]}),p.jsxs("div",{style:{marginTop:4,color:"#fff",fontWeight:600},children:["Material cost: ",j.toFixed(0)," EGP"]}),p.jsxs("div",{style:{color:"#fff",fontWeight:600},children:["Profit (",a.profitMargin,"%): ",D.toFixed(0)," EGP"]}),p.jsxs("div",{style:{color:"#fff",fontWeight:600},children:["Suggested selling price / sofa: ",N.toFixed(0)," EGP"]})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12},children:[p.jsx("button",{type:"button",className:"btn-outline",onClick:e,children:"Cancel"}),p.jsx("button",{type:"button",className:"btn-primary",onClick:U,children:"Apply to Item"})]})]})}):null},ij=({isOpen:i,onClose:e,onApply:t,pricing:s})=>{const[a,o]=k.useState({widthCm:80,heightCm:220,depthCm:40,bodyMaterial:"MDF16",faceMaterial:"MDF16",doorsCount:2,shelvesCount:4,drawersCount:0,veneerType:"None",finishType:"PU matte",accessoriesCost:s.defaultAccessories,overheadCost:0,laborHours:0,profitMargin:s.defaultProfitMargin}),c=(ie,vt)=>{o(Vt=>({...Vt,[ie]:vt}))},h=1.22*2.44,d=a.widthCm/100,f=a.heightCm/100,y=a.depthCm/100,b=2*f*y,v=2*d*y,_=d*f*.3,S=b+v+_,w=d*f,T=d*y,C=a.shelvesCount*T,A=S+C;let j=s.mdf16RatePerSheet;a.bodyMaterial==="MDF21"?j=s.mdf21RatePerSheet:a.bodyMaterial==="Blockboard18"?j=s.blockboard18RatePerSheet:a.bodyMaterial==="Ply18"?j=s.ply18RatePerSheet:a.bodyMaterial==="Foamboard"&&(j=s.foamboardRatePerSheet);const D=A/h,N=D*j,q=w/h,P=q*s.mdf10RatePerSheet,U=w;let L=s.mdf16RatePerSheet;a.faceMaterial==="MDF21"?L=s.mdf21RatePerSheet:a.faceMaterial==="Blockboard18"?L=s.blockboard18RatePerSheet:a.faceMaterial==="Ply18"?L=s.ply18RatePerSheet:a.faceMaterial==="Foamboard"&&(L=s.foamboardRatePerSheet);const Z=U/h,W=Z*L,G=d*f+S*.4;let ae=0,re=0,H=0;if(a.veneerType==="Walnut"?H=s.walnutVeneerRatePerM2:a.veneerType==="Oak"?H=s.oakVeneerRatePerM2:a.veneerType==="Beech"&&(H=s.beechVeneerRatePerM2),a.veneerType==="Walnut"||a.veneerType==="Oak"||a.veneerType==="Beech"){ae=G*H;let ie=0;a.finishType==="PU matte"?ie=s.finishPuMatteRatePerM2:a.finishType==="PU high gloss"?ie=s.finishPuHighGlossRatePerM2:a.finishType==="NC"?ie=s.finishNcRatePerM2:a.finishType==="Oil / stain"&&(ie=s.finishOilRatePerM2),re=G*ie}else if(a.veneerType==="HPL"||a.veneerType==="LPL"){const ie=G/h;a.veneerType==="HPL"?ae=ie*s.hplRatePerSheet:ae=ie*s.lplRatePerSheet,re=0}const ee=2*(.4*.18)+2*(.3*.18),ue=.4*.3,me=a.drawersCount*ee/h,we=a.drawersCount*ue/h,R=me*s.ply12RatePerSheet,K=we*s.mdf10RatePerSheet,ne=a.drawersCount*s.drawerRunnerRate;let se=2;a.heightCm>60&&a.heightCm<=120?se=3:a.heightCm>120&&a.heightCm<=200?se=4:a.heightCm>200&&a.heightCm<=300&&(se=5);const fe=a.doorsCount*se,ge=fe*s.doorHingeRate,Oe=a.laborHours*s.laborRatePerHour,ke=N+P+W+R+K+ne+ae+re+ge+a.accessoriesCost+a.overheadCost+Oe,Ge=ke*a.profitMargin/100,On=ke+Ge,et=[];if(D>0){let ie="MDF 16mm";a.bodyMaterial==="MDF21"?ie="MDF 21mm":a.bodyMaterial==="Blockboard18"?ie="Blockboard 18mm":a.bodyMaterial==="Ply18"?ie="Plywood 18mm":a.bodyMaterial==="Foamboard"&&(ie="Foamboard 18mm"),et.push({name:`Cabinet body core (${ie})`,unit:"sheet",qty:parseFloat(D.toFixed(3)),cost:j})}if(q>0&&et.push({name:"Back (MDF 10mm)",unit:"sheet",qty:parseFloat(q.toFixed(3)),cost:s.mdf10RatePerSheet}),Z>0){let ie="MDF 16mm";a.faceMaterial==="MDF21"?ie="MDF 21mm":a.faceMaterial==="Blockboard18"?ie="Blockboard 18mm":a.faceMaterial==="Ply18"?ie="Plywood 18mm":a.faceMaterial==="Foamboard"&&(ie="Foamboard 18mm"),et.push({name:`Face panel (${ie})`,unit:"sheet",qty:parseFloat(Z.toFixed(3)),cost:L})}if(a.drawersCount>0&&(et.push({name:"Drawer boxes PLY 12mm",unit:"sheet",qty:parseFloat(me.toFixed(3)),cost:s.ply12RatePerSheet}),et.push({name:"Drawer bottoms MDF 10mm",unit:"sheet",qty:parseFloat(we.toFixed(3)),cost:s.mdf10RatePerSheet}),et.push({name:"Drawer runners",unit:"pair",qty:a.drawersCount,cost:s.drawerRunnerRate})),a.veneerType!=="None")if(a.veneerType==="Walnut"||a.veneerType==="Oak"||a.veneerType==="Beech"){et.push({name:`Veneer (${a.veneerType})`,unit:"m",qty:parseFloat(G.toFixed(2)),cost:H});let ie=0;a.finishType==="PU matte"?ie=s.finishPuMatteRatePerM2:a.finishType==="PU high gloss"?ie=s.finishPuHighGlossRatePerM2:a.finishType==="NC"?ie=s.finishNcRatePerM2:a.finishType==="Oil / stain"&&(ie=s.finishOilRatePerM2),et.push({name:`Finish (${a.finishType})`,unit:"m",qty:parseFloat(G.toFixed(2)),cost:ie})}else{const ie=G/h,vt=a.veneerType==="HPL"?s.hplRatePerSheet:s.lplRatePerSheet;et.push({name:`Laminate (${a.veneerType})`,unit:"sheet",qty:parseFloat(ie.toFixed(3)),cost:vt})}fe>0&&et.push({name:"Door hinges",unit:"pcs",qty:fe,cost:s.doorHingeRate}),a.accessoriesCost>0&&et.push({name:"Accessories (handles, screws, etc.)",unit:"EGP",qty:1,cost:a.accessoriesCost}),a.overheadCost>0&&et.push({name:"Overhead",unit:"EGP",qty:1,cost:a.overheadCost}),a.laborHours>0&&et.push({name:"Labor",unit:"hour",qty:a.laborHours,cost:s.laborRatePerHour});const Yi=()=>{const ie=[];let vt="MDF 16mm";a.bodyMaterial==="MDF21"?vt="MDF 21mm":a.bodyMaterial==="Blockboard18"?vt="Blockboard 18mm":a.bodyMaterial==="Ply18"?vt="Plywood 18mm":a.bodyMaterial==="Foamboard"&&(vt="Foamboard 18mm"),ie.push(`Body: ${vt}`),ie.push("Back: MDF 10mm");let Vt="MDF 16mm";a.faceMaterial==="MDF21"?Vt="MDF 21mm":a.faceMaterial==="Blockboard18"?Vt="Blockboard 18mm":a.faceMaterial==="Ply18"?Vt="Plywood 18mm":a.faceMaterial==="Foamboard"&&(Vt="Foamboard 18mm"),ie.push(`Face: ${Vt}`),ie.push(`Doors: ${a.doorsCount} pcs`),ie.push(`Shelves: ${a.shelvesCount} pcs`),ie.push(`Drawers: ${a.drawersCount} pcs`);let Rn="none";return a.veneerType==="Walnut"?Rn="Walnut veneer":a.veneerType==="Oak"?Rn="Oak veneer":a.veneerType==="Beech"?Rn="Beech veneer":a.veneerType==="HPL"?Rn="HPL laminate":a.veneerType==="LPL"&&(Rn="LPL laminate"),ie.push(`Facing: ${Rn}`),a.veneerType==="Walnut"||a.veneerType==="Oak"||a.veneerType==="Beech"?ie.push(`Finish: ${a.finishType}`):a.veneerType==="None"?ie.push("Finish: none"):ie.push("Finish: integrated (HPL/LPL)"),ie.push(`Hinges: ${fe} pcs`),ie.join("  ")},Ki=()=>{const ie=Yi(),vt=`${a.heightCm}${a.widthCm}${a.depthCm} cm`;t({price:On,description:ie,dimensions:vt,materials:et})};return i?p.jsx("div",{className:"modal-backdrop",children:p.jsxs("div",{className:"modal-card",children:[p.jsx("h2",{className:"card-title",style:{marginBottom:12},children:"Cabinet Costing"}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Width (cm)",type:"number",value:String(a.widthCm),onChange:ie=>c("widthCm",Number(ie||0))}),p.jsx(te,{label:"Height (cm)",type:"number",value:String(a.heightCm),onChange:ie=>c("heightCm",Number(ie||0))}),p.jsx(te,{label:"Depth (cm)",type:"number",value:String(a.depthCm),onChange:ie=>c("depthCm",Number(ie||0))})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Body panel material"}),p.jsxs("select",{className:"input",value:a.bodyMaterial,onChange:ie=>c("bodyMaterial",ie.target.value),children:[p.jsx("option",{value:"MDF16",children:"MDF 16mm"}),p.jsx("option",{value:"MDF21",children:"MDF 21mm"}),p.jsx("option",{value:"Blockboard18",children:"Blockboard 18mm"}),p.jsx("option",{value:"Ply18",children:"Plywood 18mm"}),p.jsx("option",{value:"Foamboard",children:"Foamboard 18mm"})]}),p.jsx("span",{className:"field-hint",children:"Body panels (sides, top, bottom, dividers, shelves core)."})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Face panel material"}),p.jsxs("select",{className:"input",value:a.faceMaterial,onChange:ie=>c("faceMaterial",ie.target.value),children:[p.jsx("option",{value:"MDF16",children:"MDF 16mm"}),p.jsx("option",{value:"MDF21",children:"MDF 21mm"}),p.jsx("option",{value:"Blockboard18",children:"Blockboard 18mm"}),p.jsx("option",{value:"Ply18",children:"Plywood 18mm"}),p.jsx("option",{value:"Foamboard",children:"Foamboard 18mm"})]}),p.jsx("span",{className:"field-hint",children:"Face panel area is same as back (width  height)."})]}),p.jsxs("div",{className:"item-row",children:[p.jsx(te,{label:"Doors (pcs)",type:"number",value:String(a.doorsCount),onChange:ie=>c("doorsCount",Number(ie||0))}),p.jsx(te,{label:"Shelves (pcs)",type:"number",value:String(a.shelvesCount),onChange:ie=>c("shelvesCount",Number(ie||0))}),p.jsx(te,{label:"Drawers (pcs)",type:"number",value:String(a.drawersCount),onChange:ie=>c("drawersCount",Number(ie||0))})]}),p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Facing / Veneer"}),p.jsxs("select",{className:"input",value:a.veneerType,onChange:ie=>c("veneerType",ie.target.value),children:[p.jsx("option",{value:"None",children:"None"}),p.jsx("option",{value:"Walnut",children:"Walnut veneer"}),p.jsx("option",{value:"Oak",children:"Oak veneer"}),p.jsx("option",{value:"Beech",children:"Beech veneer"}),p.jsx("option",{value:"HPL",children:"HPL"}),p.jsx("option",{value:"LPL",children:"LPL"})]})]}),a.veneerType==="Walnut"||a.veneerType==="Oak"||a.veneerType==="Beech"?p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:"Finish Type"}),p.jsxs("select",{className:"input",value:a.finishType,onChange:ie=>c("finishType",ie.target.value),children:[p.jsx("option",{children:"PU matte"}),p.jsx("option",{children:"PU high gloss"}),p.jsx("option",{children:"NC"}),p.jsx("option",{children:"Oil / stain"})]})]}):null,p.jsx(te,{label:"Accessories (EGP)",type:"number",value:String(a.accessoriesCost),onChange:ie=>c("accessoriesCost",Number(ie||0))}),p.jsx(te,{label:"Overhead (EGP)",type:"number",value:String(a.overheadCost),onChange:ie=>c("overheadCost",Number(ie||0))}),p.jsx(te,{label:"Labor hours",type:"number",value:String(a.laborHours),onChange:ie=>c("laborHours",Number(ie||0))}),p.jsx(te,{label:"Profit Margin %",type:"number",value:String(a.profitMargin),onChange:ie=>c("profitMargin",Number(ie||0))}),p.jsxs("div",{style:{fontSize:11,marginTop:8},children:[p.jsxs("div",{children:["Body area (approx): ",S.toFixed(2)," m"]}),p.jsxs("div",{children:["Shelves area: ",C.toFixed(2)," m"]}),p.jsxs("div",{children:["Core area total: ",A.toFixed(2)," m"]}),p.jsxs("div",{children:["Back area: ",w.toFixed(2)," m"]}),p.jsxs("div",{children:["Face area: ",U.toFixed(2)," m"]}),p.jsxs("div",{children:["Core sheets: ",D.toFixed(3)]}),p.jsxs("div",{children:["Back sheets: ",q.toFixed(3)]}),p.jsxs("div",{children:["Face sheets: ",Z.toFixed(3)]}),p.jsxs("div",{children:["Body core cost: ",N.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Back cost: ",P.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Face cost: ",W.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Veneer / laminate cost: ",ae.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Finish cost: ",re.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Drawers PLY cost: ",R.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Drawers MDF cost: ",K.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Drawer runners: ",ne.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Hinges cost: ",ge.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Accessories: ",a.accessoriesCost.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Overhead: ",a.overheadCost.toFixed(0)," EGP"]}),p.jsxs("div",{children:["Labor: ",a.laborHours.toFixed(2)," h  ",s.laborRatePerHour," ","= ",Oe.toFixed(0)," EGP"]}),p.jsxs("div",{style:{marginTop:4,color:"#fff",fontWeight:600},children:["Material cost: ",ke.toFixed(0)," EGP"]}),p.jsxs("div",{style:{color:"#fff",fontWeight:600},children:["Profit (",a.profitMargin,"%): ",Ge.toFixed(0)," EGP"]}),p.jsxs("div",{style:{color:"#fff",fontWeight:600},children:["Suggested selling price / cabinet: ",On.toFixed(0)," EGP"]})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12},children:[p.jsx("button",{type:"button",className:"btn-outline",onClick:e,children:"Cancel"}),p.jsx("button",{type:"button",className:"btn-primary",onClick:Ki,children:"Apply to Item"})]})]})}):null},te=({label:i,value:e,onChange:t,type:s="text"})=>p.jsxs("label",{className:"field",children:[p.jsx("span",{className:"field-label",children:i}),p.jsx("input",{className:"input",type:s,value:e,onChange:a=>t(a.target.value)})]});function jo(i){return i+.5|0}const Ii=(i,e,t)=>Math.max(Math.min(i,t),e);function to(i){return Ii(jo(i*2.55),0,255)}function Gi(i){return Ii(jo(i*255),0,255)}function ci(i){return Ii(jo(i/2.55)/100,0,1)}function $b(i){return Ii(jo(i*100),0,100)}const pn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},uf=[..."0123456789ABCDEF"],sj=i=>uf[i&15],aj=i=>uf[(i&240)>>4]+uf[i&15],nc=i=>(i&240)>>4===(i&15),rj=i=>nc(i.r)&&nc(i.g)&&nc(i.b)&&nc(i.a);function oj(i){var e=i.length,t;return i[0]==="#"&&(e===4||e===5?t={r:255&pn[i[1]]*17,g:255&pn[i[2]]*17,b:255&pn[i[3]]*17,a:e===5?pn[i[4]]*17:255}:(e===7||e===9)&&(t={r:pn[i[1]]<<4|pn[i[2]],g:pn[i[3]]<<4|pn[i[4]],b:pn[i[5]]<<4|pn[i[6]],a:e===9?pn[i[7]]<<4|pn[i[8]]:255})),t}const lj=(i,e)=>i<255?e(i):"";function cj(i){var e=rj(i)?sj:aj;return i?"#"+e(i.r)+e(i.g)+e(i.b)+lj(i.a,e):void 0}const uj=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function F_(i,e,t){const s=e*Math.min(t,1-t),a=(o,c=(o+i/30)%12)=>t-s*Math.max(Math.min(c-3,9-c,1),-1);return[a(0),a(8),a(4)]}function hj(i,e,t){const s=(a,o=(a+i/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function dj(i,e,t){const s=F_(i,1,.5);let a;for(e+t>1&&(a=1/(e+t),e*=a,t*=a),a=0;a<3;a++)s[a]*=1-e-t,s[a]+=e;return s}function fj(i,e,t,s,a){return i===a?(e-t)/s+(e<t?6:0):e===a?(t-i)/s+2:(i-e)/s+4}function zf(i){const t=i.r/255,s=i.g/255,a=i.b/255,o=Math.max(t,s,a),c=Math.min(t,s,a),h=(o+c)/2;let d,f,y;return o!==c&&(y=o-c,f=h>.5?y/(2-o-c):y/(o+c),d=fj(t,s,a,y,o),d=d*60+.5),[d|0,f||0,h]}function Bf(i,e,t,s){return(Array.isArray(e)?i(e[0],e[1],e[2]):i(e,t,s)).map(Gi)}function Uf(i,e,t){return Bf(F_,i,e,t)}function gj(i,e,t){return Bf(dj,i,e,t)}function pj(i,e,t){return Bf(hj,i,e,t)}function I_(i){return(i%360+360)%360}function mj(i){const e=uj.exec(i);let t=255,s;if(!e)return;e[5]!==s&&(t=e[6]?to(+e[5]):Gi(+e[5]));const a=I_(+e[2]),o=+e[3]/100,c=+e[4]/100;return e[1]==="hwb"?s=gj(a,o,c):e[1]==="hsv"?s=pj(a,o,c):s=Uf(a,o,c),{r:s[0],g:s[1],b:s[2],a:t}}function yj(i,e){var t=zf(i);t[0]=I_(t[0]+e),t=Uf(t),i.r=t[0],i.g=t[1],i.b=t[2]}function bj(i){if(!i)return;const e=zf(i),t=e[0],s=$b(e[1]),a=$b(e[2]);return i.a<255?`hsla(${t}, ${s}%, ${a}%, ${ci(i.a)})`:`hsl(${t}, ${s}%, ${a}%)`}const Vb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Gb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function vj(){const i={},e=Object.keys(Gb),t=Object.keys(Vb);let s,a,o,c,h;for(s=0;s<e.length;s++){for(c=h=e[s],a=0;a<t.length;a++)o=t[a],h=h.replace(o,Vb[o]);o=parseInt(Gb[c],16),i[h]=[o>>16&255,o>>8&255,o&255]}return i}let ic;function _j(i){ic||(ic=vj(),ic.transparent=[0,0,0,0]);const e=ic[i.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const xj=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Sj(i){const e=xj.exec(i);let t=255,s,a,o;if(e){if(e[7]!==s){const c=+e[7];t=e[8]?to(c):Ii(c*255,0,255)}return s=+e[1],a=+e[3],o=+e[5],s=255&(e[2]?to(s):Ii(s,0,255)),a=255&(e[4]?to(a):Ii(a,0,255)),o=255&(e[6]?to(o):Ii(o,0,255)),{r:s,g:a,b:o,a:t}}}function wj(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${ci(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const Md=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,Ea=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Tj(i,e,t){const s=Ea(ci(i.r)),a=Ea(ci(i.g)),o=Ea(ci(i.b));return{r:Gi(Md(s+t*(Ea(ci(e.r))-s))),g:Gi(Md(a+t*(Ea(ci(e.g))-a))),b:Gi(Md(o+t*(Ea(ci(e.b))-o))),a:i.a+t*(e.a-i.a)}}function sc(i,e,t){if(i){let s=zf(i);s[e]=Math.max(0,Math.min(s[e]+s[e]*t,e===0?360:1)),s=Uf(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function q_(i,e){return i&&Object.assign(e||{},i)}function Wb(i){var e={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(e={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(e.a=Gi(i[3]))):(e=q_(i,{r:0,g:0,b:0,a:1}),e.a=Gi(e.a)),e}function Ej(i){return i.charAt(0)==="r"?Sj(i):mj(i)}class fo{constructor(e){if(e instanceof fo)return e;const t=typeof e;let s;t==="object"?s=Wb(e):t==="string"&&(s=oj(e)||_j(e)||Ej(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=q_(this._rgb);return e&&(e.a=ci(e.a)),e}set rgb(e){this._rgb=Wb(e)}rgbString(){return this._valid?wj(this._rgb):void 0}hexString(){return this._valid?cj(this._rgb):void 0}hslString(){return this._valid?bj(this._rgb):void 0}mix(e,t){if(e){const s=this.rgb,a=e.rgb;let o;const c=t===o?.5:t,h=2*c-1,d=s.a-a.a,f=((h*d===-1?h:(h+d)/(1+h*d))+1)/2;o=1-f,s.r=255&f*s.r+o*a.r+.5,s.g=255&f*s.g+o*a.g+.5,s.b=255&f*s.b+o*a.b+.5,s.a=c*s.a+(1-c)*a.a,this.rgb=s}return this}interpolate(e,t){return e&&(this._rgb=Tj(this._rgb,e._rgb,t)),this}clone(){return new fo(this.rgb)}alpha(e){return this._rgb.a=Gi(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=jo(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return sc(this._rgb,2,e),this}darken(e){return sc(this._rgb,2,-e),this}saturate(e){return sc(this._rgb,1,e),this}desaturate(e){return sc(this._rgb,1,-e),this}rotate(e){return yj(this._rgb,e),this}}function ri(){}const Cj=(()=>{let i=0;return()=>i++})();function ze(i){return i==null}function pt(i){if(Array.isArray&&Array.isArray(i))return!0;const e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Me(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function yn(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Pn(i,e){return yn(i)?i:e}function Te(i,e){return typeof i>"u"?e:i}const jj=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/e,$_=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function Xe(i,e,t){if(i&&typeof i.call=="function")return i.apply(t,e)}function He(i,e,t,s){let a,o,c;if(pt(i))for(o=i.length,a=0;a<o;a++)e.call(t,i[a],a);else if(Me(i))for(c=Object.keys(i),o=c.length,a=0;a<o;a++)e.call(t,i[c[a]],c[a])}function Dc(i,e){let t,s,a,o;if(!i||!e||i.length!==e.length)return!1;for(t=0,s=i.length;t<s;++t)if(a=i[t],o=e[t],a.datasetIndex!==o.datasetIndex||a.index!==o.index)return!1;return!0}function Nc(i){if(pt(i))return i.map(Nc);if(Me(i)){const e=Object.create(null),t=Object.keys(i),s=t.length;let a=0;for(;a<s;++a)e[t[a]]=Nc(i[t[a]]);return e}return i}function V_(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Aj(i,e,t,s){if(!V_(i))return;const a=e[i],o=t[i];Me(a)&&Me(o)?go(a,o,s):e[i]=Nc(o)}function go(i,e,t){const s=pt(e)?e:[e],a=s.length;if(!Me(i))return i;t=t||{};const o=t.merger||Aj;let c;for(let h=0;h<a;++h){if(c=s[h],!Me(c))continue;const d=Object.keys(c);for(let f=0,y=d.length;f<y;++f)o(d[f],i,c,t)}return i}function ao(i,e){return go(i,e,{merger:Oj})}function Oj(i,e,t){if(!V_(i))return;const s=e[i],a=t[i];Me(s)&&Me(a)?ao(s,a):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=Nc(a))}const Yb={"":i=>i,x:i=>i.x,y:i=>i.y};function Rj(i){const e=i.split("."),t=[];let s="";for(const a of e)s+=a,s.endsWith("\\")?s=s.slice(0,-1)+".":(t.push(s),s="");return t}function Mj(i){const e=Rj(i);return t=>{for(const s of e){if(s==="")break;t=t&&t[s]}return t}}function Ds(i,e){return(Yb[e]||(Yb[e]=Mj(e)))(i)}function Hf(i){return i.charAt(0).toUpperCase()+i.slice(1)}const po=i=>typeof i<"u",Wi=i=>typeof i=="function",Kb=(i,e)=>{if(i.size!==e.size)return!1;for(const t of i)if(!e.has(t))return!1;return!0};function kj(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const Fe=Math.PI,it=2*Fe,Dj=it+Fe,Pc=Number.POSITIVE_INFINITY,Nj=Fe/180,mt=Fe/2,ys=Fe/4,Xb=Fe*2/3,G_=Math.log10,Un=Math.sign;function ro(i,e,t){return Math.abs(i-e)<t}function Qb(i){const e=Math.round(i);i=ro(i,e,i/1e3)?e:i;const t=Math.pow(10,Math.floor(G_(i))),s=i/t;return(s<=1?1:s<=2?2:s<=5?5:10)*t}function Pj(i){const e=[],t=Math.sqrt(i);let s;for(s=1;s<t;s++)i%s===0&&(e.push(s),e.push(i/s));return t===(t|0)&&e.push(t),e.sort((a,o)=>a-o).pop(),e}function Lj(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function mo(i){return!Lj(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function zj(i,e){const t=Math.round(i);return t-e<=i&&t+e>=i}function Bj(i,e,t){let s,a,o;for(s=0,a=i.length;s<a;s++)o=i[s][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function ui(i){return i*(Fe/180)}function Uj(i){return i*(180/Fe)}function Jb(i){if(!yn(i))return;let e=1,t=0;for(;Math.round(i*e)/e!==i;)e*=10,t++;return t}function W_(i,e){const t=e.x-i.x,s=e.y-i.y,a=Math.sqrt(t*t+s*s);let o=Math.atan2(s,t);return o<-.5*Fe&&(o+=it),{angle:o,distance:a}}function hf(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function Hj(i,e){return(i-e+Dj)%it-Fe}function En(i){return(i%it+it)%it}function yo(i,e,t,s){const a=En(i),o=En(e),c=En(t),h=En(o-a),d=En(c-a),f=En(a-o),y=En(a-c);return a===o||a===c||s&&o===c||h>d&&f<y}function Rt(i,e,t){return Math.max(e,Math.min(t,i))}function Fj(i){return Rt(i,-32768,32767)}function qi(i,e,t,s=1e-6){return i>=Math.min(e,t)-s&&i<=Math.max(e,t)+s}function Ff(i,e,t){t=t||(c=>i[c]<e);let s=i.length-1,a=0,o;for(;s-a>1;)o=a+s>>1,t(o)?a=o:s=o;return{lo:a,hi:s}}const Rs=(i,e,t,s)=>Ff(i,t,s?a=>{const o=i[a][e];return o<t||o===t&&i[a+1][e]===t}:a=>i[a][e]<t),Ij=(i,e,t)=>Ff(i,t,s=>i[s][e]>=t);function qj(i,e,t){let s=0,a=i.length;for(;s<a&&i[s]<e;)s++;for(;a>s&&i[a-1]>t;)a--;return s>0||a<i.length?i.slice(s,a):i}const Y_=["push","pop","shift","splice","unshift"];function $j(i,e){if(i._chartjs){i._chartjs.listeners.push(e);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Y_.forEach(t=>{const s="_onData"+Hf(t),a=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...o){const c=a.apply(this,o);return i._chartjs.listeners.forEach(h=>{typeof h[s]=="function"&&h[s](...o)}),c}})})}function Zb(i,e){const t=i._chartjs;if(!t)return;const s=t.listeners,a=s.indexOf(e);a!==-1&&s.splice(a,1),!(s.length>0)&&(Y_.forEach(o=>{delete i[o]}),delete i._chartjs)}function K_(i){const e=new Set(i);return e.size===i.length?i:Array.from(e)}const X_=(function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame})();function Q_(i,e){let t=[],s=!1;return function(...a){t=a,s||(s=!0,X_.call(window,()=>{s=!1,i.apply(e,t)}))}}function Vj(i,e){let t;return function(...s){return e?(clearTimeout(t),t=setTimeout(i,e,s)):i.apply(this,s),e}}const If=i=>i==="start"?"left":i==="end"?"right":"center",Ot=(i,e,t)=>i==="start"?e:i==="end"?t:(e+t)/2,Gj=(i,e,t,s)=>i===(s?"left":"right")?t:i==="center"?(e+t)/2:e;function Wj(i,e,t){const s=e.length;let a=0,o=s;if(i._sorted){const{iScale:c,vScale:h,_parsed:d}=i,f=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,y=c.axis,{min:b,max:v,minDefined:_,maxDefined:S}=c.getUserBounds();if(_){if(a=Math.min(Rs(d,y,b).lo,t?s:Rs(e,y,c.getPixelForValue(b)).lo),f){const w=d.slice(0,a+1).reverse().findIndex(T=>!ze(T[h.axis]));a-=Math.max(0,w)}a=Rt(a,0,s-1)}if(S){let w=Math.max(Rs(d,c.axis,v,!0).hi+1,t?0:Rs(e,y,c.getPixelForValue(v),!0).hi+1);if(f){const T=d.slice(w-1).findIndex(C=>!ze(C[h.axis]));w+=Math.max(0,T)}o=Rt(w,a,s)-a}else o=s-a}return{start:a,count:o}}function Yj(i){const{xScale:e,yScale:t,_scaleRanges:s}=i,a={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!s)return i._scaleRanges=a,!0;const o=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==t.min||s.ymax!==t.max;return Object.assign(s,a),o}const ac=i=>i===0||i===1,ev=(i,e,t)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-e)*it/t)),tv=(i,e,t)=>Math.pow(2,-10*i)*Math.sin((i-e)*it/t)+1,oo={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*mt)+1,easeOutSine:i=>Math.sin(i*mt),easeInOutSine:i=>-.5*(Math.cos(Fe*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>ac(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>ac(i)?i:ev(i,.075,.3),easeOutElastic:i=>ac(i)?i:tv(i,.075,.3),easeInOutElastic(i){return ac(i)?i:i<.5?.5*ev(i*2,.1125,.45):.5+.5*tv(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?.5*(i*i*(((e*=1.525)+1)*i-e)):.5*((i-=2)*i*(((e*=1.525)+1)*i+e)+2)},easeInBounce:i=>1-oo.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?oo.easeInBounce(i*2)*.5:oo.easeOutBounce(i*2-1)*.5+.5};function qf(i){if(i&&typeof i=="object"){const e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function nv(i){return qf(i)?i:new fo(i)}function kd(i){return qf(i)?i:new fo(i).saturate(.5).darken(.1).hexString()}const Kj=["x","y","borderWidth","radius","tension"],Xj=["color","borderColor","backgroundColor"];function Qj(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),i.set("animations",{colors:{type:"color",properties:Xj},numbers:{type:"number",properties:Kj}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Jj(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const iv=new Map;function Zj(i,e){e=e||{};const t=i+JSON.stringify(e);let s=iv.get(t);return s||(s=new Intl.NumberFormat(i,e),iv.set(t,s)),s}function $f(i,e,t){return Zj(e,t).format(i)}const e2={values(i){return pt(i)?i:""+i},numeric(i,e,t){if(i===0)return"0";const s=this.chart.options.locale;let a,o=i;if(t.length>1){const f=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(f<1e-4||f>1e15)&&(a="scientific"),o=t2(i,t)}const c=G_(Math.abs(o)),h=isNaN(c)?1:Math.max(Math.min(-1*Math.floor(c),20),0),d={notation:a,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(d,this.options.ticks.format),$f(i,s,d)}};function t2(i,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&i!==Math.floor(i)&&(t=i-Math.floor(i)),t}var J_={formatters:e2};function n2(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:J_.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ns=Object.create(null),df=Object.create(null);function lo(i,e){if(!e)return i;const t=e.split(".");for(let s=0,a=t.length;s<a;++s){const o=t[s];i=i[o]||(i[o]=Object.create(null))}return i}function Dd(i,e,t){return typeof e=="string"?go(lo(i,e),t):go(lo(i,""),e)}class i2{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,a)=>kd(a.backgroundColor),this.hoverBorderColor=(s,a)=>kd(a.borderColor),this.hoverColor=(s,a)=>kd(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Dd(this,e,t)}get(e){return lo(this,e)}describe(e,t){return Dd(df,e,t)}override(e,t){return Dd(Ns,e,t)}route(e,t,s,a){const o=lo(this,e),c=lo(this,s),h="_"+t;Object.defineProperties(o,{[h]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){const d=this[h],f=c[a];return Me(d)?Object.assign({},f,d):Te(d,f)},set(d){this[h]=d}}})}apply(e){e.forEach(t=>t(this))}}var ot=new i2({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Qj,Jj,n2]);function s2(i){return!i||ze(i.size)||ze(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function sv(i,e,t,s,a){let o=e[a];return o||(o=e[a]=i.measureText(a).width,t.push(a)),o>s&&(s=o),s}function bs(i,e,t){const s=i.currentDevicePixelRatio,a=t!==0?Math.max(t/2,.5):0;return Math.round((e-a)*s)/s+a}function av(i,e){!e&&!i||(e=e||i.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore())}function ff(i,e,t,s){Z_(i,e,t,s,null)}function Z_(i,e,t,s,a){let o,c,h,d,f,y,b,v;const _=e.pointStyle,S=e.rotation,w=e.radius;let T=(S||0)*Nj;if(_&&typeof _=="object"&&(o=_.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){i.save(),i.translate(t,s),i.rotate(T),i.drawImage(_,-_.width/2,-_.height/2,_.width,_.height),i.restore();return}if(!(isNaN(w)||w<=0)){switch(i.beginPath(),_){default:a?i.ellipse(t,s,a/2,w,0,0,it):i.arc(t,s,w,0,it),i.closePath();break;case"triangle":y=a?a/2:w,i.moveTo(t+Math.sin(T)*y,s-Math.cos(T)*w),T+=Xb,i.lineTo(t+Math.sin(T)*y,s-Math.cos(T)*w),T+=Xb,i.lineTo(t+Math.sin(T)*y,s-Math.cos(T)*w),i.closePath();break;case"rectRounded":f=w*.516,d=w-f,c=Math.cos(T+ys)*d,b=Math.cos(T+ys)*(a?a/2-f:d),h=Math.sin(T+ys)*d,v=Math.sin(T+ys)*(a?a/2-f:d),i.arc(t-b,s-h,f,T-Fe,T-mt),i.arc(t+v,s-c,f,T-mt,T),i.arc(t+b,s+h,f,T,T+mt),i.arc(t-v,s+c,f,T+mt,T+Fe),i.closePath();break;case"rect":if(!S){d=Math.SQRT1_2*w,y=a?a/2:d,i.rect(t-y,s-d,2*y,2*d);break}T+=ys;case"rectRot":b=Math.cos(T)*(a?a/2:w),c=Math.cos(T)*w,h=Math.sin(T)*w,v=Math.sin(T)*(a?a/2:w),i.moveTo(t-b,s-h),i.lineTo(t+v,s-c),i.lineTo(t+b,s+h),i.lineTo(t-v,s+c),i.closePath();break;case"crossRot":T+=ys;case"cross":b=Math.cos(T)*(a?a/2:w),c=Math.cos(T)*w,h=Math.sin(T)*w,v=Math.sin(T)*(a?a/2:w),i.moveTo(t-b,s-h),i.lineTo(t+b,s+h),i.moveTo(t+v,s-c),i.lineTo(t-v,s+c);break;case"star":b=Math.cos(T)*(a?a/2:w),c=Math.cos(T)*w,h=Math.sin(T)*w,v=Math.sin(T)*(a?a/2:w),i.moveTo(t-b,s-h),i.lineTo(t+b,s+h),i.moveTo(t+v,s-c),i.lineTo(t-v,s+c),T+=ys,b=Math.cos(T)*(a?a/2:w),c=Math.cos(T)*w,h=Math.sin(T)*w,v=Math.sin(T)*(a?a/2:w),i.moveTo(t-b,s-h),i.lineTo(t+b,s+h),i.moveTo(t+v,s-c),i.lineTo(t-v,s+c);break;case"line":c=a?a/2:Math.cos(T)*w,h=Math.sin(T)*w,i.moveTo(t-c,s-h),i.lineTo(t+c,s+h);break;case"dash":i.moveTo(t,s),i.lineTo(t+Math.cos(T)*(a?a/2:w),s+Math.sin(T)*w);break;case!1:i.closePath();break}i.fill(),e.borderWidth>0&&i.stroke()}}function bo(i,e,t){return t=t||.5,!e||i&&i.x>e.left-t&&i.x<e.right+t&&i.y>e.top-t&&i.y<e.bottom+t}function Vf(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function Gf(i){i.restore()}function a2(i,e,t,s,a){if(!e)return i.lineTo(t.x,t.y);if(a==="middle"){const o=(e.x+t.x)/2;i.lineTo(o,e.y),i.lineTo(o,t.y)}else a==="after"!=!!s?i.lineTo(e.x,t.y):i.lineTo(t.x,e.y);i.lineTo(t.x,t.y)}function r2(i,e,t,s){if(!e)return i.lineTo(t.x,t.y);i.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?t.cp2x:t.cp1x,s?t.cp2y:t.cp1y,t.x,t.y)}function o2(i,e){e.translation&&i.translate(e.translation[0],e.translation[1]),ze(e.rotation)||i.rotate(e.rotation),e.color&&(i.fillStyle=e.color),e.textAlign&&(i.textAlign=e.textAlign),e.textBaseline&&(i.textBaseline=e.textBaseline)}function l2(i,e,t,s,a){if(a.strikethrough||a.underline){const o=i.measureText(s),c=e-o.actualBoundingBoxLeft,h=e+o.actualBoundingBoxRight,d=t-o.actualBoundingBoxAscent,f=t+o.actualBoundingBoxDescent,y=a.strikethrough?(d+f)/2:f;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=a.decorationWidth||2,i.moveTo(c,y),i.lineTo(h,y),i.stroke()}}function c2(i,e){const t=i.fillStyle;i.fillStyle=e.color,i.fillRect(e.left,e.top,e.width,e.height),i.fillStyle=t}function vo(i,e,t,s,a,o={}){const c=pt(e)?e:[e],h=o.strokeWidth>0&&o.strokeColor!=="";let d,f;for(i.save(),i.font=a.string,o2(i,o),d=0;d<c.length;++d)f=c[d],o.backdrop&&c2(i,o.backdrop),h&&(o.strokeColor&&(i.strokeStyle=o.strokeColor),ze(o.strokeWidth)||(i.lineWidth=o.strokeWidth),i.strokeText(f,t,s,o.maxWidth)),i.fillText(f,t,s,o.maxWidth),l2(i,t,s,f,o),s+=Number(a.lineHeight);i.restore()}function Lc(i,e){const{x:t,y:s,w:a,h:o,radius:c}=e;i.arc(t+c.topLeft,s+c.topLeft,c.topLeft,1.5*Fe,Fe,!0),i.lineTo(t,s+o-c.bottomLeft),i.arc(t+c.bottomLeft,s+o-c.bottomLeft,c.bottomLeft,Fe,mt,!0),i.lineTo(t+a-c.bottomRight,s+o),i.arc(t+a-c.bottomRight,s+o-c.bottomRight,c.bottomRight,mt,0,!0),i.lineTo(t+a,s+c.topRight),i.arc(t+a-c.topRight,s+c.topRight,c.topRight,0,-mt,!0),i.lineTo(t+c.topLeft,s)}const u2=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,h2=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function d2(i,e){const t=(""+i).match(u2);if(!t||t[1]==="normal")return e*1.2;switch(i=+t[2],t[3]){case"px":return i;case"%":i/=100;break}return e*i}const f2=i=>+i||0;function Wf(i,e){const t={},s=Me(e),a=s?Object.keys(e):e,o=Me(i)?s?c=>Te(i[c],i[e[c]]):c=>i[c]:()=>i;for(const c of a)t[c]=f2(o(c));return t}function ex(i){return Wf(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Da(i){return Wf(i,["topLeft","topRight","bottomLeft","bottomRight"])}function bn(i){const e=ex(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Mt(i,e){i=i||{},e=e||ot.font;let t=Te(i.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let s=Te(i.style,e.style);s&&!(""+s).match(h2)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const a={family:Te(i.family,e.family),lineHeight:d2(Te(i.lineHeight,e.lineHeight),t),size:t,style:s,weight:Te(i.weight,e.weight),string:""};return a.string=s2(a),a}function rc(i,e,t,s){let a,o,c;for(a=0,o=i.length;a<o;++a)if(c=i[a],c!==void 0&&c!==void 0)return c}function g2(i,e,t){const{min:s,max:a}=i,o=$_(e,(a-s)/2),c=(h,d)=>t&&h===0?0:h+d;return{min:c(s,-Math.abs(o)),max:c(a,o)}}function Ps(i,e){return Object.assign(Object.create(i),e)}function Yf(i,e=[""],t,s,a=()=>i[0]){const o=t||i;typeof s>"u"&&(s=sx("_fallback",i));const c={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:o,_fallback:s,_getTarget:a,override:h=>Yf([h,...i],e,o,s)};return new Proxy(c,{deleteProperty(h,d){return delete h[d],delete h._keys,delete i[0][d],!0},get(h,d){return nx(h,d,()=>S2(d,e,i,h))},getOwnPropertyDescriptor(h,d){return Reflect.getOwnPropertyDescriptor(h._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(h,d){return ov(h).includes(d)},ownKeys(h){return ov(h)},set(h,d,f){const y=h._storage||(h._storage=a());return h[d]=y[d]=f,delete h._keys,!0}})}function Ba(i,e,t,s){const a={_cacheable:!1,_proxy:i,_context:e,_subProxy:t,_stack:new Set,_descriptors:tx(i,s),setContext:o=>Ba(i,o,t,s),override:o=>Ba(i.override(o),e,t,s)};return new Proxy(a,{deleteProperty(o,c){return delete o[c],delete i[c],!0},get(o,c,h){return nx(o,c,()=>m2(o,c,h))},getOwnPropertyDescriptor(o,c){return o._descriptors.allKeys?Reflect.has(i,c)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,c)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(o,c){return Reflect.has(i,c)},ownKeys(){return Reflect.ownKeys(i)},set(o,c,h){return i[c]=h,delete o[c],!0}})}function tx(i,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:s=e.indexable,_allKeys:a=e.allKeys}=i;return{allKeys:a,scriptable:t,indexable:s,isScriptable:Wi(t)?t:()=>t,isIndexable:Wi(s)?s:()=>s}}const p2=(i,e)=>i?i+Hf(e):e,Kf=(i,e)=>Me(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function nx(i,e,t){if(Object.prototype.hasOwnProperty.call(i,e)||e==="constructor")return i[e];const s=t();return i[e]=s,s}function m2(i,e,t){const{_proxy:s,_context:a,_subProxy:o,_descriptors:c}=i;let h=s[e];return Wi(h)&&c.isScriptable(e)&&(h=y2(e,h,i,t)),pt(h)&&h.length&&(h=b2(e,h,i,c.isIndexable)),Kf(e,h)&&(h=Ba(h,a,o&&o[e],c)),h}function y2(i,e,t,s){const{_proxy:a,_context:o,_subProxy:c,_stack:h}=t;if(h.has(i))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+i);h.add(i);let d=e(o,c||s);return h.delete(i),Kf(i,d)&&(d=Xf(a._scopes,a,i,d)),d}function b2(i,e,t,s){const{_proxy:a,_context:o,_subProxy:c,_descriptors:h}=t;if(typeof o.index<"u"&&s(i))return e[o.index%e.length];if(Me(e[0])){const d=e,f=a._scopes.filter(y=>y!==d);e=[];for(const y of d){const b=Xf(f,a,i,y);e.push(Ba(b,o,c&&c[i],h))}}return e}function ix(i,e,t){return Wi(i)?i(e,t):i}const v2=(i,e)=>i===!0?e:typeof i=="string"?Ds(e,i):void 0;function _2(i,e,t,s,a){for(const o of e){const c=v2(t,o);if(c){i.add(c);const h=ix(c._fallback,t,a);if(typeof h<"u"&&h!==t&&h!==s)return h}else if(c===!1&&typeof s<"u"&&t!==s)return null}return!1}function Xf(i,e,t,s){const a=e._rootScopes,o=ix(e._fallback,t,s),c=[...i,...a],h=new Set;h.add(s);let d=rv(h,c,t,o||t,s);return d===null||typeof o<"u"&&o!==t&&(d=rv(h,c,o,d,s),d===null)?!1:Yf(Array.from(h),[""],a,o,()=>x2(e,t,s))}function rv(i,e,t,s,a){for(;t;)t=_2(i,e,t,s,a);return t}function x2(i,e,t){const s=i._getTarget();e in s||(s[e]={});const a=s[e];return pt(a)&&Me(t)?t:a||{}}function S2(i,e,t,s){let a;for(const o of e)if(a=sx(p2(o,i),t),typeof a<"u")return Kf(i,a)?Xf(t,s,i,a):a}function sx(i,e){for(const t of e){if(!t)continue;const s=t[i];if(typeof s<"u")return s}}function ov(i){let e=i._keys;return e||(e=i._keys=w2(i._scopes)),e}function w2(i){const e=new Set;for(const t of i)for(const s of Object.keys(t).filter(a=>!a.startsWith("_")))e.add(s);return Array.from(e)}const T2=Number.EPSILON||1e-14,Ua=(i,e)=>e<i.length&&!i[e].skip&&i[e],ax=i=>i==="x"?"y":"x";function E2(i,e,t,s){const a=i.skip?e:i,o=e,c=t.skip?e:t,h=hf(o,a),d=hf(c,o);let f=h/(h+d),y=d/(h+d);f=isNaN(f)?0:f,y=isNaN(y)?0:y;const b=s*f,v=s*y;return{previous:{x:o.x-b*(c.x-a.x),y:o.y-b*(c.y-a.y)},next:{x:o.x+v*(c.x-a.x),y:o.y+v*(c.y-a.y)}}}function C2(i,e,t){const s=i.length;let a,o,c,h,d,f=Ua(i,0);for(let y=0;y<s-1;++y)if(d=f,f=Ua(i,y+1),!(!d||!f)){if(ro(e[y],0,T2)){t[y]=t[y+1]=0;continue}a=t[y]/e[y],o=t[y+1]/e[y],h=Math.pow(a,2)+Math.pow(o,2),!(h<=9)&&(c=3/Math.sqrt(h),t[y]=a*c*e[y],t[y+1]=o*c*e[y])}}function j2(i,e,t="x"){const s=ax(t),a=i.length;let o,c,h,d=Ua(i,0);for(let f=0;f<a;++f){if(c=h,h=d,d=Ua(i,f+1),!h)continue;const y=h[t],b=h[s];c&&(o=(y-c[t])/3,h[`cp1${t}`]=y-o,h[`cp1${s}`]=b-o*e[f]),d&&(o=(d[t]-y)/3,h[`cp2${t}`]=y+o,h[`cp2${s}`]=b+o*e[f])}}function A2(i,e="x"){const t=ax(e),s=i.length,a=Array(s).fill(0),o=Array(s);let c,h,d,f=Ua(i,0);for(c=0;c<s;++c)if(h=d,d=f,f=Ua(i,c+1),!!d){if(f){const y=f[e]-d[e];a[c]=y!==0?(f[t]-d[t])/y:0}o[c]=h?f?Un(a[c-1])!==Un(a[c])?0:(a[c-1]+a[c])/2:a[c-1]:a[c]}C2(i,a,o),j2(i,o,e)}function oc(i,e,t){return Math.max(Math.min(i,t),e)}function O2(i,e){let t,s,a,o,c,h=bo(i[0],e);for(t=0,s=i.length;t<s;++t)c=o,o=h,h=t<s-1&&bo(i[t+1],e),o&&(a=i[t],c&&(a.cp1x=oc(a.cp1x,e.left,e.right),a.cp1y=oc(a.cp1y,e.top,e.bottom)),h&&(a.cp2x=oc(a.cp2x,e.left,e.right),a.cp2y=oc(a.cp2y,e.top,e.bottom)))}function R2(i,e,t,s,a){let o,c,h,d;if(e.spanGaps&&(i=i.filter(f=>!f.skip)),e.cubicInterpolationMode==="monotone")A2(i,a);else{let f=s?i[i.length-1]:i[0];for(o=0,c=i.length;o<c;++o)h=i[o],d=E2(f,h,i[Math.min(o+1,c-(s?0:1))%c],e.tension),h.cp1x=d.previous.x,h.cp1y=d.previous.y,h.cp2x=d.next.x,h.cp2y=d.next.y,f=h}e.capBezierPoints&&O2(i,t)}function Qf(){return typeof window<"u"&&typeof document<"u"}function Jf(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function zc(i,e,t){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*e.parentNode[t])):s=i,s}const Kc=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function M2(i,e){return Kc(i).getPropertyValue(e)}const k2=["top","right","bottom","left"];function Ms(i,e,t){const s={};t=t?"-"+t:"";for(let a=0;a<4;a++){const o=k2[a];s[o]=parseFloat(i[e+"-"+o+t])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const D2=(i,e,t)=>(i>0||e>0)&&(!t||!t.shadowRoot);function N2(i,e){const t=i.touches,s=t&&t.length?t[0]:i,{offsetX:a,offsetY:o}=s;let c=!1,h,d;if(D2(a,o,i.target))h=a,d=o;else{const f=e.getBoundingClientRect();h=s.clientX-f.left,d=s.clientY-f.top,c=!0}return{x:h,y:d,box:c}}function Es(i,e){if("native"in i)return i;const{canvas:t,currentDevicePixelRatio:s}=e,a=Kc(t),o=a.boxSizing==="border-box",c=Ms(a,"padding"),h=Ms(a,"border","width"),{x:d,y:f,box:y}=N2(i,t),b=c.left+(y&&h.left),v=c.top+(y&&h.top);let{width:_,height:S}=e;return o&&(_-=c.width+h.width,S-=c.height+h.height),{x:Math.round((d-b)/_*t.width/s),y:Math.round((f-v)/S*t.height/s)}}function P2(i,e,t){let s,a;if(e===void 0||t===void 0){const o=i&&Jf(i);if(!o)e=i.clientWidth,t=i.clientHeight;else{const c=o.getBoundingClientRect(),h=Kc(o),d=Ms(h,"border","width"),f=Ms(h,"padding");e=c.width-f.width-d.width,t=c.height-f.height-d.height,s=zc(h.maxWidth,o,"clientWidth"),a=zc(h.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:s||Pc,maxHeight:a||Pc}}const $i=i=>Math.round(i*10)/10;function L2(i,e,t,s){const a=Kc(i),o=Ms(a,"margin"),c=zc(a.maxWidth,i,"clientWidth")||Pc,h=zc(a.maxHeight,i,"clientHeight")||Pc,d=P2(i,e,t);let{width:f,height:y}=d;if(a.boxSizing==="content-box"){const v=Ms(a,"border","width"),_=Ms(a,"padding");f-=_.width+v.width,y-=_.height+v.height}return f=Math.max(0,f-o.width),y=Math.max(0,s?f/s:y-o.height),f=$i(Math.min(f,c,d.maxWidth)),y=$i(Math.min(y,h,d.maxHeight)),f&&!y&&(y=$i(f/2)),(e!==void 0||t!==void 0)&&s&&d.height&&y>d.height&&(y=d.height,f=$i(Math.floor(y*s))),{width:f,height:y}}function lv(i,e,t){const s=e||1,a=$i(i.height*s),o=$i(i.width*s);i.height=$i(i.height),i.width=$i(i.width);const c=i.canvas;return c.style&&(t||!c.style.height&&!c.style.width)&&(c.style.height=`${i.height}px`,c.style.width=`${i.width}px`),i.currentDevicePixelRatio!==s||c.height!==a||c.width!==o?(i.currentDevicePixelRatio=s,c.height=a,c.width=o,i.ctx.setTransform(s,0,0,s,0,0),!0):!1}const z2=(function(){let i=!1;try{const e={get passive(){return i=!0,!1}};Qf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return i})();function cv(i,e){const t=M2(i,e),s=t&&t.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Cs(i,e,t,s){return{x:i.x+t*(e.x-i.x),y:i.y+t*(e.y-i.y)}}function B2(i,e,t,s){return{x:i.x+t*(e.x-i.x),y:s==="middle"?t<.5?i.y:e.y:s==="after"?t<1?i.y:e.y:t>0?e.y:i.y}}function U2(i,e,t,s){const a={x:i.cp2x,y:i.cp2y},o={x:e.cp1x,y:e.cp1y},c=Cs(i,a,t),h=Cs(a,o,t),d=Cs(o,e,t),f=Cs(c,h,t),y=Cs(h,d,t);return Cs(f,y,t)}const H2=function(i,e){return{x(t){return i+i+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,s){return t-s},leftForLtr(t,s){return t-s}}},F2=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,e){return i+e},leftForLtr(i,e){return i}}};function Na(i,e,t){return i?H2(e,t):F2()}function rx(i,e){let t,s;(e==="ltr"||e==="rtl")&&(t=i.canvas.style,s=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),i.prevTextDirection=s)}function ox(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}function lx(i){return i==="angle"?{between:yo,compare:Hj,normalize:En}:{between:qi,compare:(e,t)=>e-t,normalize:e=>e}}function uv({start:i,end:e,count:t,loop:s,style:a}){return{start:i%t,end:e%t,loop:s&&(e-i+1)%t===0,style:a}}function I2(i,e,t){const{property:s,start:a,end:o}=t,{between:c,normalize:h}=lx(s),d=e.length;let{start:f,end:y,loop:b}=i,v,_;if(b){for(f+=d,y+=d,v=0,_=d;v<_&&c(h(e[f%d][s]),a,o);++v)f--,y--;f%=d,y%=d}return y<f&&(y+=d),{start:f,end:y,loop:b,style:i.style}}function q2(i,e,t){if(!t)return[i];const{property:s,start:a,end:o}=t,c=e.length,{compare:h,between:d,normalize:f}=lx(s),{start:y,end:b,loop:v,style:_}=I2(i,e,t),S=[];let w=!1,T=null,C,A,j;const D=()=>d(a,j,C)&&h(a,j)!==0,N=()=>h(o,C)===0||d(o,j,C),q=()=>w||D(),P=()=>!w||N();for(let U=y,L=y;U<=b;++U)A=e[U%c],!A.skip&&(C=f(A[s]),C!==j&&(w=d(C,a,o),T===null&&q()&&(T=h(C,a)===0?U:L),T!==null&&P()&&(S.push(uv({start:T,end:U,loop:v,count:c,style:_})),T=null),L=U,j=C));return T!==null&&S.push(uv({start:T,end:b,loop:v,count:c,style:_})),S}function $2(i,e){const t=[],s=i.segments;for(let a=0;a<s.length;a++){const o=q2(s[a],i.points,e);o.length&&t.push(...o)}return t}function V2(i,e,t,s){let a=0,o=e-1;if(t&&!s)for(;a<e&&!i[a].skip;)a++;for(;a<e&&i[a].skip;)a++;for(a%=e,t&&(o+=a);o>a&&i[o%e].skip;)o--;return o%=e,{start:a,end:o}}function G2(i,e,t,s){const a=i.length,o=[];let c=e,h=i[e],d;for(d=e+1;d<=t;++d){const f=i[d%a];f.skip||f.stop?h.skip||(s=!1,o.push({start:e%a,end:(d-1)%a,loop:s}),e=c=f.stop?d:null):(c=d,h.skip&&(e=d)),h=f}return c!==null&&o.push({start:e%a,end:c%a,loop:s}),o}function W2(i,e){const t=i.points,s=i.options.spanGaps,a=t.length;if(!a)return[];const o=!!i._loop,{start:c,end:h}=V2(t,a,o,s);if(s===!0)return hv(i,[{start:c,end:h,loop:o}],t,e);const d=h<c?h+a:h,f=!!i._fullLoop&&c===0&&h===a-1;return hv(i,G2(t,c,d,f),t,e)}function hv(i,e,t,s){return!s||!s.setContext||!t?e:Y2(i,e,t,s)}function Y2(i,e,t,s){const a=i._chart.getContext(),o=dv(i.options),{_datasetIndex:c,options:{spanGaps:h}}=i,d=t.length,f=[];let y=o,b=e[0].start,v=b;function _(S,w,T,C){const A=h?-1:1;if(S!==w){for(S+=d;t[S%d].skip;)S-=A;for(;t[w%d].skip;)w+=A;S%d!==w%d&&(f.push({start:S%d,end:w%d,loop:T,style:C}),y=C,b=w%d)}}for(const S of e){b=h?b:S.start;let w=t[b%d],T;for(v=b+1;v<=S.end;v++){const C=t[v%d];T=dv(s.setContext(Ps(a,{type:"segment",p0:w,p1:C,p0DataIndex:(v-1)%d,p1DataIndex:v%d,datasetIndex:c}))),K2(T,y)&&_(b,v-1,S.loop,y),w=C,y=T}b<v-1&&_(b,v-1,S.loop,y)}return f}function dv(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function K2(i,e){if(!e)return!1;const t=[],s=function(a,o){return qf(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(i,s)!==JSON.stringify(e,s)}function lc(i,e,t){return i.options.clip?i[t]:e[t]}function X2(i,e){const{xScale:t,yScale:s}=i;return t&&s?{left:lc(t,e,"left"),right:lc(t,e,"right"),top:lc(s,e,"top"),bottom:lc(s,e,"bottom")}:e}function Q2(i,e){const t=e._clip;if(t.disabled)return!1;const s=X2(e,i.chartArea);return{left:t.left===!1?0:s.left-(t.left===!0?0:t.left),right:t.right===!1?i.width:s.right+(t.right===!0?0:t.right),top:t.top===!1?0:s.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?i.height:s.bottom+(t.bottom===!0?0:t.bottom)}}class J2{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,s,a){const o=t.listeners[a],c=t.duration;o.forEach(h=>h({chart:e,initial:t.initial,numSteps:c,currentStep:Math.min(s-t.start,c)}))}_refresh(){this._request||(this._running=!0,this._request=X_.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((s,a)=>{if(!s.running||!s.items.length)return;const o=s.items;let c=o.length-1,h=!1,d;for(;c>=0;--c)d=o[c],d._active?(d._total>s.duration&&(s.duration=d._total),d.tick(e),h=!0):(o[c]=o[o.length-1],o.pop());h&&(a.draw(),this._notify(a,s,e,"progress")),o.length||(s.running=!1,this._notify(a,s,e,"complete"),s.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let s=t.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,s)),s}listen(e,t,s){this._getAnims(e).listeners[t].push(s)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((s,a)=>Math.max(s,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const s=t.items;let a=s.length-1;for(;a>=0;--a)s[a].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var oi=new J2;const fv="transparent",Z2={boolean(i,e,t){return t>.5?e:i},color(i,e,t){const s=nv(i||fv),a=s.valid&&nv(e||fv);return a&&a.valid?a.mix(s,t).hexString():e},number(i,e,t){return i+(e-i)*t}};class eA{constructor(e,t,s,a){const o=t[s];a=rc([e.to,a,o,e.from]);const c=rc([e.from,o,a]);this._active=!0,this._fn=e.fn||Z2[e.type||typeof c],this._easing=oo[e.easing]||oo.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=s,this._from=c,this._to=a,this._promises=void 0}active(){return this._active}update(e,t,s){if(this._active){this._notify(!1);const a=this._target[this._prop],o=s-this._start,c=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(c,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=rc([e.to,t,a,e.from]),this._from=rc([e.from,a,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,s=this._duration,a=this._prop,o=this._from,c=this._loop,h=this._to;let d;if(this._active=o!==h&&(c||t<s),!this._active){this._target[a]=h,this._notify(!0);return}if(t<0){this._target[a]=o;return}d=t/s%2,d=c&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[a]=this._fn(o,h,d)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,s)=>{e.push({res:t,rej:s})})}_notify(e){const t=e?"res":"rej",s=this._promises||[];for(let a=0;a<s.length;a++)s[a][t]()}}class cx{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Me(e))return;const t=Object.keys(ot.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const o=e[a];if(!Me(o))return;const c={};for(const h of t)c[h]=o[h];(pt(o.properties)&&o.properties||[a]).forEach(h=>{(h===a||!s.has(h))&&s.set(h,c)})})}_animateOptions(e,t){const s=t.options,a=nA(e,s);if(!a)return[];const o=this._createAnimations(a,s);return s.$shared&&tA(e.options.$animations,s).then(()=>{e.options=s},()=>{}),o}_createAnimations(e,t){const s=this._properties,a=[],o=e.$animations||(e.$animations={}),c=Object.keys(t),h=Date.now();let d;for(d=c.length-1;d>=0;--d){const f=c[d];if(f.charAt(0)==="$")continue;if(f==="options"){a.push(...this._animateOptions(e,t));continue}const y=t[f];let b=o[f];const v=s.get(f);if(b)if(v&&b.active()){b.update(v,y,h);continue}else b.cancel();if(!v||!v.duration){e[f]=y;continue}o[f]=b=new eA(v,e,f,y),a.push(b)}return a}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const s=this._createAnimations(e,t);if(s.length)return oi.add(this._chart,s),!0}}function tA(i,e){const t=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const o=i[s[a]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function nA(i,e){if(!e)return;let t=i.options;if(!t){i.options=e;return}return t.$shared&&(i.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function gv(i,e){const t=i&&i.options||{},s=t.reverse,a=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:s?o:a,end:s?a:o}}function iA(i,e,t){if(t===!1)return!1;const s=gv(i,t),a=gv(e,t);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}function sA(i){let e,t,s,a;return Me(i)?(e=i.top,t=i.right,s=i.bottom,a=i.left):e=t=s=a=i,{top:e,right:t,bottom:s,left:a,disabled:i===!1}}function ux(i,e){const t=[],s=i._getSortedDatasetMetas(e);let a,o;for(a=0,o=s.length;a<o;++a)t.push(s[a].index);return t}function pv(i,e,t,s={}){const a=i.keys,o=s.mode==="single";let c,h,d,f;if(e===null)return;let y=!1;for(c=0,h=a.length;c<h;++c){if(d=+a[c],d===t){if(y=!0,s.all)continue;break}f=i.values[d],yn(f)&&(o||e===0||Un(e)===Un(f))&&(e+=f)}return!y&&!s.all?0:e}function aA(i,e){const{iScale:t,vScale:s}=e,a=t.axis==="x"?"x":"y",o=s.axis==="x"?"x":"y",c=Object.keys(i),h=new Array(c.length);let d,f,y;for(d=0,f=c.length;d<f;++d)y=c[d],h[d]={[a]:y,[o]:i[y]};return h}function Nd(i,e){const t=i&&i.options.stacked;return t||t===void 0&&e.stack!==void 0}function rA(i,e,t){return`${i.id}.${e.id}.${t.stack||t.type}`}function oA(i){const{min:e,max:t,minDefined:s,maxDefined:a}=i.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:a?t:Number.POSITIVE_INFINITY}}function lA(i,e,t){const s=i[e]||(i[e]={});return s[t]||(s[t]={})}function mv(i,e,t,s){for(const a of e.getMatchingVisibleMetas(s).reverse()){const o=i[a.index];if(t&&o>0||!t&&o<0)return a.index}return null}function yv(i,e){const{chart:t,_cachedMeta:s}=i,a=t._stacks||(t._stacks={}),{iScale:o,vScale:c,index:h}=s,d=o.axis,f=c.axis,y=rA(o,c,s),b=e.length;let v;for(let _=0;_<b;++_){const S=e[_],{[d]:w,[f]:T}=S,C=S._stacks||(S._stacks={});v=C[f]=lA(a,y,w),v[h]=T,v._top=mv(v,c,!0,s.type),v._bottom=mv(v,c,!1,s.type);const A=v._visualValues||(v._visualValues={});A[h]=T}}function Pd(i,e){const t=i.scales;return Object.keys(t).filter(s=>t[s].axis===e).shift()}function cA(i,e){return Ps(i,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function uA(i,e,t){return Ps(i,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Gr(i,e){const t=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){e=e||i._parsed;for(const a of e){const o=a._stacks;if(!o||o[s]===void 0||o[s][t]===void 0)return;delete o[s][t],o[s]._visualValues!==void 0&&o[s]._visualValues[t]!==void 0&&delete o[s]._visualValues[t]}}}const Ld=i=>i==="reset"||i==="none",bv=(i,e)=>e?i:Object.assign({},i),hA=(i,e,t)=>i&&!e.hidden&&e._stacked&&{keys:ux(t,!0),values:null};class Xc{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Nd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Gr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,s=this.getDataset(),a=(b,v,_,S)=>b==="x"?v:b==="r"?S:_,o=t.xAxisID=Te(s.xAxisID,Pd(e,"x")),c=t.yAxisID=Te(s.yAxisID,Pd(e,"y")),h=t.rAxisID=Te(s.rAxisID,Pd(e,"r")),d=t.indexAxis,f=t.iAxisID=a(d,o,c,h),y=t.vAxisID=a(d,c,o,h);t.xScale=this.getScaleForId(o),t.yScale=this.getScaleForId(c),t.rScale=this.getScaleForId(h),t.iScale=this.getScaleForId(f),t.vScale=this.getScaleForId(y)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Zb(this._data,this),e._stacked&&Gr(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),s=this._data;if(Me(t)){const a=this._cachedMeta;this._data=aA(t,a)}else if(s!==t){if(s){Zb(s,this);const a=this._cachedMeta;Gr(a),a._parsed=[]}t&&Object.isExtensible(t)&&$j(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,s=this.getDataset();let a=!1;this._dataCheck();const o=t._stacked;t._stacked=Nd(t.vScale,t),t.stack!==s.stack&&(a=!0,Gr(t),t.stack=s.stack),this._resyncElements(e),(a||o!==t._stacked)&&(yv(this,t._parsed),t._stacked=Nd(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:s,_data:a}=this,{iScale:o,_stacked:c}=s,h=o.axis;let d=e===0&&t===a.length?!0:s._sorted,f=e>0&&s._parsed[e-1],y,b,v;if(this._parsing===!1)s._parsed=a,s._sorted=!0,v=a;else{pt(a[e])?v=this.parseArrayData(s,a,e,t):Me(a[e])?v=this.parseObjectData(s,a,e,t):v=this.parsePrimitiveData(s,a,e,t);const _=()=>b[h]===null||f&&b[h]<f[h];for(y=0;y<t;++y)s._parsed[y+e]=b=v[y],d&&(_()&&(d=!1),f=b);s._sorted=d}c&&yv(this,v)}parsePrimitiveData(e,t,s,a){const{iScale:o,vScale:c}=e,h=o.axis,d=c.axis,f=o.getLabels(),y=o===c,b=new Array(a);let v,_,S;for(v=0,_=a;v<_;++v)S=v+s,b[v]={[h]:y||o.parse(f[S],S),[d]:c.parse(t[S],S)};return b}parseArrayData(e,t,s,a){const{xScale:o,yScale:c}=e,h=new Array(a);let d,f,y,b;for(d=0,f=a;d<f;++d)y=d+s,b=t[y],h[d]={x:o.parse(b[0],y),y:c.parse(b[1],y)};return h}parseObjectData(e,t,s,a){const{xScale:o,yScale:c}=e,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,f=new Array(a);let y,b,v,_;for(y=0,b=a;y<b;++y)v=y+s,_=t[v],f[y]={x:o.parse(Ds(_,h),v),y:c.parse(Ds(_,d),v)};return f}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,s){const a=this.chart,o=this._cachedMeta,c=t[e.axis],h={keys:ux(a,!0),values:t._stacks[e.axis]._visualValues};return pv(h,c,o.index,{mode:s})}updateRangeFromParsed(e,t,s,a){const o=s[t.axis];let c=o===null?NaN:o;const h=a&&s._stacks[t.axis];a&&h&&(a.values=h,c=pv(a,o,this._cachedMeta.index)),e.min=Math.min(e.min,c),e.max=Math.max(e.max,c)}getMinMax(e,t){const s=this._cachedMeta,a=s._parsed,o=s._sorted&&e===s.iScale,c=a.length,h=this._getOtherScale(e),d=hA(t,s,this.chart),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:y,max:b}=oA(h);let v,_;function S(){_=a[v];const w=_[h.axis];return!yn(_[e.axis])||y>w||b<w}for(v=0;v<c&&!(!S()&&(this.updateRangeFromParsed(f,e,_,d),o));++v);if(o){for(v=c-1;v>=0;--v)if(!S()){this.updateRangeFromParsed(f,e,_,d);break}}return f}getAllParsedValues(e){const t=this._cachedMeta._parsed,s=[];let a,o,c;for(a=0,o=t.length;a<o;++a)c=t[a][e.axis],yn(c)&&s.push(c);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,s=t.iScale,a=t.vScale,o=this.getParsed(e);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:a?""+a.getLabelForValue(o[a.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=sA(Te(this.options.clip,iA(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,s=this._cachedMeta,a=s.data||[],o=t.chartArea,c=[],h=this._drawStart||0,d=this._drawCount||a.length-h,f=this.options.drawActiveElementsOnTop;let y;for(s.dataset&&s.dataset.draw(e,o,h,d),y=h;y<h+d;++y){const b=a[y];b.hidden||(b.active&&f?c.push(b):b.draw(e,o))}for(y=0;y<c.length;++y)c[y].draw(e,o)}getStyle(e,t){const s=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,t,s){const a=this.getDataset();let o;if(e>=0&&e<this._cachedMeta.data.length){const c=this._cachedMeta.data[e];o=c.$context||(c.$context=uA(this.getContext(),e,c)),o.parsed=this.getParsed(e),o.raw=a.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=cA(this.chart.getContext(),this.index)),o.dataset=a,o.index=o.datasetIndex=this.index;return o.active=!!t,o.mode=s,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",s){const a=t==="active",o=this._cachedDataOpts,c=e+"-"+t,h=o[c],d=this.enableOptionSharing&&po(s);if(h)return bv(h,d);const f=this.chart.config,y=f.datasetElementScopeKeys(this._type,e),b=a?[`${e}Hover`,"hover",e,""]:[e,""],v=f.getOptionScopes(this.getDataset(),y),_=Object.keys(ot.elements[e]),S=()=>this.getContext(s,a,t),w=f.resolveNamedOptions(v,_,S,b);return w.$shared&&(w.$shared=d,o[c]=Object.freeze(bv(w,d))),w}_resolveAnimations(e,t,s){const a=this.chart,o=this._cachedDataOpts,c=`animation-${t}`,h=o[c];if(h)return h;let d;if(a.options.animation!==!1){const y=this.chart.config,b=y.datasetAnimationScopeKeys(this._type,t),v=y.getOptionScopes(this.getDataset(),b);d=y.createResolver(v,this.getContext(e,s,t))}const f=new cx(a,d&&d.animations);return d&&d._cacheable&&(o[c]=Object.freeze(f)),f}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Ld(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const s=this.resolveDataElementOptions(e,t),a=this._sharedOptions,o=this.getSharedOptions(s),c=this.includeOptions(t,o)||o!==a;return this.updateSharedOptions(o,t,s),{sharedOptions:o,includeOptions:c}}updateElement(e,t,s,a){Ld(a)?Object.assign(e,s):this._resolveAnimations(t,a).update(e,s)}updateSharedOptions(e,t,s){e&&!Ld(t)&&this._resolveAnimations(void 0,t).update(e,s)}_setStyle(e,t,s,a){e.active=a;const o=this.getStyle(t,a);this._resolveAnimations(t,s,a).update(e,{options:!a&&this.getSharedOptions(o)||o})}removeHoverStyle(e,t,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,t,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,s=this._cachedMeta.data;for(const[h,d,f]of this._syncList)this[h](d,f);this._syncList=[];const a=s.length,o=t.length,c=Math.min(o,a);c&&this.parse(0,c),o>a?this._insertElements(a,o-a,e):o<a&&this._removeElements(o,a-o)}_insertElements(e,t,s=!0){const a=this._cachedMeta,o=a.data,c=e+t;let h;const d=f=>{for(f.length+=t,h=f.length-1;h>=c;h--)f[h]=f[h-t]};for(d(o),h=e;h<c;++h)o[h]=new this.dataElementType;this._parsing&&d(a._parsed),this.parse(e,t),s&&this.updateElements(o,e,t,"reset")}updateElements(e,t,s,a){}_removeElements(e,t){const s=this._cachedMeta;if(this._parsing){const a=s._parsed.splice(e,t);s._stacked&&Gr(s,a)}s.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,s,a]=e;this[t](s,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function dA(i,e){if(!i._cache.$bar){const t=i.getMatchingVisibleMetas(e);let s=[];for(let a=0,o=t.length;a<o;a++)s=s.concat(t[a].controller.getAllParsedValues(i));i._cache.$bar=K_(s.sort((a,o)=>a-o))}return i._cache.$bar}function fA(i){const e=i.iScale,t=dA(e,i.type);let s=e._length,a,o,c,h;const d=()=>{c===32767||c===-32768||(po(h)&&(s=Math.min(s,Math.abs(c-h)||s)),h=c)};for(a=0,o=t.length;a<o;++a)c=e.getPixelForValue(t[a]),d();for(h=void 0,a=0,o=e.ticks.length;a<o;++a)c=e.getPixelForTick(a),d();return s}function gA(i,e,t,s){const a=t.barThickness;let o,c;return ze(a)?(o=e.min*t.categoryPercentage,c=t.barPercentage):(o=a*s,c=1),{chunk:o/s,ratio:c,start:e.pixels[i]-o/2}}function pA(i,e,t,s){const a=e.pixels,o=a[i];let c=i>0?a[i-1]:null,h=i<a.length-1?a[i+1]:null;const d=t.categoryPercentage;c===null&&(c=o-(h===null?e.end-e.start:h-o)),h===null&&(h=o+o-c);const f=o-(o-Math.min(c,h))/2*d;return{chunk:Math.abs(h-c)/2*d/s,ratio:t.barPercentage,start:f}}function mA(i,e,t,s){const a=t.parse(i[0],s),o=t.parse(i[1],s),c=Math.min(a,o),h=Math.max(a,o);let d=c,f=h;Math.abs(c)>Math.abs(h)&&(d=h,f=c),e[t.axis]=f,e._custom={barStart:d,barEnd:f,start:a,end:o,min:c,max:h}}function hx(i,e,t,s){return pt(i)?mA(i,e,t,s):e[t.axis]=t.parse(i,s),e}function vv(i,e,t,s){const a=i.iScale,o=i.vScale,c=a.getLabels(),h=a===o,d=[];let f,y,b,v;for(f=t,y=t+s;f<y;++f)v=e[f],b={},b[a.axis]=h||a.parse(c[f],f),d.push(hx(v,b,o,f));return d}function zd(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function yA(i,e,t){return i!==0?Un(i):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function bA(i){let e,t,s,a,o;return i.horizontal?(e=i.base>i.x,t="left",s="right"):(e=i.base<i.y,t="bottom",s="top"),e?(a="end",o="start"):(a="start",o="end"),{start:t,end:s,reverse:e,top:a,bottom:o}}function vA(i,e,t,s){let a=e.borderSkipped;const o={};if(!a){i.borderSkipped=o;return}if(a===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:c,end:h,reverse:d,top:f,bottom:y}=bA(i);a==="middle"&&t&&(i.enableBorderRadius=!0,(t._top||0)===s?a=f:(t._bottom||0)===s?a=y:(o[_v(y,c,h,d)]=!0,a=f)),o[_v(a,c,h,d)]=!0,i.borderSkipped=o}function _v(i,e,t,s){return s?(i=_A(i,e,t),i=xv(i,t,e)):i=xv(i,e,t),i}function _A(i,e,t){return i===e?t:i===t?e:i}function xv(i,e,t){return i==="start"?e:i==="end"?t:i}function xA(i,{inflateAmount:e},t){i.inflateAmount=e==="auto"?t===1?.33:0:e}class SA extends Xc{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,t,s,a){return vv(e,t,s,a)}parseArrayData(e,t,s,a){return vv(e,t,s,a)}parseObjectData(e,t,s,a){const{iScale:o,vScale:c}=e,{xAxisKey:h="x",yAxisKey:d="y"}=this._parsing,f=o.axis==="x"?h:d,y=c.axis==="x"?h:d,b=[];let v,_,S,w;for(v=s,_=s+a;v<_;++v)w=t[v],S={},S[o.axis]=o.parse(Ds(w,f),v),b.push(hx(Ds(w,y),S,c,v));return b}updateRangeFromParsed(e,t,s,a){super.updateRangeFromParsed(e,t,s,a);const o=s._custom;o&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:s,vScale:a}=t,o=this.getParsed(e),c=o._custom,h=zd(c)?"["+c.start+", "+c.end+"]":""+a.getLabelForValue(o[a.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,s,a){const o=a==="reset",{index:c,_cachedMeta:{vScale:h}}=this,d=h.getBasePixel(),f=h.isHorizontal(),y=this._getRuler(),{sharedOptions:b,includeOptions:v}=this._getSharedOptions(t,a);for(let _=t;_<t+s;_++){const S=this.getParsed(_),w=o||ze(S[h.axis])?{base:d,head:d}:this._calculateBarValuePixels(_),T=this._calculateBarIndexPixels(_,y),C=(S._stacks||{})[h.axis],A={horizontal:f,base:w.base,enableBorderRadius:!C||zd(S._custom)||c===C._top||c===C._bottom,x:f?w.head:T.center,y:f?T.center:w.head,height:f?T.size:Math.abs(w.size),width:f?Math.abs(w.size):T.size};v&&(A.options=b||this.resolveDataElementOptions(_,e[_].active?"active":a));const j=A.options||e[_].options;vA(A,j,C,c),xA(A,j,y.ratio),this.updateElement(e[_],_,A,a)}}_getStacks(e,t){const{iScale:s}=this._cachedMeta,a=s.getMatchingVisibleMetas(this._type).filter(y=>y.controller.options.grouped),o=s.options.stacked,c=[],h=this._cachedMeta.controller.getParsed(t),d=h&&h[s.axis],f=y=>{const b=y._parsed.find(_=>_[s.axis]===d),v=b&&b[y.vScale.axis];if(ze(v)||isNaN(v))return!0};for(const y of a)if(!(t!==void 0&&f(y))&&((o===!1||c.indexOf(y.stack)===-1||o===void 0&&y.stack===void 0)&&c.push(y.stack),y.index===e))break;return c.length||c.push(void 0),c}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(s=>e[s].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)e[Te(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,s){const a=this._getStacks(e,s),o=t!==void 0?a.indexOf(t):-1;return o===-1?a.length-1:o}_getRuler(){const e=this.options,t=this._cachedMeta,s=t.iScale,a=[];let o,c;for(o=0,c=t.data.length;o<c;++o)a.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const h=e.barThickness;return{min:h||fA(t),pixels:a,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:h?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:s,index:a},options:{base:o,minBarLength:c}}=this,h=o||0,d=this.getParsed(e),f=d._custom,y=zd(f);let b=d[t.axis],v=0,_=s?this.applyStack(t,d,s):b,S,w;_!==b&&(v=_-b,_=b),y&&(b=f.barStart,_=f.barEnd-f.barStart,b!==0&&Un(b)!==Un(f.barEnd)&&(v=0),v+=b);const T=!ze(o)&&!y?o:v;let C=t.getPixelForValue(T);if(this.chart.getDataVisibility(e)?S=t.getPixelForValue(v+_):S=C,w=S-C,Math.abs(w)<c){w=yA(w,t,h)*c,b===h&&(C-=w/2);const A=t.getPixelForDecimal(0),j=t.getPixelForDecimal(1),D=Math.min(A,j),N=Math.max(A,j);C=Math.max(Math.min(C,N),D),S=C+w,s&&!y&&(d._stacks[t.axis]._visualValues[a]=t.getValueForPixel(S)-t.getValueForPixel(C))}if(C===t.getPixelForValue(h)){const A=Un(w)*t.getLineWidthForValue(h)/2;C+=A,w-=A}return{size:w,base:C,head:S,center:S+w/2}}_calculateBarIndexPixels(e,t){const s=t.scale,a=this.options,o=a.skipNull,c=Te(a.maxBarThickness,1/0);let h,d;const f=this._getAxisCount();if(t.grouped){const y=o?this._getStackCount(e):t.stackCount,b=a.barThickness==="flex"?pA(e,t,a,y*f):gA(e,t,a,y*f),v=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,_=this._getAxis().indexOf(Te(v,this.getFirstScaleIdForIndexAxis())),S=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+_;h=b.start+b.chunk*S+b.chunk/2,d=Math.min(c,b.chunk*b.ratio)}else h=s.getPixelForValue(this.getParsed(e)[s.axis],e),d=Math.min(c,t.min*t.ratio);return{base:h-d/2,head:h+d/2,center:h,size:d}}draw(){const e=this._cachedMeta,t=e.vScale,s=e.data,a=s.length;let o=0;for(;o<a;++o)this.getParsed(o)[t.axis]!==null&&!s[o].hidden&&s[o].draw(this._ctx)}}function wA(i,e,t){let s=1,a=1,o=0,c=0;if(e<it){const h=i,d=h+e,f=Math.cos(h),y=Math.sin(h),b=Math.cos(d),v=Math.sin(d),_=(j,D,N)=>yo(j,h,d,!0)?1:Math.max(D,D*t,N,N*t),S=(j,D,N)=>yo(j,h,d,!0)?-1:Math.min(D,D*t,N,N*t),w=_(0,f,b),T=_(mt,y,v),C=S(Fe,f,b),A=S(Fe+mt,y,v);s=(w-C)/2,a=(T-A)/2,o=-(w+C)/2,c=-(T+A)/2}return{ratioX:s,ratioY:a,offsetX:o,offsetY:c}}class TA extends Xc{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:s,textAlign:a,color:o,useBorderRadius:c,borderRadius:h}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((d,f)=>{const b=e.getDatasetMeta(0).controller.getStyle(f);return{text:d,fillStyle:b.backgroundColor,fontColor:o,hidden:!e.getDataVisibility(f),lineDash:b.borderDash,lineDashOffset:b.borderDashOffset,lineJoin:b.borderJoinStyle,lineWidth:b.borderWidth,strokeStyle:b.borderColor,textAlign:a,pointStyle:s,borderRadius:c&&(h||b.borderRadius),index:f}}):[]}},onClick(e,t,s){s.chart.toggleDataVisibility(t.index),s.chart.update()}}}};constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const s=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=s;else{let o=d=>+s[d];if(Me(s[e])){const{key:d="value"}=this._parsing;o=f=>+Ds(s[f],d)}let c,h;for(c=e,h=e+t;c<h;++c)a._parsed[c]=o(c)}}_getRotation(){return ui(this.options.rotation-90)}_getCircumference(){return ui(this.options.circumference)}_getRotationExtents(){let e=it,t=-it;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const a=this.chart.getDatasetMeta(s).controller,o=a._getRotation(),c=a._getCircumference();e=Math.min(e,o),t=Math.max(t,o+c)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:s}=t,a=this._cachedMeta,o=a.data,c=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,h=Math.max((Math.min(s.width,s.height)-c)/2,0),d=Math.min(jj(this.options.cutout,h),1),f=this._getRingWeight(this.index),{circumference:y,rotation:b}=this._getRotationExtents(),{ratioX:v,ratioY:_,offsetX:S,offsetY:w}=wA(b,y,d),T=(s.width-c)/v,C=(s.height-c)/_,A=Math.max(Math.min(T,C)/2,0),j=$_(this.options.radius,A),D=Math.max(j*d,0),N=(j-D)/this._getVisibleDatasetWeightTotal();this.offsetX=S*j,this.offsetY=w*j,a.total=this.calculateTotal(),this.outerRadius=j-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*f,0),this.updateElements(o,0,o.length,e)}_circumference(e,t){const s=this.options,a=this._cachedMeta,o=this._getCircumference();return t&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||a._parsed[e]===null||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*o/it)}updateElements(e,t,s,a){const o=a==="reset",c=this.chart,h=c.chartArea,f=c.options.animation,y=(h.left+h.right)/2,b=(h.top+h.bottom)/2,v=o&&f.animateScale,_=v?0:this.innerRadius,S=v?0:this.outerRadius,{sharedOptions:w,includeOptions:T}=this._getSharedOptions(t,a);let C=this._getRotation(),A;for(A=0;A<t;++A)C+=this._circumference(A,o);for(A=t;A<t+s;++A){const j=this._circumference(A,o),D=e[A],N={x:y+this.offsetX,y:b+this.offsetY,startAngle:C,endAngle:C+j,circumference:j,outerRadius:S,innerRadius:_};T&&(N.options=w||this.resolveDataElementOptions(A,D.active?"active":a)),C+=j,this.updateElement(D,A,N,a)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let s=0,a;for(a=0;a<t.length;a++){const o=e._parsed[a];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(a)&&!t[a].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?it*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,s=this.chart,a=s.data.labels||[],o=$f(t._parsed[e],s.options.locale);return{label:a[e]||"",value:o}}getMaxBorderWidth(e){let t=0;const s=this.chart;let a,o,c,h,d;if(!e){for(a=0,o=s.data.datasets.length;a<o;++a)if(s.isDatasetVisible(a)){c=s.getDatasetMeta(a),e=c.data,h=c.controller;break}}if(!e)return 0;for(a=0,o=e.length;a<o;++a)d=h.resolveDataElementOptions(a),d.borderAlign!=="inner"&&(t=Math.max(t,d.borderWidth||0,d.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let s=0,a=e.length;s<a;++s){const o=this.resolveDataElementOptions(s);t=Math.max(t,o.offset||0,o.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(t+=this._getRingWeight(s));return t}_getRingWeight(e){return Math.max(Te(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class EA extends Xc{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:s,data:a=[],_dataset:o}=t,c=this.chart._animationsDisabled;let{start:h,count:d}=Wj(t,a,c);this._drawStart=h,this._drawCount=d,Yj(t)&&(h=0,d=a.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=a;const f=this.resolveDatasetElementOptions(e);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(s,void 0,{animated:!c,options:f},e),this.updateElements(a,h,d,e)}updateElements(e,t,s,a){const o=a==="reset",{iScale:c,vScale:h,_stacked:d,_dataset:f}=this._cachedMeta,{sharedOptions:y,includeOptions:b}=this._getSharedOptions(t,a),v=c.axis,_=h.axis,{spanGaps:S,segment:w}=this.options,T=mo(S)?S:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||o||a==="none",A=t+s,j=e.length;let D=t>0&&this.getParsed(t-1);for(let N=0;N<j;++N){const q=e[N],P=C?q:{};if(N<t||N>=A){P.skip=!0;continue}const U=this.getParsed(N),L=ze(U[_]),Z=P[v]=c.getPixelForValue(U[v],N),W=P[_]=o||L?h.getBasePixel():h.getPixelForValue(d?this.applyStack(h,U,d):U[_],N);P.skip=isNaN(Z)||isNaN(W)||L,P.stop=N>0&&Math.abs(U[v]-D[v])>T,w&&(P.parsed=U,P.raw=f.data[N]),b&&(P.options=y||this.resolveDataElementOptions(N,q.active?"active":a)),C||this.updateElement(q,N,P,a),D=U}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,s=t.options&&t.options.borderWidth||0,a=e.data||[];if(!a.length)return s;const o=a[0].size(this.resolveDataElementOptions(0)),c=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(s,o,c)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}function vs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Zf{static override(e){Object.assign(Zf.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return vs()}parse(){return vs()}format(){return vs()}add(){return vs()}diff(){return vs()}startOf(){return vs()}endOf(){return vs()}}var CA={_date:Zf};function jA(i,e,t,s){const{controller:a,data:o,_sorted:c}=i,h=a._cachedMeta.iScale,d=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(h&&e===h.axis&&e!=="r"&&c&&o.length){const f=h._reversePixels?Ij:Rs;if(s){if(a._sharedOptions){const y=o[0],b=typeof y.getRange=="function"&&y.getRange(e);if(b){const v=f(o,e,t-b),_=f(o,e,t+b);return{lo:v.lo,hi:_.hi}}}}else{const y=f(o,e,t);if(d){const{vScale:b}=a._cachedMeta,{_parsed:v}=i,_=v.slice(0,y.lo+1).reverse().findIndex(w=>!ze(w[b.axis]));y.lo-=Math.max(0,_);const S=v.slice(y.hi).findIndex(w=>!ze(w[b.axis]));y.hi+=Math.max(0,S)}return y}}return{lo:0,hi:o.length-1}}function Qc(i,e,t,s,a){const o=i.getSortedVisibleDatasetMetas(),c=t[e];for(let h=0,d=o.length;h<d;++h){const{index:f,data:y}=o[h],{lo:b,hi:v}=jA(o[h],e,c,a);for(let _=b;_<=v;++_){const S=y[_];S.skip||s(S,f,_)}}}function AA(i){const e=i.indexOf("x")!==-1,t=i.indexOf("y")!==-1;return function(s,a){const o=e?Math.abs(s.x-a.x):0,c=t?Math.abs(s.y-a.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(c,2))}}function Bd(i,e,t,s,a){const o=[];return!a&&!i.isPointInArea(e)||Qc(i,t,e,function(h,d,f){!a&&!bo(h,i.chartArea,0)||h.inRange(e.x,e.y,s)&&o.push({element:h,datasetIndex:d,index:f})},!0),o}function OA(i,e,t,s){let a=[];function o(c,h,d){const{startAngle:f,endAngle:y}=c.getProps(["startAngle","endAngle"],s),{angle:b}=W_(c,{x:e.x,y:e.y});yo(b,f,y)&&a.push({element:c,datasetIndex:h,index:d})}return Qc(i,t,e,o),a}function RA(i,e,t,s,a,o){let c=[];const h=AA(t);let d=Number.POSITIVE_INFINITY;function f(y,b,v){const _=y.inRange(e.x,e.y,a);if(s&&!_)return;const S=y.getCenterPoint(a);if(!(!!o||i.isPointInArea(S))&&!_)return;const T=h(e,S);T<d?(c=[{element:y,datasetIndex:b,index:v}],d=T):T===d&&c.push({element:y,datasetIndex:b,index:v})}return Qc(i,t,e,f),c}function Ud(i,e,t,s,a,o){return!o&&!i.isPointInArea(e)?[]:t==="r"&&!s?OA(i,e,t,a):RA(i,e,t,s,a,o)}function Sv(i,e,t,s,a){const o=[],c=t==="x"?"inXRange":"inYRange";let h=!1;return Qc(i,t,e,(d,f,y)=>{d[c]&&d[c](e[t],a)&&(o.push({element:d,datasetIndex:f,index:y}),h=h||d.inRange(e.x,e.y,a))}),s&&!h?[]:o}var MA={modes:{index(i,e,t,s){const a=Es(e,i),o=t.axis||"x",c=t.includeInvisible||!1,h=t.intersect?Bd(i,a,o,s,c):Ud(i,a,o,!1,s,c),d=[];return h.length?(i.getSortedVisibleDatasetMetas().forEach(f=>{const y=h[0].index,b=f.data[y];b&&!b.skip&&d.push({element:b,datasetIndex:f.index,index:y})}),d):[]},dataset(i,e,t,s){const a=Es(e,i),o=t.axis||"xy",c=t.includeInvisible||!1;let h=t.intersect?Bd(i,a,o,s,c):Ud(i,a,o,!1,s,c);if(h.length>0){const d=h[0].datasetIndex,f=i.getDatasetMeta(d).data;h=[];for(let y=0;y<f.length;++y)h.push({element:f[y],datasetIndex:d,index:y})}return h},point(i,e,t,s){const a=Es(e,i),o=t.axis||"xy",c=t.includeInvisible||!1;return Bd(i,a,o,s,c)},nearest(i,e,t,s){const a=Es(e,i),o=t.axis||"xy",c=t.includeInvisible||!1;return Ud(i,a,o,t.intersect,s,c)},x(i,e,t,s){const a=Es(e,i);return Sv(i,a,"x",t.intersect,s)},y(i,e,t,s){const a=Es(e,i);return Sv(i,a,"y",t.intersect,s)}}};const dx=["left","top","right","bottom"];function Wr(i,e){return i.filter(t=>t.pos===e)}function wv(i,e){return i.filter(t=>dx.indexOf(t.pos)===-1&&t.box.axis===e)}function Yr(i,e){return i.sort((t,s)=>{const a=e?s:t,o=e?t:s;return a.weight===o.weight?a.index-o.index:a.weight-o.weight})}function kA(i){const e=[];let t,s,a,o,c,h;for(t=0,s=(i||[]).length;t<s;++t)a=i[t],{position:o,options:{stack:c,stackWeight:h=1}}=a,e.push({index:t,box:a,pos:o,horizontal:a.isHorizontal(),weight:a.weight,stack:c&&o+c,stackWeight:h});return e}function DA(i){const e={};for(const t of i){const{stack:s,pos:a,stackWeight:o}=t;if(!s||!dx.includes(a))continue;const c=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});c.count++,c.weight+=o}return e}function NA(i,e){const t=DA(i),{vBoxMaxWidth:s,hBoxMaxHeight:a}=e;let o,c,h;for(o=0,c=i.length;o<c;++o){h=i[o];const{fullSize:d}=h.box,f=t[h.stack],y=f&&h.stackWeight/f.weight;h.horizontal?(h.width=y?y*s:d&&e.availableWidth,h.height=a):(h.width=s,h.height=y?y*a:d&&e.availableHeight)}return t}function PA(i){const e=kA(i),t=Yr(e.filter(f=>f.box.fullSize),!0),s=Yr(Wr(e,"left"),!0),a=Yr(Wr(e,"right")),o=Yr(Wr(e,"top"),!0),c=Yr(Wr(e,"bottom")),h=wv(e,"x"),d=wv(e,"y");return{fullSize:t,leftAndTop:s.concat(o),rightAndBottom:a.concat(d).concat(c).concat(h),chartArea:Wr(e,"chartArea"),vertical:s.concat(a).concat(d),horizontal:o.concat(c).concat(h)}}function Tv(i,e,t,s){return Math.max(i[t],e[t])+Math.max(i[s],e[s])}function fx(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function LA(i,e,t,s){const{pos:a,box:o}=t,c=i.maxPadding;if(!Me(a)){t.size&&(i[a]-=t.size);const b=s[t.stack]||{size:0,count:1};b.size=Math.max(b.size,t.horizontal?o.height:o.width),t.size=b.size/b.count,i[a]+=t.size}o.getPadding&&fx(c,o.getPadding());const h=Math.max(0,e.outerWidth-Tv(c,i,"left","right")),d=Math.max(0,e.outerHeight-Tv(c,i,"top","bottom")),f=h!==i.w,y=d!==i.h;return i.w=h,i.h=d,t.horizontal?{same:f,other:y}:{same:y,other:f}}function zA(i){const e=i.maxPadding;function t(s){const a=Math.max(e[s]-i[s],0);return i[s]+=a,a}i.y+=t("top"),i.x+=t("left"),t("right"),t("bottom")}function BA(i,e){const t=e.maxPadding;function s(a){const o={left:0,top:0,right:0,bottom:0};return a.forEach(c=>{o[c]=Math.max(e[c],t[c])}),o}return s(i?["left","right"]:["top","bottom"])}function no(i,e,t,s){const a=[];let o,c,h,d,f,y;for(o=0,c=i.length,f=0;o<c;++o){h=i[o],d=h.box,d.update(h.width||e.w,h.height||e.h,BA(h.horizontal,e));const{same:b,other:v}=LA(e,t,h,s);f|=b&&a.length,y=y||v,d.fullSize||a.push(h)}return f&&no(a,e,t,s)||y}function cc(i,e,t,s,a){i.top=t,i.left=e,i.right=e+s,i.bottom=t+a,i.width=s,i.height=a}function Ev(i,e,t,s){const a=t.padding;let{x:o,y:c}=e;for(const h of i){const d=h.box,f=s[h.stack]||{placed:0,weight:1},y=h.stackWeight/f.weight||1;if(h.horizontal){const b=e.w*y,v=f.size||d.height;po(f.start)&&(c=f.start),d.fullSize?cc(d,a.left,c,t.outerWidth-a.right-a.left,v):cc(d,e.left+f.placed,c,b,v),f.start=c,f.placed+=b,c=d.bottom}else{const b=e.h*y,v=f.size||d.width;po(f.start)&&(o=f.start),d.fullSize?cc(d,o,a.top,v,t.outerHeight-a.bottom-a.top):cc(d,o,e.top+f.placed,v,b),f.start=o,f.placed+=b,o=d.right}}e.x=o,e.y=c}var mn={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},i.boxes.push(e)},removeBox(i,e){const t=i.boxes?i.boxes.indexOf(e):-1;t!==-1&&i.boxes.splice(t,1)},configure(i,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(i,e,t,s){if(!i)return;const a=bn(i.options.layout.padding),o=Math.max(e-a.width,0),c=Math.max(t-a.height,0),h=PA(i.boxes),d=h.vertical,f=h.horizontal;He(i.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const y=d.reduce((w,T)=>T.box.options&&T.box.options.display===!1?w:w+1,0)||1,b=Object.freeze({outerWidth:e,outerHeight:t,padding:a,availableWidth:o,availableHeight:c,vBoxMaxWidth:o/2/y,hBoxMaxHeight:c/2}),v=Object.assign({},a);fx(v,bn(s));const _=Object.assign({maxPadding:v,w:o,h:c,x:a.left,y:a.top},a),S=NA(d.concat(f),b);no(h.fullSize,_,b,S),no(d,_,b,S),no(f,_,b,S)&&no(d,_,b,S),zA(_),Ev(h.leftAndTop,_,b,S),_.x+=_.w,_.y+=_.h,Ev(h.rightAndBottom,_,b,S),i.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},He(h.chartArea,w=>{const T=w.box;Object.assign(T,i.chartArea),T.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class gx{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,s){}removeEventListener(e,t,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,s,a){return t=Math.max(0,t||e.width),s=s||e.height,{width:t,height:Math.max(0,a?Math.floor(t/a):s)}}isAttached(e){return!0}updateConfig(e){}}class UA extends gx{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const xc="$chartjs",HA={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Cv=i=>i===null||i==="";function FA(i,e){const t=i.style,s=i.getAttribute("height"),a=i.getAttribute("width");if(i[xc]={initial:{height:s,width:a,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",Cv(a)){const o=cv(i,"width");o!==void 0&&(i.width=o)}if(Cv(s))if(i.style.height==="")i.height=i.width/(e||2);else{const o=cv(i,"height");o!==void 0&&(i.height=o)}return i}const px=z2?{passive:!0}:!1;function IA(i,e,t){i&&i.addEventListener(e,t,px)}function qA(i,e,t){i&&i.canvas&&i.canvas.removeEventListener(e,t,px)}function $A(i,e){const t=HA[i.type]||i.type,{x:s,y:a}=Es(i,e);return{type:t,chart:e,native:i,x:s!==void 0?s:null,y:a!==void 0?a:null}}function Bc(i,e){for(const t of i)if(t===e||t.contains(e))return!0}function VA(i,e,t){const s=i.canvas,a=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||Bc(h.addedNodes,s),c=c&&!Bc(h.removedNodes,s);c&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}function GA(i,e,t){const s=i.canvas,a=new MutationObserver(o=>{let c=!1;for(const h of o)c=c||Bc(h.removedNodes,s),c=c&&!Bc(h.addedNodes,s);c&&t()});return a.observe(document,{childList:!0,subtree:!0}),a}const _o=new Map;let jv=0;function mx(){const i=window.devicePixelRatio;i!==jv&&(jv=i,_o.forEach((e,t)=>{t.currentDevicePixelRatio!==i&&e()}))}function WA(i,e){_o.size||window.addEventListener("resize",mx),_o.set(i,e)}function YA(i){_o.delete(i),_o.size||window.removeEventListener("resize",mx)}function KA(i,e,t){const s=i.canvas,a=s&&Jf(s);if(!a)return;const o=Q_((h,d)=>{const f=a.clientWidth;t(h,d),f<a.clientWidth&&t()},window),c=new ResizeObserver(h=>{const d=h[0],f=d.contentRect.width,y=d.contentRect.height;f===0&&y===0||o(f,y)});return c.observe(a),WA(i,o),c}function Hd(i,e,t){t&&t.disconnect(),e==="resize"&&YA(i)}function XA(i,e,t){const s=i.canvas,a=Q_(o=>{i.ctx!==null&&t($A(o,i))},i);return IA(s,e,a),a}class QA extends gx{acquireContext(e,t){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(FA(e,t),s):null}releaseContext(e){const t=e.canvas;if(!t[xc])return!1;const s=t[xc].initial;["height","width"].forEach(o=>{const c=s[o];ze(c)?t.removeAttribute(o):t.setAttribute(o,c)});const a=s.style||{};return Object.keys(a).forEach(o=>{t.style[o]=a[o]}),t.width=t.width,delete t[xc],!0}addEventListener(e,t,s){this.removeEventListener(e,t);const a=e.$proxies||(e.$proxies={}),c={attach:VA,detach:GA,resize:KA}[t]||XA;a[t]=c(e,t,s)}removeEventListener(e,t){const s=e.$proxies||(e.$proxies={}),a=s[t];if(!a)return;({attach:Hd,detach:Hd,resize:Hd}[t]||qA)(e,t,a),s[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,s,a){return L2(e,t,s,a)}isAttached(e){const t=e&&Jf(e);return!!(t&&t.isConnected)}}function JA(i){return!Qf()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?UA:QA}class gi{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}hasValue(){return mo(this.x)&&mo(this.y)}getProps(e,t){const s=this.$animations;if(!t||!s)return this;const a={};return e.forEach(o=>{a[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),a}}function ZA(i,e){const t=i.options.ticks,s=eO(i),a=Math.min(t.maxTicksLimit||s,s),o=t.major.enabled?nO(e):[],c=o.length,h=o[0],d=o[c-1],f=[];if(c>a)return iO(e,f,o,c/a),f;const y=tO(o,e,a);if(c>0){let b,v;const _=c>1?Math.round((d-h)/(c-1)):null;for(uc(e,f,y,ze(_)?0:h-_,h),b=0,v=c-1;b<v;b++)uc(e,f,y,o[b],o[b+1]);return uc(e,f,y,d,ze(_)?e.length:d+_),f}return uc(e,f,y),f}function eO(i){const e=i.options.offset,t=i._tickSize(),s=i._length/t+(e?0:1),a=i._maxLength/t;return Math.floor(Math.min(s,a))}function tO(i,e,t){const s=sO(i),a=e.length/t;if(!s)return Math.max(a,1);const o=Pj(s);for(let c=0,h=o.length-1;c<h;c++){const d=o[c];if(d>a)return d}return Math.max(a,1)}function nO(i){const e=[];let t,s;for(t=0,s=i.length;t<s;t++)i[t].major&&e.push(t);return e}function iO(i,e,t,s){let a=0,o=t[0],c;for(s=Math.ceil(s),c=0;c<i.length;c++)c===o&&(e.push(i[c]),a++,o=t[a*s])}function uc(i,e,t,s,a){const o=Te(s,0),c=Math.min(Te(a,i.length),i.length);let h=0,d,f,y;for(t=Math.ceil(t),a&&(d=a-s,t=d/Math.floor(d/t)),y=o;y<0;)h++,y=Math.round(o+h*t);for(f=Math.max(o,0);f<c;f++)f===y&&(e.push(i[f]),h++,y=Math.round(o+h*t))}function sO(i){const e=i.length;let t,s;if(e<2)return!1;for(s=i[0],t=1;t<e;++t)if(i[t]-i[t-1]!==s)return!1;return s}const aO=i=>i==="left"?"right":i==="right"?"left":i,Av=(i,e,t)=>e==="top"||e==="left"?i[e]+t:i[e]-t,Ov=(i,e)=>Math.min(e||i,i);function Rv(i,e){const t=[],s=i.length/e,a=i.length;let o=0;for(;o<a;o+=s)t.push(i[Math.floor(o)]);return t}function rO(i,e,t){const s=i.ticks.length,a=Math.min(e,s-1),o=i._startPixel,c=i._endPixel,h=1e-6;let d=i.getPixelForTick(a),f;if(!(t&&(s===1?f=Math.max(d-o,c-d):e===0?f=(i.getPixelForTick(1)-d)/2:f=(d-i.getPixelForTick(a-1))/2,d+=a<e?f:-f,d<o-h||d>c+h)))return d}function oO(i,e){He(i,t=>{const s=t.gc,a=s.length/2;let o;if(a>e){for(o=0;o<a;++o)delete t.data[s[o]];s.splice(0,a)}})}function Kr(i){return i.drawTicks?i.tickLength:0}function Mv(i,e){if(!i.display)return 0;const t=Mt(i.font,e),s=bn(i.padding);return(pt(i.text)?i.text.length:1)*t.lineHeight+s.height}function lO(i,e){return Ps(i,{scale:e,type:"scale"})}function cO(i,e,t){return Ps(i,{tick:t,index:e,type:"tick"})}function uO(i,e,t){let s=If(i);return(t&&e!=="right"||!t&&e==="right")&&(s=aO(s)),s}function hO(i,e,t,s){const{top:a,left:o,bottom:c,right:h,chart:d}=i,{chartArea:f,scales:y}=d;let b=0,v,_,S;const w=c-a,T=h-o;if(i.isHorizontal()){if(_=Ot(s,o,h),Me(t)){const C=Object.keys(t)[0],A=t[C];S=y[C].getPixelForValue(A)+w-e}else t==="center"?S=(f.bottom+f.top)/2+w-e:S=Av(i,t,e);v=h-o}else{if(Me(t)){const C=Object.keys(t)[0],A=t[C];_=y[C].getPixelForValue(A)-T+e}else t==="center"?_=(f.left+f.right)/2-T+e:_=Av(i,t,e);S=Ot(s,c,a),b=t==="left"?-mt:mt}return{titleX:_,titleY:S,maxWidth:v,rotation:b}}class Va extends gi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:s,_suggestedMax:a}=this;return e=Pn(e,Number.POSITIVE_INFINITY),t=Pn(t,Number.NEGATIVE_INFINITY),s=Pn(s,Number.POSITIVE_INFINITY),a=Pn(a,Number.NEGATIVE_INFINITY),{min:Pn(e,s),max:Pn(t,a),minDefined:yn(e),maxDefined:yn(t)}}getMinMax(e){let{min:t,max:s,minDefined:a,maxDefined:o}=this.getUserBounds(),c;if(a&&o)return{min:t,max:s};const h=this.getMatchingVisibleMetas();for(let d=0,f=h.length;d<f;++d)c=h[d].controller.getMinMax(this,e),a||(t=Math.min(t,c.min)),o||(s=Math.max(s,c.max));return t=o&&t>s?s:t,s=a&&t>s?t:s,{min:Pn(t,Pn(s,t)),max:Pn(s,Pn(t,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Xe(this.options.beforeUpdate,[this])}update(e,t,s){const{beginAtZero:a,grace:o,ticks:c}=this.options,h=c.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=g2(this,o,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const d=h<this.ticks.length;this._convertTicksToLabels(d?Rv(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),c.display&&(c.autoSkip||c.source==="auto")&&(this.ticks=ZA(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,s;this.isHorizontal()?(t=this.left,s=this.right):(t=this.top,s=this.bottom,e=!e),this._startPixel=t,this._endPixel=s,this._reversePixels=e,this._length=s-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Xe(this.options.afterUpdate,[this])}beforeSetDimensions(){Xe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Xe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Xe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Xe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let s,a,o;for(s=0,a=e.length;s<a;s++)o=e[s],o.label=Xe(t.callback,[o.value,s,e],this)}afterTickToLabelConversion(){Xe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Xe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,s=Ov(this.ticks.length,e.ticks.maxTicksLimit),a=t.minRotation||0,o=t.maxRotation;let c=a,h,d,f;if(!this._isVisible()||!t.display||a>=o||s<=1||!this.isHorizontal()){this.labelRotation=a;return}const y=this._getLabelSizes(),b=y.widest.width,v=y.highest.height,_=Rt(this.chart.width-b,0,this.maxWidth);h=e.offset?this.maxWidth/s:_/(s-1),b+6>h&&(h=_/(s-(e.offset?.5:1)),d=this.maxHeight-Kr(e.grid)-t.padding-Mv(e.title,this.chart.options.font),f=Math.sqrt(b*b+v*v),c=Uj(Math.min(Math.asin(Rt((y.highest.height+6)/h,-1,1)),Math.asin(Rt(d/f,-1,1))-Math.asin(Rt(v/f,-1,1)))),c=Math.max(a,Math.min(o,c))),this.labelRotation=c}afterCalculateLabelRotation(){Xe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Xe(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:s,title:a,grid:o}}=this,c=this._isVisible(),h=this.isHorizontal();if(c){const d=Mv(a,t.options.font);if(h?(e.width=this.maxWidth,e.height=Kr(o)+d):(e.height=this.maxHeight,e.width=Kr(o)+d),s.display&&this.ticks.length){const{first:f,last:y,widest:b,highest:v}=this._getLabelSizes(),_=s.padding*2,S=ui(this.labelRotation),w=Math.cos(S),T=Math.sin(S);if(h){const C=s.mirror?0:T*b.width+w*v.height;e.height=Math.min(this.maxHeight,e.height+C+_)}else{const C=s.mirror?0:w*b.width+T*v.height;e.width=Math.min(this.maxWidth,e.width+C+_)}this._calculatePadding(f,y,T,w)}}this._handleMargins(),h?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,s,a){const{ticks:{align:o,padding:c},position:h}=this.options,d=this.labelRotation!==0,f=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const y=this.getPixelForTick(0)-this.left,b=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,_=0;d?f?(v=a*e.width,_=s*t.height):(v=s*e.height,_=a*t.width):o==="start"?_=t.width:o==="end"?v=e.width:o!=="inner"&&(v=e.width/2,_=t.width/2),this.paddingLeft=Math.max((v-y+c)*this.width/(this.width-y),0),this.paddingRight=Math.max((_-b+c)*this.width/(this.width-b),0)}else{let y=t.height/2,b=e.height/2;o==="start"?(y=0,b=e.height):o==="end"&&(y=t.height,b=0),this.paddingTop=y+c,this.paddingBottom=b+c}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Xe(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,s;for(t=0,s=e.length;t<s;t++)ze(e[t].label)&&(e.splice(t,1),s--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let s=this.ticks;t<s.length&&(s=Rv(s,t)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,s){const{ctx:a,_longestTextCache:o}=this,c=[],h=[],d=Math.floor(t/Ov(t,s));let f=0,y=0,b,v,_,S,w,T,C,A,j,D,N;for(b=0;b<t;b+=d){if(S=e[b].label,w=this._resolveTickFontOptions(b),a.font=T=w.string,C=o[T]=o[T]||{data:{},gc:[]},A=w.lineHeight,j=D=0,!ze(S)&&!pt(S))j=sv(a,C.data,C.gc,j,S),D=A;else if(pt(S))for(v=0,_=S.length;v<_;++v)N=S[v],!ze(N)&&!pt(N)&&(j=sv(a,C.data,C.gc,j,N),D+=A);c.push(j),h.push(D),f=Math.max(j,f),y=Math.max(D,y)}oO(o,t);const q=c.indexOf(f),P=h.indexOf(y),U=L=>({width:c[L]||0,height:h[L]||0});return{first:U(0),last:U(t-1),widest:U(q),highest:U(P),widths:c,heights:h}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Fj(this._alignToPixels?bs(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const s=t[e];return s.$context||(s.$context=cO(this.getContext(),e,s))}return this.$context||(this.$context=lO(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=ui(this.labelRotation),s=Math.abs(Math.cos(t)),a=Math.abs(Math.sin(t)),o=this._getLabelSizes(),c=e.autoSkipPadding||0,h=o?o.widest.width+c:0,d=o?o.highest.height+c:0;return this.isHorizontal()?d*s>h*a?h/s:d/a:d*a<h*s?d/s:h/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,s=this.chart,a=this.options,{grid:o,position:c,border:h}=a,d=o.offset,f=this.isHorizontal(),b=this.ticks.length+(d?1:0),v=Kr(o),_=[],S=h.setContext(this.getContext()),w=S.display?S.width:0,T=w/2,C=function(H){return bs(s,H,w)};let A,j,D,N,q,P,U,L,Z,W,B,G;if(c==="top")A=C(this.bottom),P=this.bottom-v,L=A-T,W=C(e.top)+T,G=e.bottom;else if(c==="bottom")A=C(this.top),W=e.top,G=C(e.bottom)-T,P=A+T,L=this.top+v;else if(c==="left")A=C(this.right),q=this.right-v,U=A-T,Z=C(e.left)+T,B=e.right;else if(c==="right")A=C(this.left),Z=e.left,B=C(e.right)-T,q=A+T,U=this.left+v;else if(t==="x"){if(c==="center")A=C((e.top+e.bottom)/2+.5);else if(Me(c)){const H=Object.keys(c)[0],ee=c[H];A=C(this.chart.scales[H].getPixelForValue(ee))}W=e.top,G=e.bottom,P=A+T,L=P+v}else if(t==="y"){if(c==="center")A=C((e.left+e.right)/2);else if(Me(c)){const H=Object.keys(c)[0],ee=c[H];A=C(this.chart.scales[H].getPixelForValue(ee))}q=A-T,U=q-v,Z=e.left,B=e.right}const ae=Te(a.ticks.maxTicksLimit,b),re=Math.max(1,Math.ceil(b/ae));for(j=0;j<b;j+=re){const H=this.getContext(j),ee=o.setContext(H),ue=h.setContext(H),me=ee.lineWidth,we=ee.color,R=ue.dash||[],K=ue.dashOffset,ne=ee.tickWidth,se=ee.tickColor,fe=ee.tickBorderDash||[],ge=ee.tickBorderDashOffset;D=rO(this,j,d),D!==void 0&&(N=bs(s,D,me),f?q=U=Z=B=N:P=L=W=G=N,_.push({tx1:q,ty1:P,tx2:U,ty2:L,x1:Z,y1:W,x2:B,y2:G,width:me,color:we,borderDash:R,borderDashOffset:K,tickWidth:ne,tickColor:se,tickBorderDash:fe,tickBorderDashOffset:ge}))}return this._ticksLength=b,this._borderValue=A,_}_computeLabelItems(e){const t=this.axis,s=this.options,{position:a,ticks:o}=s,c=this.isHorizontal(),h=this.ticks,{align:d,crossAlign:f,padding:y,mirror:b}=o,v=Kr(s.grid),_=v+y,S=b?-y:_,w=-ui(this.labelRotation),T=[];let C,A,j,D,N,q,P,U,L,Z,W,B,G="middle";if(a==="top")q=this.bottom-S,P=this._getXAxisLabelAlignment();else if(a==="bottom")q=this.top+S,P=this._getXAxisLabelAlignment();else if(a==="left"){const re=this._getYAxisLabelAlignment(v);P=re.textAlign,N=re.x}else if(a==="right"){const re=this._getYAxisLabelAlignment(v);P=re.textAlign,N=re.x}else if(t==="x"){if(a==="center")q=(e.top+e.bottom)/2+_;else if(Me(a)){const re=Object.keys(a)[0],H=a[re];q=this.chart.scales[re].getPixelForValue(H)+_}P=this._getXAxisLabelAlignment()}else if(t==="y"){if(a==="center")N=(e.left+e.right)/2-_;else if(Me(a)){const re=Object.keys(a)[0],H=a[re];N=this.chart.scales[re].getPixelForValue(H)}P=this._getYAxisLabelAlignment(v).textAlign}t==="y"&&(d==="start"?G="top":d==="end"&&(G="bottom"));const ae=this._getLabelSizes();for(C=0,A=h.length;C<A;++C){j=h[C],D=j.label;const re=o.setContext(this.getContext(C));U=this.getPixelForTick(C)+o.labelOffset,L=this._resolveTickFontOptions(C),Z=L.lineHeight,W=pt(D)?D.length:1;const H=W/2,ee=re.color,ue=re.textStrokeColor,me=re.textStrokeWidth;let we=P;c?(N=U,P==="inner"&&(C===A-1?we=this.options.reverse?"left":"right":C===0?we=this.options.reverse?"right":"left":we="center"),a==="top"?f==="near"||w!==0?B=-W*Z+Z/2:f==="center"?B=-ae.highest.height/2-H*Z+Z:B=-ae.highest.height+Z/2:f==="near"||w!==0?B=Z/2:f==="center"?B=ae.highest.height/2-H*Z:B=ae.highest.height-W*Z,b&&(B*=-1),w!==0&&!re.showLabelBackdrop&&(N+=Z/2*Math.sin(w))):(q=U,B=(1-W)*Z/2);let R;if(re.showLabelBackdrop){const K=bn(re.backdropPadding),ne=ae.heights[C],se=ae.widths[C];let fe=B-K.top,ge=0-K.left;switch(G){case"middle":fe-=ne/2;break;case"bottom":fe-=ne;break}switch(P){case"center":ge-=se/2;break;case"right":ge-=se;break;case"inner":C===A-1?ge-=se:C>0&&(ge-=se/2);break}R={left:ge,top:fe,width:se+K.width,height:ne+K.height,color:re.backdropColor}}T.push({label:D,font:L,textOffset:B,options:{rotation:w,color:ee,strokeColor:ue,strokeWidth:me,textAlign:we,textBaseline:G,translation:[N,q],backdrop:R}})}return T}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-ui(this.labelRotation))return e==="top"?"left":"right";let a="center";return t.align==="start"?a="left":t.align==="end"?a="right":t.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:s,mirror:a,padding:o}}=this.options,c=this._getLabelSizes(),h=e+o,d=c.widest.width;let f,y;return t==="left"?a?(y=this.right+o,s==="near"?f="left":s==="center"?(f="center",y+=d/2):(f="right",y+=d)):(y=this.right-h,s==="near"?f="right":s==="center"?(f="center",y-=d/2):(f="left",y=this.left)):t==="right"?a?(y=this.left+o,s==="near"?f="right":s==="center"?(f="center",y-=d/2):(f="left",y-=d)):(y=this.left+h,s==="near"?f="left":s==="center"?(f="center",y+=d/2):(f="right",y=this.right)):f="right",{textAlign:f,x:y}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:s,top:a,width:o,height:c}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(s,a,o,c),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const a=this.ticks.findIndex(o=>o.value===e);return a>=0?t.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const t=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let o,c;const h=(d,f,y)=>{!y.width||!y.color||(s.save(),s.lineWidth=y.width,s.strokeStyle=y.color,s.setLineDash(y.borderDash||[]),s.lineDashOffset=y.borderDashOffset,s.beginPath(),s.moveTo(d.x,d.y),s.lineTo(f.x,f.y),s.stroke(),s.restore())};if(t.display)for(o=0,c=a.length;o<c;++o){const d=a[o];t.drawOnChartArea&&h({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),t.drawTicks&&h({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:s,grid:a}}=this,o=s.setContext(this.getContext()),c=s.display?o.width:0;if(!c)return;const h=a.setContext(this.getContext(0)).lineWidth,d=this._borderValue;let f,y,b,v;this.isHorizontal()?(f=bs(e,this.left,c)-c/2,y=bs(e,this.right,h)+h/2,b=v=d):(b=bs(e,this.top,c)-c/2,v=bs(e,this.bottom,h)+h/2,f=y=d),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(f,b),t.lineTo(y,v),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,a=this._computeLabelArea();a&&Vf(s,a);const o=this.getLabelItems(e);for(const c of o){const h=c.options,d=c.font,f=c.label,y=c.textOffset;vo(s,f,0,y,d,h)}a&&Gf(s)}drawTitle(){const{ctx:e,options:{position:t,title:s,reverse:a}}=this;if(!s.display)return;const o=Mt(s.font),c=bn(s.padding),h=s.align;let d=o.lineHeight/2;t==="bottom"||t==="center"||Me(t)?(d+=c.bottom,pt(s.text)&&(d+=o.lineHeight*(s.text.length-1))):d+=c.top;const{titleX:f,titleY:y,maxWidth:b,rotation:v}=hO(this,d,t,h);vo(e,s.text,0,0,o,{color:s.color,maxWidth:b,rotation:v,textAlign:uO(h,t,a),textBaseline:"middle",translation:[f,y]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,s=Te(e.grid&&e.grid.z,-1),a=Te(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Va.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];let o,c;for(o=0,c=t.length;o<c;++o){const h=t[o];h[s]===this.id&&(!e||h.type===e)&&a.push(h)}return a}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Mt(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class hc{constructor(e,t,s){this.type=e,this.scope=t,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let s;gO(t)&&(s=this.register(t));const a=this.items,o=e.id,c=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in a||(a[o]=e,dO(e,c,s),this.override&&ot.override(e.id,e.overrides)),c}get(e){return this.items[e]}unregister(e){const t=this.items,s=e.id,a=this.scope;s in t&&delete t[s],a&&s in ot[a]&&(delete ot[a][s],this.override&&delete Ns[s])}}function dO(i,e,t){const s=go(Object.create(null),[t?ot.get(t):{},ot.get(e),i.defaults]);ot.set(e,s),i.defaultRoutes&&fO(e,i.defaultRoutes),i.descriptors&&ot.describe(e,i.descriptors)}function fO(i,e){Object.keys(e).forEach(t=>{const s=t.split("."),a=s.pop(),o=[i].concat(s).join("."),c=e[t].split("."),h=c.pop(),d=c.join(".");ot.route(o,a,d,h)})}function gO(i){return"id"in i&&"defaults"in i}class pO{constructor(){this.controllers=new hc(Xc,"datasets",!0),this.elements=new hc(gi,"elements"),this.plugins=new hc(Object,"plugins"),this.scales=new hc(Va,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,s){[...t].forEach(a=>{const o=s||this._getRegistryForType(a);s||o.isForType(a)||o===this.plugins&&a.id?this._exec(e,o,a):He(a,c=>{const h=s||this._getRegistryForType(c);this._exec(e,h,c)})})}_exec(e,t,s){const a=Hf(e);Xe(s["before"+a],[],s),t[e](s),Xe(s["after"+a],[],s)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const s=this._typedRegistries[t];if(s.isForType(e))return s}return this.plugins}_get(e,t,s){const a=t.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return a}}var zn=new pO;class mO{constructor(){this._init=void 0}notify(e,t,s,a){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const o=a?this._descriptors(e).filter(a):this._descriptors(e),c=this._notify(o,e,t,s);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),c}_notify(e,t,s,a){a=a||{};for(const o of e){const c=o.plugin,h=c[s],d=[t,a,o.options];if(Xe(h,d,c)===!1&&a.cancelable)return!1}return!0}invalidate(){ze(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const s=e&&e.config,a=Te(s.options&&s.options.plugins,{}),o=yO(s);return a===!1&&!t?[]:vO(e,o,a,t)}_notifyStateChanges(e){const t=this._oldCache||[],s=this._cache,a=(o,c)=>o.filter(h=>!c.some(d=>h.plugin.id===d.plugin.id));this._notify(a(t,s),e,"stop"),this._notify(a(s,t),e,"start")}}function yO(i){const e={},t=[],s=Object.keys(zn.plugins.items);for(let o=0;o<s.length;o++)t.push(zn.getPlugin(s[o]));const a=i.plugins||[];for(let o=0;o<a.length;o++){const c=a[o];t.indexOf(c)===-1&&(t.push(c),e[c.id]=!0)}return{plugins:t,localIds:e}}function bO(i,e){return!e&&i===!1?null:i===!0?{}:i}function vO(i,{plugins:e,localIds:t},s,a){const o=[],c=i.getContext();for(const h of e){const d=h.id,f=bO(s[d],a);f!==null&&o.push({plugin:h,options:_O(i.config,{plugin:h,local:t[d]},f,c)})}return o}function _O(i,{plugin:e,local:t},s,a){const o=i.pluginScopeKeys(e),c=i.getOptionScopes(s,o);return t&&e.defaults&&c.push(e.defaults),i.createResolver(c,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function gf(i,e){const t=ot.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function xO(i,e){let t=i;return i==="_index_"?t=e:i==="_value_"&&(t=e==="x"?"y":"x"),t}function SO(i,e){return i===e?"_index_":"_value_"}function kv(i){if(i==="x"||i==="y"||i==="r")return i}function wO(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function pf(i,...e){if(kv(i))return i;for(const t of e){const s=t.axis||wO(t.position)||i.length>1&&kv(i[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Dv(i,e,t){if(t[e+"AxisID"]===i)return{axis:e}}function TO(i,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(s=>s.xAxisID===i||s.yAxisID===i);if(t.length)return Dv(i,"x",t[0])||Dv(i,"y",t[0])}return{}}function EO(i,e){const t=Ns[i.type]||{scales:{}},s=e.scales||{},a=gf(i.type,e),o=Object.create(null);return Object.keys(s).forEach(c=>{const h=s[c];if(!Me(h))return console.error(`Invalid scale configuration for scale: ${c}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${c}`);const d=pf(c,h,TO(c,i),ot.scales[h.type]),f=SO(d,a),y=t.scales||{};o[c]=ao(Object.create(null),[{axis:d},h,y[d],y[f]])}),i.data.datasets.forEach(c=>{const h=c.type||i.type,d=c.indexAxis||gf(h,e),y=(Ns[h]||{}).scales||{};Object.keys(y).forEach(b=>{const v=xO(b,d),_=c[v+"AxisID"]||v;o[_]=o[_]||Object.create(null),ao(o[_],[{axis:v},s[_],y[b]])})}),Object.keys(o).forEach(c=>{const h=o[c];ao(h,[ot.scales[h.type],ot.scale])}),o}function yx(i){const e=i.options||(i.options={});e.plugins=Te(e.plugins,{}),e.scales=EO(i,e)}function bx(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function CO(i){return i=i||{},i.data=bx(i.data),yx(i),i}const Nv=new Map,vx=new Set;function dc(i,e){let t=Nv.get(i);return t||(t=e(),Nv.set(i,t),vx.add(t)),t}const Xr=(i,e,t)=>{const s=Ds(e,t);s!==void 0&&i.add(s)};class jO{constructor(e){this._config=CO(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=bx(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),yx(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return dc(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return dc(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return dc(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,s=this.type;return dc(`${s}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const s=this._scopeCache;let a=s.get(e);return(!a||t)&&(a=new Map,s.set(e,a)),a}getOptionScopes(e,t,s){const{options:a,type:o}=this,c=this._cachedScopes(e,s),h=c.get(t);if(h)return h;const d=new Set;t.forEach(y=>{e&&(d.add(e),y.forEach(b=>Xr(d,e,b))),y.forEach(b=>Xr(d,a,b)),y.forEach(b=>Xr(d,Ns[o]||{},b)),y.forEach(b=>Xr(d,ot,b)),y.forEach(b=>Xr(d,df,b))});const f=Array.from(d);return f.length===0&&f.push(Object.create(null)),vx.has(t)&&c.set(t,f),f}chartOptionScopes(){const{options:e,type:t}=this;return[e,Ns[t]||{},ot.datasets[t]||{},{type:t},ot,df]}resolveNamedOptions(e,t,s,a=[""]){const o={$shared:!0},{resolver:c,subPrefixes:h}=Pv(this._resolverCache,e,a);let d=c;if(OO(c,t)){o.$shared=!1,s=Wi(s)?s():s;const f=this.createResolver(e,s,h);d=Ba(c,s,f)}for(const f of t)o[f]=d[f];return o}createResolver(e,t,s=[""],a){const{resolver:o}=Pv(this._resolverCache,e,s);return Me(t)?Ba(o,t,void 0,a):o}}function Pv(i,e,t){let s=i.get(e);s||(s=new Map,i.set(e,s));const a=t.join();let o=s.get(a);return o||(o={resolver:Yf(e,t),subPrefixes:t.filter(h=>!h.toLowerCase().includes("hover"))},s.set(a,o)),o}const AO=i=>Me(i)&&Object.getOwnPropertyNames(i).some(e=>Wi(i[e]));function OO(i,e){const{isScriptable:t,isIndexable:s}=tx(i);for(const a of e){const o=t(a),c=s(a),h=(c||o)&&i[a];if(o&&(Wi(h)||AO(h))||c&&pt(h))return!0}return!1}var RO="4.5.1";const MO=["top","bottom","left","right","chartArea"];function Lv(i,e){return i==="top"||i==="bottom"||MO.indexOf(i)===-1&&e==="x"}function zv(i,e){return function(t,s){return t[i]===s[i]?t[e]-s[e]:t[i]-s[i]}}function Bv(i){const e=i.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Xe(t&&t.onComplete,[i],e)}function kO(i){const e=i.chart,t=e.options.animation;Xe(t&&t.onProgress,[i],e)}function _x(i){return Qf()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Sc={},Uv=i=>{const e=_x(i);return Object.values(Sc).filter(t=>t.canvas===e).pop()};function DO(i,e,t){const s=Object.keys(i);for(const a of s){const o=+a;if(o>=e){const c=i[a];delete i[a],(t>0||o>e)&&(i[o+t]=c)}}}function NO(i,e,t,s){return!t||i.type==="mouseout"?null:s?e:i}let Jc=class{static defaults=ot;static instances=Sc;static overrides=Ns;static registry=zn;static version=RO;static getChart=Uv;static register(...e){zn.add(...e),Hv()}static unregister(...e){zn.remove(...e),Hv()}constructor(e,t){const s=this.config=new jO(t),a=_x(e),o=Uv(a);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const c=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||JA(a)),this.platform.updateConfig(s);const h=this.platform.acquireContext(a,c.aspectRatio),d=h&&h.canvas,f=d&&d.height,y=d&&d.width;if(this.id=Cj(),this.ctx=h,this.canvas=d,this.width=y,this.height=f,this._options=c,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new mO,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Vj(b=>this.update(b),c.resizeDelay||0),this._dataChanges=[],Sc[this.id]=this,!h||!d){console.error("Failed to create chart: can't acquire context from the given item");return}oi.listen(this,"complete",Bv),oi.listen(this,"progress",kO),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:s,height:a,_aspectRatio:o}=this;return ze(e)?t&&o?o:a?s/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return zn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():lv(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return av(this.canvas,this.ctx),this}stop(){return oi.stop(this),this}resize(e,t){oi.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const s=this.options,a=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,c=this.platform.getMaximumSize(a,e,t,o),h=s.devicePixelRatio||this.platform.getDevicePixelRatio(),d=this.width?"resize":"attach";this.width=c.width,this.height=c.height,this._aspectRatio=this.aspectRatio,lv(this,h,!0)&&(this.notifyPlugins("resize",{size:c}),Xe(s.onResize,[this,c],this),this.attached&&this._doResize(d)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};He(t,(s,a)=>{s.id=a})}buildOrUpdateScales(){const e=this.options,t=e.scales,s=this.scales,a=Object.keys(s).reduce((c,h)=>(c[h]=!1,c),{});let o=[];t&&(o=o.concat(Object.keys(t).map(c=>{const h=t[c],d=pf(c,h),f=d==="r",y=d==="x";return{options:h,dposition:f?"chartArea":y?"bottom":"left",dtype:f?"radialLinear":y?"category":"linear"}}))),He(o,c=>{const h=c.options,d=h.id,f=pf(d,h),y=Te(h.type,c.dtype);(h.position===void 0||Lv(h.position,f)!==Lv(c.dposition))&&(h.position=c.dposition),a[d]=!0;let b=null;if(d in s&&s[d].type===y)b=s[d];else{const v=zn.getScale(y);b=new v({id:d,type:y,ctx:this.ctx,chart:this}),s[b.id]=b}b.init(h,e)}),He(a,(c,h)=>{c||delete s[h]}),He(s,c=>{mn.configure(this,c,c.options),mn.addBox(this,c)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,s=e.length;if(e.sort((a,o)=>a.index-o.index),s>t){for(let a=t;a<s;++a)this._destroyDatasetMeta(a);e.splice(t,s-t)}this._sortedMetasets=e.slice(0).sort(zv("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((s,a)=>{t.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let s,a;for(this._removeUnreferencedMetasets(),s=0,a=t.length;s<a;s++){const o=t[s];let c=this.getDatasetMeta(s);const h=o.type||this.config.type;if(c.type&&c.type!==h&&(this._destroyDatasetMeta(s),c=this.getDatasetMeta(s)),c.type=h,c.indexAxis=o.indexAxis||gf(h,this.options),c.order=o.order||0,c.index=s,c.label=""+o.label,c.visible=this.isDatasetVisible(s),c.controller)c.controller.updateIndex(s),c.controller.linkScales();else{const d=zn.getController(h),{datasetElementType:f,dataElementType:y}=ot.datasets[h];Object.assign(d,{dataElementType:zn.getElement(y),datasetElementType:f&&zn.getElement(f)}),c.controller=new d(this,s),e.push(c.controller)}}return this._updateMetasets(),e}_resetElements(){He(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const s=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let c=0;for(let f=0,y=this.data.datasets.length;f<y;f++){const{controller:b}=this.getDatasetMeta(f),v=!a&&o.indexOf(b)===-1;b.buildOrUpdateElements(v),c=Math.max(+b.getMaxOverflow(),c)}c=this._minPadding=s.layout.autoPadding?c:0,this._updateLayout(c),a||He(o,f=>{f.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(zv("z","_idx"));const{_active:h,_lastEvent:d}=this;d?this._eventHandler(d,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){He(this.scales,e=>{mn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!Kb(t,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:s,start:a,count:o}of t){const c=s==="_removeElements"?-o:o;DO(e,a,c)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,s=o=>new Set(e.filter(c=>c[0]===o).map((c,h)=>h+","+c.splice(1).join(","))),a=s(0);for(let o=1;o<t;o++)if(!Kb(a,s(o)))return;return Array.from(a).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;mn.update(this,this.width,this.height,e);const t=this.chartArea,s=t.width<=0||t.height<=0;this._layers=[],He(this.boxes,a=>{s&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,o)=>{a._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,s=this.data.datasets.length;t<s;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,s=this.data.datasets.length;t<s;++t)this._updateDataset(t,Wi(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const s=this.getDatasetMeta(e),a={meta:s,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(s.controller._update(t),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(oi.has(this)?this.attached&&!oi.running(this)&&oi.start(this):(this.draw(),Bv({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,s=[];let a,o;for(a=0,o=t.length;a<o;++a){const c=t[a];(!e||c.visible)&&s.push(c)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,s={meta:e,index:e.index,cancelable:!0},a=Q2(this,e);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(a&&Vf(t,a),e.controller.draw(),a&&Gf(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return bo(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,s,a){const o=MA.modes[t];return typeof o=="function"?o(this,e,s,a):[]}getDatasetMeta(e){const t=this.data.datasets[e],s=this._metasets;let a=s.filter(o=>o&&o._dataset===t).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},s.push(a)),a}getContext(){return this.$context||(this.$context=Ps(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!t.hidden}setDatasetVisibility(e,t){const s=this.getDatasetMeta(e);s.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,s){const a=s?"show":"hide",o=this.getDatasetMeta(e),c=o.controller._resolveAnimations(void 0,a);po(t)?(o.data[t].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),c.update(o,{visible:s}),this.update(h=>h.datasetIndex===e?a:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),oi.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),av(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete Sc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,s=(o,c)=>{t.addEventListener(this,o,c),e[o]=c},a=(o,c,h)=>{o.offsetX=c,o.offsetY=h,this._eventHandler(o)};He(this.options.events,o=>s(o,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,s=(d,f)=>{t.addEventListener(this,d,f),e[d]=f},a=(d,f)=>{e[d]&&(t.removeEventListener(this,d,f),delete e[d])},o=(d,f)=>{this.canvas&&this.resize(d,f)};let c;const h=()=>{a("attach",h),this.attached=!0,this.resize(),s("resize",o),s("detach",c)};c=()=>{this.attached=!1,a("resize",o),this._stop(),this._resize(0,0),s("attach",h)},t.isAttached(this.canvas)?h():c()}unbindEvents(){He(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},He(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,s){const a=s?"set":"remove";let o,c,h,d;for(t==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+a+"DatasetHoverStyle"]()),h=0,d=e.length;h<d;++h){c=e[h];const f=c&&this.getDatasetMeta(c.datasetIndex).controller;f&&f[a+"HoverStyle"](c.element,c.datasetIndex,c.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],s=e.map(({datasetIndex:o,index:c})=>{const h=this.getDatasetMeta(o);if(!h)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:h.data[c],index:c}});!Dc(s,t)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,t))}notifyPlugins(e,t,s){return this._plugins.notify(this,e,t,s)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,s){const a=this.options.hover,o=(d,f)=>d.filter(y=>!f.some(b=>y.datasetIndex===b.datasetIndex&&y.index===b.index)),c=o(t,e),h=s?e:o(e,t);c.length&&this.updateHoverStyle(c,a.mode,!1),h.length&&a.mode&&this.updateHoverStyle(h,a.mode,!0)}_eventHandler(e,t){const s={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},a=c=>(c.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,a)===!1)return;const o=this._handleEvent(e,t,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,a),(o||s.changed)&&this.render(),this}_handleEvent(e,t,s){const{_active:a=[],options:o}=this,c=t,h=this._getActiveElements(e,a,s,c),d=kj(e),f=NO(e,this._lastEvent,s,d);s&&(this._lastEvent=null,Xe(o.onHover,[e,h,this],this),d&&Xe(o.onClick,[e,h,this],this));const y=!Dc(h,a);return(y||t)&&(this._active=h,this._updateHoverStyles(h,a,t)),this._lastEvent=f,y}_getActiveElements(e,t,s,a){if(e.type==="mouseout")return[];if(!s)return t;const o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,a)}};function Hv(){return He(Jc.instances,i=>i._plugins.invalidate())}function PO(i,e,t){const{startAngle:s,x:a,y:o,outerRadius:c,innerRadius:h,options:d}=e,{borderWidth:f,borderJoinStyle:y}=d,b=Math.min(f/c,En(s-t));if(i.beginPath(),i.arc(a,o,c-f/2,s+b/2,t-b/2),h>0){const v=Math.min(f/h,En(s-t));i.arc(a,o,h+f/2,t-v/2,s+v/2,!0)}else{const v=Math.min(f/2,c*En(s-t));if(y==="round")i.arc(a,o,v,t-Fe/2,s+Fe/2,!0);else if(y==="bevel"){const _=2*v*v,S=-_*Math.cos(t+Fe/2)+a,w=-_*Math.sin(t+Fe/2)+o,T=_*Math.cos(s+Fe/2)+a,C=_*Math.sin(s+Fe/2)+o;i.lineTo(S,w),i.lineTo(T,C)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function LO(i,e,t){const{startAngle:s,pixelMargin:a,x:o,y:c,outerRadius:h,innerRadius:d}=e;let f=a/h;i.beginPath(),i.arc(o,c,h,s-f,t+f),d>a?(f=a/d,i.arc(o,c,d,t+f,s-f,!0)):i.arc(o,c,a,t+mt,s-mt),i.closePath(),i.clip()}function zO(i){return Wf(i,["outerStart","outerEnd","innerStart","innerEnd"])}function BO(i,e,t,s){const a=zO(i.options.borderRadius),o=(t-e)/2,c=Math.min(o,s*e/2),h=d=>{const f=(t-Math.min(o,d))*s/2;return Rt(d,0,Math.min(o,f))};return{outerStart:h(a.outerStart),outerEnd:h(a.outerEnd),innerStart:Rt(a.innerStart,0,c),innerEnd:Rt(a.innerEnd,0,c)}}function Ca(i,e,t,s){return{x:t+i*Math.cos(e),y:s+i*Math.sin(e)}}function Uc(i,e,t,s,a,o){const{x:c,y:h,startAngle:d,pixelMargin:f,innerRadius:y}=e,b=Math.max(e.outerRadius+s+t-f,0),v=y>0?y+s+t+f:0;let _=0;const S=a-d;if(s){const re=y>0?y-s:0,H=b>0?b-s:0,ee=(re+H)/2,ue=ee!==0?S*ee/(ee+s):S;_=(S-ue)/2}const w=Math.max(.001,S*b-t/Fe)/b,T=(S-w)/2,C=d+T+_,A=a-T-_,{outerStart:j,outerEnd:D,innerStart:N,innerEnd:q}=BO(e,v,b,A-C),P=b-j,U=b-D,L=C+j/P,Z=A-D/U,W=v+N,B=v+q,G=C+N/W,ae=A-q/B;if(i.beginPath(),o){const re=(L+Z)/2;if(i.arc(c,h,b,L,re),i.arc(c,h,b,re,Z),D>0){const me=Ca(U,Z,c,h);i.arc(me.x,me.y,D,Z,A+mt)}const H=Ca(B,A,c,h);if(i.lineTo(H.x,H.y),q>0){const me=Ca(B,ae,c,h);i.arc(me.x,me.y,q,A+mt,ae+Math.PI)}const ee=(A-q/v+(C+N/v))/2;if(i.arc(c,h,v,A-q/v,ee,!0),i.arc(c,h,v,ee,C+N/v,!0),N>0){const me=Ca(W,G,c,h);i.arc(me.x,me.y,N,G+Math.PI,C-mt)}const ue=Ca(P,C,c,h);if(i.lineTo(ue.x,ue.y),j>0){const me=Ca(P,L,c,h);i.arc(me.x,me.y,j,C-mt,L)}}else{i.moveTo(c,h);const re=Math.cos(L)*b+c,H=Math.sin(L)*b+h;i.lineTo(re,H);const ee=Math.cos(Z)*b+c,ue=Math.sin(Z)*b+h;i.lineTo(ee,ue)}i.closePath()}function UO(i,e,t,s,a){const{fullCircles:o,startAngle:c,circumference:h}=e;let d=e.endAngle;if(o){Uc(i,e,t,s,d,a);for(let f=0;f<o;++f)i.fill();isNaN(h)||(d=c+(h%it||it))}return Uc(i,e,t,s,d,a),i.fill(),d}function HO(i,e,t,s,a){const{fullCircles:o,startAngle:c,circumference:h,options:d}=e,{borderWidth:f,borderJoinStyle:y,borderDash:b,borderDashOffset:v,borderRadius:_}=d,S=d.borderAlign==="inner";if(!f)return;i.setLineDash(b||[]),i.lineDashOffset=v,S?(i.lineWidth=f*2,i.lineJoin=y||"round"):(i.lineWidth=f,i.lineJoin=y||"bevel");let w=e.endAngle;if(o){Uc(i,e,t,s,w,a);for(let T=0;T<o;++T)i.stroke();isNaN(h)||(w=c+(h%it||it))}S&&LO(i,e,w),d.selfJoin&&w-c>=Fe&&_===0&&y!=="miter"&&PO(i,e,w),o||(Uc(i,e,t,s,w,a),i.stroke())}class FO extends gi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,s){const a=this.getProps(["x","y"],s),{angle:o,distance:c}=W_(a,{x:e,y:t}),{startAngle:h,endAngle:d,innerRadius:f,outerRadius:y,circumference:b}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),v=(this.options.spacing+this.options.borderWidth)/2,_=Te(b,d-h),S=yo(o,h,d)&&h!==d,w=_>=it||S,T=qi(c,f+v,y+v);return w&&T}getCenterPoint(e){const{x:t,y:s,startAngle:a,endAngle:o,innerRadius:c,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:d,spacing:f}=this.options,y=(a+o)/2,b=(c+h+f+d)/2;return{x:t+Math.cos(y)*b,y:s+Math.sin(y)*b}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:s}=this,a=(t.offset||0)/4,o=(t.spacing||0)/2,c=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=s>it?Math.floor(s/it):0,s===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const h=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(h)*a,Math.sin(h)*a);const d=1-Math.sin(Math.min(Fe,s||0)),f=a*d;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,UO(e,this,f,o,c),HO(e,this,f,o,c),e.restore()}}function xx(i,e,t=e){i.lineCap=Te(t.borderCapStyle,e.borderCapStyle),i.setLineDash(Te(t.borderDash,e.borderDash)),i.lineDashOffset=Te(t.borderDashOffset,e.borderDashOffset),i.lineJoin=Te(t.borderJoinStyle,e.borderJoinStyle),i.lineWidth=Te(t.borderWidth,e.borderWidth),i.strokeStyle=Te(t.borderColor,e.borderColor)}function IO(i,e,t){i.lineTo(t.x,t.y)}function qO(i){return i.stepped?a2:i.tension||i.cubicInterpolationMode==="monotone"?r2:IO}function Sx(i,e,t={}){const s=i.length,{start:a=0,end:o=s-1}=t,{start:c,end:h}=e,d=Math.max(a,c),f=Math.min(o,h),y=a<c&&o<c||a>h&&o>h;return{count:s,start:d,loop:e.loop,ilen:f<d&&!y?s+f-d:f-d}}function $O(i,e,t,s){const{points:a,options:o}=e,{count:c,start:h,loop:d,ilen:f}=Sx(a,t,s),y=qO(o);let{move:b=!0,reverse:v}=s||{},_,S,w;for(_=0;_<=f;++_)S=a[(h+(v?f-_:_))%c],!S.skip&&(b?(i.moveTo(S.x,S.y),b=!1):y(i,w,S,v,o.stepped),w=S);return d&&(S=a[(h+(v?f:0))%c],y(i,w,S,v,o.stepped)),!!d}function VO(i,e,t,s){const a=e.points,{count:o,start:c,ilen:h}=Sx(a,t,s),{move:d=!0,reverse:f}=s||{};let y=0,b=0,v,_,S,w,T,C;const A=D=>(c+(f?h-D:D))%o,j=()=>{w!==T&&(i.lineTo(y,T),i.lineTo(y,w),i.lineTo(y,C))};for(d&&(_=a[A(0)],i.moveTo(_.x,_.y)),v=0;v<=h;++v){if(_=a[A(v)],_.skip)continue;const D=_.x,N=_.y,q=D|0;q===S?(N<w?w=N:N>T&&(T=N),y=(b*y+D)/++b):(j(),i.lineTo(D,N),S=q,b=0,w=T=N),C=N}j()}function mf(i){const e=i.options,t=e.borderDash&&e.borderDash.length;return!i._decimated&&!i._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?VO:$O}function GO(i){return i.stepped?B2:i.tension||i.cubicInterpolationMode==="monotone"?U2:Cs}function WO(i,e,t,s){let a=e._path;a||(a=e._path=new Path2D,e.path(a,t,s)&&a.closePath()),xx(i,e.options),i.stroke(a)}function YO(i,e,t,s){const{segments:a,options:o}=e,c=mf(e);for(const h of a)xx(i,o,h.style),i.beginPath(),c(i,e,h,{start:t,end:t+s-1})&&i.closePath(),i.stroke()}const KO=typeof Path2D=="function";function XO(i,e,t,s){KO&&!e.options.segment?WO(i,e,t,s):YO(i,e,t,s)}class QO extends gi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const a=s.spanGaps?this._loop:this._fullLoop;R2(this._points,s,e,a,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=W2(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,s=e.length;return s&&t[e[s-1].end]}interpolate(e,t){const s=this.options,a=e[t],o=this.points,c=$2(this,{property:t,start:a,end:a});if(!c.length)return;const h=[],d=GO(s);let f,y;for(f=0,y=c.length;f<y;++f){const{start:b,end:v}=c[f],_=o[b],S=o[v];if(_===S){h.push(_);continue}const w=Math.abs((a-_[t])/(S[t]-_[t])),T=d(_,S,w,s.stepped);T[t]=e[t],h.push(T)}return h.length===1?h[0]:h}pathSegment(e,t,s){return mf(this)(e,this,t,s)}path(e,t,s){const a=this.segments,o=mf(this);let c=this._loop;t=t||0,s=s||this.points.length-t;for(const h of a)c&=o(e,this,h,{start:t,end:t+s-1});return!!c}draw(e,t,s,a){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),XO(e,this,s,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Fv(i,e,t,s){const a=i.options,{[t]:o}=i.getProps([t],s);return Math.abs(e-o)<a.radius+a.hitRadius}class JO extends gi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,s){const a=this.options,{x:o,y:c}=this.getProps(["x","y"],s);return Math.pow(e-o,2)+Math.pow(t-c,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,t){return Fv(this,e,"x",t)}inYRange(e,t){return Fv(this,e,"y",t)}getCenterPoint(e){const{x:t,y:s}=this.getProps(["x","y"],e);return{x:t,y:s}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const s=t&&e.borderWidth||0;return(t+s)*2}draw(e,t){const s=this.options;this.skip||s.radius<.1||!bo(this,t,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,ff(e,s,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function wx(i,e){const{x:t,y:s,base:a,width:o,height:c}=i.getProps(["x","y","base","width","height"],e);let h,d,f,y,b;return i.horizontal?(b=c/2,h=Math.min(t,a),d=Math.max(t,a),f=s-b,y=s+b):(b=o/2,h=t-b,d=t+b,f=Math.min(s,a),y=Math.max(s,a)),{left:h,top:f,right:d,bottom:y}}function Vi(i,e,t,s){return i?0:Rt(e,t,s)}function ZO(i,e,t){const s=i.options.borderWidth,a=i.borderSkipped,o=ex(s);return{t:Vi(a.top,o.top,0,t),r:Vi(a.right,o.right,0,e),b:Vi(a.bottom,o.bottom,0,t),l:Vi(a.left,o.left,0,e)}}function eR(i,e,t){const{enableBorderRadius:s}=i.getProps(["enableBorderRadius"]),a=i.options.borderRadius,o=Da(a),c=Math.min(e,t),h=i.borderSkipped,d=s||Me(a);return{topLeft:Vi(!d||h.top||h.left,o.topLeft,0,c),topRight:Vi(!d||h.top||h.right,o.topRight,0,c),bottomLeft:Vi(!d||h.bottom||h.left,o.bottomLeft,0,c),bottomRight:Vi(!d||h.bottom||h.right,o.bottomRight,0,c)}}function tR(i){const e=wx(i),t=e.right-e.left,s=e.bottom-e.top,a=ZO(i,t/2,s/2),o=eR(i,t/2,s/2);return{outer:{x:e.left,y:e.top,w:t,h:s,radius:o},inner:{x:e.left+a.l,y:e.top+a.t,w:t-a.l-a.r,h:s-a.t-a.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(a.t,a.l)),topRight:Math.max(0,o.topRight-Math.max(a.t,a.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(a.b,a.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(a.b,a.r))}}}}function Fd(i,e,t,s){const a=e===null,o=t===null,h=i&&!(a&&o)&&wx(i,s);return h&&(a||qi(e,h.left,h.right))&&(o||qi(t,h.top,h.bottom))}function nR(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function iR(i,e){i.rect(e.x,e.y,e.w,e.h)}function Id(i,e,t={}){const s=i.x!==t.x?-e:0,a=i.y!==t.y?-e:0,o=(i.x+i.w!==t.x+t.w?e:0)-s,c=(i.y+i.h!==t.y+t.h?e:0)-a;return{x:i.x+s,y:i.y+a,w:i.w+o,h:i.h+c,radius:i.radius}}class sR extends gi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:s,backgroundColor:a}}=this,{inner:o,outer:c}=tR(this),h=nR(c.radius)?Lc:iR;e.save(),(c.w!==o.w||c.h!==o.h)&&(e.beginPath(),h(e,Id(c,t,o)),e.clip(),h(e,Id(o,-t,c)),e.fillStyle=s,e.fill("evenodd")),e.beginPath(),h(e,Id(o,t)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,t,s){return Fd(this,e,t,s)}inXRange(e,t){return Fd(this,e,null,t)}inYRange(e,t){return Fd(this,null,e,t)}getCenterPoint(e){const{x:t,y:s,base:a,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+a)/2:t,y:o?s:(s+a)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const Iv=(i,e)=>{let{boxHeight:t=e,boxWidth:s=e}=i;return i.usePointStyle&&(t=Math.min(t,e),s=i.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:t,itemHeight:Math.max(e,t)}},aR=(i,e)=>i!==null&&e!==null&&i.datasetIndex===e.datasetIndex&&i.index===e.index;class qv extends gi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,s){this.maxWidth=e,this.maxHeight=t,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Xe(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(s=>e.filter(s,this.chart.data))),e.sort&&(t=t.sort((s,a)=>e.sort(s,a,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,a=Mt(s.font),o=a.size,c=this._computeTitleHeight(),{boxWidth:h,itemHeight:d}=Iv(s,o);let f,y;t.font=a.string,this.isHorizontal()?(f=this.maxWidth,y=this._fitRows(c,o,h,d)+10):(y=this.maxHeight,f=this._fitCols(c,a,h,d)+10),this.width=Math.min(f,e.maxWidth||this.maxWidth),this.height=Math.min(y,e.maxHeight||this.maxHeight)}_fitRows(e,t,s,a){const{ctx:o,maxWidth:c,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],f=this.lineWidths=[0],y=a+h;let b=e;o.textAlign="left",o.textBaseline="middle";let v=-1,_=-y;return this.legendItems.forEach((S,w)=>{const T=s+t/2+o.measureText(S.text).width;(w===0||f[f.length-1]+T+2*h>c)&&(b+=y,f[f.length-(w>0?0:1)]=0,_+=y,v++),d[w]={left:0,top:_,row:v,width:T,height:a},f[f.length-1]+=T+h}),b}_fitCols(e,t,s,a){const{ctx:o,maxHeight:c,options:{labels:{padding:h}}}=this,d=this.legendHitBoxes=[],f=this.columnSizes=[],y=c-e;let b=h,v=0,_=0,S=0,w=0;return this.legendItems.forEach((T,C)=>{const{itemWidth:A,itemHeight:j}=rR(s,t,o,T,a);C>0&&_+j+2*h>y&&(b+=v+h,f.push({width:v,height:_}),S+=v+h,w++,v=_=0),d[C]={left:S,top:_,col:w,width:A,height:j},v=Math.max(v,A),_+=j+h}),b+=v,f.push({width:v,height:_}),b}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:s,labels:{padding:a},rtl:o}}=this,c=Na(o,this.left,this.width);if(this.isHorizontal()){let h=0,d=Ot(s,this.left+a,this.right-this.lineWidths[h]);for(const f of t)h!==f.row&&(h=f.row,d=Ot(s,this.left+a,this.right-this.lineWidths[h])),f.top+=this.top+e+a,f.left=c.leftForLtr(c.x(d),f.width),d+=f.width+a}else{let h=0,d=Ot(s,this.top+e+a,this.bottom-this.columnSizes[h].height);for(const f of t)f.col!==h&&(h=f.col,d=Ot(s,this.top+e+a,this.bottom-this.columnSizes[h].height)),f.top=d,f.left+=this.left+a,f.left=c.leftForLtr(c.x(f.left),f.width),d+=f.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Vf(e,this),this._draw(),Gf(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:s,ctx:a}=this,{align:o,labels:c}=e,h=ot.color,d=Na(e.rtl,this.left,this.width),f=Mt(c.font),{padding:y}=c,b=f.size,v=b/2;let _;this.drawTitle(),a.textAlign=d.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=f.string;const{boxWidth:S,boxHeight:w,itemHeight:T}=Iv(c,b),C=function(q,P,U){if(isNaN(S)||S<=0||isNaN(w)||w<0)return;a.save();const L=Te(U.lineWidth,1);if(a.fillStyle=Te(U.fillStyle,h),a.lineCap=Te(U.lineCap,"butt"),a.lineDashOffset=Te(U.lineDashOffset,0),a.lineJoin=Te(U.lineJoin,"miter"),a.lineWidth=L,a.strokeStyle=Te(U.strokeStyle,h),a.setLineDash(Te(U.lineDash,[])),c.usePointStyle){const Z={radius:w*Math.SQRT2/2,pointStyle:U.pointStyle,rotation:U.rotation,borderWidth:L},W=d.xPlus(q,S/2),B=P+v;Z_(a,Z,W,B,c.pointStyleWidth&&S)}else{const Z=P+Math.max((b-w)/2,0),W=d.leftForLtr(q,S),B=Da(U.borderRadius);a.beginPath(),Object.values(B).some(G=>G!==0)?Lc(a,{x:W,y:Z,w:S,h:w,radius:B}):a.rect(W,Z,S,w),a.fill(),L!==0&&a.stroke()}a.restore()},A=function(q,P,U){vo(a,U.text,q,P+T/2,f,{strikethrough:U.hidden,textAlign:d.textAlign(U.textAlign)})},j=this.isHorizontal(),D=this._computeTitleHeight();j?_={x:Ot(o,this.left+y,this.right-s[0]),y:this.top+y+D,line:0}:_={x:this.left+y,y:Ot(o,this.top+D+y,this.bottom-t[0].height),line:0},rx(this.ctx,e.textDirection);const N=T+y;this.legendItems.forEach((q,P)=>{a.strokeStyle=q.fontColor,a.fillStyle=q.fontColor;const U=a.measureText(q.text).width,L=d.textAlign(q.textAlign||(q.textAlign=c.textAlign)),Z=S+v+U;let W=_.x,B=_.y;d.setWidth(this.width),j?P>0&&W+Z+y>this.right&&(B=_.y+=N,_.line++,W=_.x=Ot(o,this.left+y,this.right-s[_.line])):P>0&&B+N>this.bottom&&(W=_.x=W+t[_.line].width+y,_.line++,B=_.y=Ot(o,this.top+D+y,this.bottom-t[_.line].height));const G=d.x(W);if(C(G,B,q),W=Gj(L,W+S+v,j?W+Z:this.right,e.rtl),A(d.x(W),B,q),j)_.x+=Z+y;else if(typeof q.text!="string"){const ae=f.lineHeight;_.y+=Tx(q,ae)+y}else _.y+=N}),ox(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,s=Mt(t.font),a=bn(t.padding);if(!t.display)return;const o=Na(e.rtl,this.left,this.width),c=this.ctx,h=t.position,d=s.size/2,f=a.top+d;let y,b=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),y=this.top+f,b=Ot(e.align,b,this.right-v);else{const S=this.columnSizes.reduce((w,T)=>Math.max(w,T.height),0);y=f+Ot(e.align,this.top,this.bottom-S-e.labels.padding-this._computeTitleHeight())}const _=Ot(h,b,b+v);c.textAlign=o.textAlign(If(h)),c.textBaseline="middle",c.strokeStyle=t.color,c.fillStyle=t.color,c.font=s.string,vo(c,t.text,_,y,s)}_computeTitleHeight(){const e=this.options.title,t=Mt(e.font),s=bn(e.padding);return e.display?t.lineHeight+s.height:0}_getLegendItemAt(e,t){let s,a,o;if(qi(e,this.left,this.right)&&qi(t,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(a=o[s],qi(e,a.left,a.left+a.width)&&qi(t,a.top,a.top+a.height))return this.legendItems[s]}return null}handleEvent(e){const t=this.options;if(!cR(e.type,t))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,o=aR(a,s);a&&!o&&Xe(t.onLeave,[e,a,this],this),this._hoveredItem=s,s&&!o&&Xe(t.onHover,[e,s,this],this)}else s&&Xe(t.onClick,[e,s,this],this)}}function rR(i,e,t,s,a){const o=oR(s,i,e,t),c=lR(a,s,e.lineHeight);return{itemWidth:o,itemHeight:c}}function oR(i,e,t,s){let a=i.text;return a&&typeof a!="string"&&(a=a.reduce((o,c)=>o.length>c.length?o:c)),e+t.size/2+s.measureText(a).width}function lR(i,e,t){let s=i;return typeof e.text!="string"&&(s=Tx(e,t)),s}function Tx(i,e){const t=i.text?i.text.length:0;return e*t}function cR(i,e){return!!((i==="mousemove"||i==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(i==="click"||i==="mouseup"))}var uR={id:"legend",_element:qv,start(i,e,t){const s=i.legend=new qv({ctx:i.ctx,options:t,chart:i});mn.configure(i,s,t),mn.addBox(i,s)},stop(i){mn.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,t){const s=i.legend;mn.configure(i,s,t),s.options=t},afterUpdate(i){const e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,t){const s=e.datasetIndex,a=t.chart;a.isDatasetVisible(s)?(a.hide(s),e.hidden=!0):(a.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const e=i.data.datasets,{labels:{usePointStyle:t,pointStyle:s,textAlign:a,color:o,useBorderRadius:c,borderRadius:h}}=i.legend.options;return i._getSortedDatasetMetas().map(d=>{const f=d.controller.getStyle(t?0:void 0),y=bn(f.borderWidth);return{text:e[d.index].label,fillStyle:f.backgroundColor,fontColor:o,hidden:!d.visible,lineCap:f.borderCapStyle,lineDash:f.borderDash,lineDashOffset:f.borderDashOffset,lineJoin:f.borderJoinStyle,lineWidth:(y.width+y.height)/4,strokeStyle:f.borderColor,pointStyle:s||f.pointStyle,rotation:f.rotation,textAlign:a||f.textAlign,borderRadius:c&&(h||f.borderRadius),datasetIndex:d.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Ex extends gi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const a=pt(s.text)?s.text.length:1;this._padding=bn(s.padding);const o=a*Mt(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:s,bottom:a,right:o,options:c}=this,h=c.align;let d=0,f,y,b;return this.isHorizontal()?(y=Ot(h,s,o),b=t+e,f=o-s):(c.position==="left"?(y=s+e,b=Ot(h,a,t),d=Fe*-.5):(y=o-e,b=Ot(h,t,a),d=Fe*.5),f=a-t),{titleX:y,titleY:b,maxWidth:f,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const s=Mt(t.font),o=s.lineHeight/2+this._padding.top,{titleX:c,titleY:h,maxWidth:d,rotation:f}=this._drawArgs(o);vo(e,t.text,0,0,s,{color:t.color,maxWidth:d,rotation:f,textAlign:If(t.align),textBaseline:"middle",translation:[c,h]})}}function hR(i,e){const t=new Ex({ctx:i.ctx,options:e,chart:i});mn.configure(i,t,e),mn.addBox(i,t),i.titleBlock=t}var dR={id:"title",_element:Ex,start(i,e,t){hR(i,t)},stop(i){const e=i.titleBlock;mn.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,t){const s=i.titleBlock;mn.configure(i,s,t),s.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const io={average(i){if(!i.length)return!1;let e,t,s=new Set,a=0,o=0;for(e=0,t=i.length;e<t;++e){const h=i[e].element;if(h&&h.hasValue()){const d=h.tooltipPosition();s.add(d.x),a+=d.y,++o}}return o===0||s.size===0?!1:{x:[...s].reduce((h,d)=>h+d)/s.size,y:a/o}},nearest(i,e){if(!i.length)return!1;let t=e.x,s=e.y,a=Number.POSITIVE_INFINITY,o,c,h;for(o=0,c=i.length;o<c;++o){const d=i[o].element;if(d&&d.hasValue()){const f=d.getCenterPoint(),y=hf(e,f);y<a&&(a=y,h=d)}}if(h){const d=h.tooltipPosition();t=d.x,s=d.y}return{x:t,y:s}}};function Ln(i,e){return e&&(pt(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function li(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function fR(i,e){const{element:t,datasetIndex:s,index:a}=e,o=i.getDatasetMeta(s).controller,{label:c,value:h}=o.getLabelAndValue(a);return{chart:i,label:c,parsed:o.getParsed(a),raw:i.data.datasets[s].data[a],formattedValue:h,dataset:o.getDataset(),dataIndex:a,datasetIndex:s,element:t}}function $v(i,e){const t=i.chart.ctx,{body:s,footer:a,title:o}=i,{boxWidth:c,boxHeight:h}=e,d=Mt(e.bodyFont),f=Mt(e.titleFont),y=Mt(e.footerFont),b=o.length,v=a.length,_=s.length,S=bn(e.padding);let w=S.height,T=0,C=s.reduce((D,N)=>D+N.before.length+N.lines.length+N.after.length,0);if(C+=i.beforeBody.length+i.afterBody.length,b&&(w+=b*f.lineHeight+(b-1)*e.titleSpacing+e.titleMarginBottom),C){const D=e.displayColors?Math.max(h,d.lineHeight):d.lineHeight;w+=_*D+(C-_)*d.lineHeight+(C-1)*e.bodySpacing}v&&(w+=e.footerMarginTop+v*y.lineHeight+(v-1)*e.footerSpacing);let A=0;const j=function(D){T=Math.max(T,t.measureText(D).width+A)};return t.save(),t.font=f.string,He(i.title,j),t.font=d.string,He(i.beforeBody.concat(i.afterBody),j),A=e.displayColors?c+2+e.boxPadding:0,He(s,D=>{He(D.before,j),He(D.lines,j),He(D.after,j)}),A=0,t.font=y.string,He(i.footer,j),t.restore(),T+=S.width,{width:T,height:w}}function gR(i,e){const{y:t,height:s}=e;return t<s/2?"top":t>i.height-s/2?"bottom":"center"}function pR(i,e,t,s){const{x:a,width:o}=s,c=t.caretSize+t.caretPadding;if(i==="left"&&a+o+c>e.width||i==="right"&&a-o-c<0)return!0}function mR(i,e,t,s){const{x:a,width:o}=t,{width:c,chartArea:{left:h,right:d}}=i;let f="center";return s==="center"?f=a<=(h+d)/2?"left":"right":a<=o/2?f="left":a>=c-o/2&&(f="right"),pR(f,i,e,t)&&(f="center"),f}function Vv(i,e,t){const s=t.yAlign||e.yAlign||gR(i,t);return{xAlign:t.xAlign||e.xAlign||mR(i,e,t,s),yAlign:s}}function yR(i,e){let{x:t,width:s}=i;return e==="right"?t-=s:e==="center"&&(t-=s/2),t}function bR(i,e,t){let{y:s,height:a}=i;return e==="top"?s+=t:e==="bottom"?s-=a+t:s-=a/2,s}function Gv(i,e,t,s){const{caretSize:a,caretPadding:o,cornerRadius:c}=i,{xAlign:h,yAlign:d}=t,f=a+o,{topLeft:y,topRight:b,bottomLeft:v,bottomRight:_}=Da(c);let S=yR(e,h);const w=bR(e,d,f);return d==="center"?h==="left"?S+=f:h==="right"&&(S-=f):h==="left"?S-=Math.max(y,v)+a:h==="right"&&(S+=Math.max(b,_)+a),{x:Rt(S,0,s.width-e.width),y:Rt(w,0,s.height-e.height)}}function fc(i,e,t){const s=bn(t.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-s.right:i.x+s.left}function Wv(i){return Ln([],li(i))}function vR(i,e,t){return Ps(i,{tooltip:e,tooltipItems:t,type:"tooltip"})}function Yv(i,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?i.override(t):i}const Cx={beforeTitle:ri,title(i){if(i.length>0){const e=i[0],t=e.chart.data.labels,s=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return t[e.dataIndex]}return""},afterTitle:ri,beforeBody:ri,beforeLabel:ri,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");const t=i.formattedValue;return ze(t)||(e+=t),e},labelColor(i){const t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ri,afterBody:ri,beforeFooter:ri,footer:ri,afterFooter:ri};function Ft(i,e,t,s){const a=i[e].call(t,s);return typeof a>"u"?Cx[e].call(t,s):a}class Kv extends gi{static positioners=io;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,s=this.options.setContext(this.getContext()),a=s.enabled&&t.options.animation&&s.animations,o=new cx(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=vR(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:s}=t,a=Ft(s,"beforeTitle",this,e),o=Ft(s,"title",this,e),c=Ft(s,"afterTitle",this,e);let h=[];return h=Ln(h,li(a)),h=Ln(h,li(o)),h=Ln(h,li(c)),h}getBeforeBody(e,t){return Wv(Ft(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:s}=t,a=[];return He(e,o=>{const c={before:[],lines:[],after:[]},h=Yv(s,o);Ln(c.before,li(Ft(h,"beforeLabel",this,o))),Ln(c.lines,Ft(h,"label",this,o)),Ln(c.after,li(Ft(h,"afterLabel",this,o))),a.push(c)}),a}getAfterBody(e,t){return Wv(Ft(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:s}=t,a=Ft(s,"beforeFooter",this,e),o=Ft(s,"footer",this,e),c=Ft(s,"afterFooter",this,e);let h=[];return h=Ln(h,li(a)),h=Ln(h,li(o)),h=Ln(h,li(c)),h}_createItems(e){const t=this._active,s=this.chart.data,a=[],o=[],c=[];let h=[],d,f;for(d=0,f=t.length;d<f;++d)h.push(fR(this.chart,t[d]));return e.filter&&(h=h.filter((y,b,v)=>e.filter(y,b,v,s))),e.itemSort&&(h=h.sort((y,b)=>e.itemSort(y,b,s))),He(h,y=>{const b=Yv(e.callbacks,y);a.push(Ft(b,"labelColor",this,y)),o.push(Ft(b,"labelPointStyle",this,y)),c.push(Ft(b,"labelTextColor",this,y))}),this.labelColors=a,this.labelPointStyles=o,this.labelTextColors=c,this.dataPoints=h,h}update(e,t){const s=this.options.setContext(this.getContext()),a=this._active;let o,c=[];if(!a.length)this.opacity!==0&&(o={opacity:0});else{const h=io[s.position].call(this,a,this._eventPosition);c=this._createItems(s),this.title=this.getTitle(c,s),this.beforeBody=this.getBeforeBody(c,s),this.body=this.getBody(c,s),this.afterBody=this.getAfterBody(c,s),this.footer=this.getFooter(c,s);const d=this._size=$v(this,s),f=Object.assign({},h,d),y=Vv(this.chart,s,f),b=Gv(s,f,y,this.chart);this.xAlign=y.xAlign,this.yAlign=y.yAlign,o={opacity:1,x:b.x,y:b.y,width:d.width,height:d.height,caretX:h.x,caretY:h.y}}this._tooltipItems=c,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,s,a){const o=this.getCaretPosition(e,s,a);t.lineTo(o.x1,o.y1),t.lineTo(o.x2,o.y2),t.lineTo(o.x3,o.y3)}getCaretPosition(e,t,s){const{xAlign:a,yAlign:o}=this,{caretSize:c,cornerRadius:h}=s,{topLeft:d,topRight:f,bottomLeft:y,bottomRight:b}=Da(h),{x:v,y:_}=e,{width:S,height:w}=t;let T,C,A,j,D,N;return o==="center"?(D=_+w/2,a==="left"?(T=v,C=T-c,j=D+c,N=D-c):(T=v+S,C=T+c,j=D-c,N=D+c),A=T):(a==="left"?C=v+Math.max(d,y)+c:a==="right"?C=v+S-Math.max(f,b)-c:C=this.caretX,o==="top"?(j=_,D=j-c,T=C-c,A=C+c):(j=_+w,D=j+c,T=C+c,A=C-c),N=j),{x1:T,x2:C,x3:A,y1:j,y2:D,y3:N}}drawTitle(e,t,s){const a=this.title,o=a.length;let c,h,d;if(o){const f=Na(s.rtl,this.x,this.width);for(e.x=fc(this,s.titleAlign,s),t.textAlign=f.textAlign(s.titleAlign),t.textBaseline="middle",c=Mt(s.titleFont),h=s.titleSpacing,t.fillStyle=s.titleColor,t.font=c.string,d=0;d<o;++d)t.fillText(a[d],f.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+h,d+1===o&&(e.y+=s.titleMarginBottom-h)}}_drawColorBox(e,t,s,a,o){const c=this.labelColors[s],h=this.labelPointStyles[s],{boxHeight:d,boxWidth:f}=o,y=Mt(o.bodyFont),b=fc(this,"left",o),v=a.x(b),_=d<y.lineHeight?(y.lineHeight-d)/2:0,S=t.y+_;if(o.usePointStyle){const w={radius:Math.min(f,d)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},T=a.leftForLtr(v,f)+f/2,C=S+d/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,ff(e,w,T,C),e.strokeStyle=c.borderColor,e.fillStyle=c.backgroundColor,ff(e,w,T,C)}else{e.lineWidth=Me(c.borderWidth)?Math.max(...Object.values(c.borderWidth)):c.borderWidth||1,e.strokeStyle=c.borderColor,e.setLineDash(c.borderDash||[]),e.lineDashOffset=c.borderDashOffset||0;const w=a.leftForLtr(v,f),T=a.leftForLtr(a.xPlus(v,1),f-2),C=Da(c.borderRadius);Object.values(C).some(A=>A!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Lc(e,{x:w,y:S,w:f,h:d,radius:C}),e.fill(),e.stroke(),e.fillStyle=c.backgroundColor,e.beginPath(),Lc(e,{x:T,y:S+1,w:f-2,h:d-2,radius:C}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(w,S,f,d),e.strokeRect(w,S,f,d),e.fillStyle=c.backgroundColor,e.fillRect(T,S+1,f-2,d-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,t,s){const{body:a}=this,{bodySpacing:o,bodyAlign:c,displayColors:h,boxHeight:d,boxWidth:f,boxPadding:y}=s,b=Mt(s.bodyFont);let v=b.lineHeight,_=0;const S=Na(s.rtl,this.x,this.width),w=function(U){t.fillText(U,S.x(e.x+_),e.y+v/2),e.y+=v+o},T=S.textAlign(c);let C,A,j,D,N,q,P;for(t.textAlign=c,t.textBaseline="middle",t.font=b.string,e.x=fc(this,T,s),t.fillStyle=s.bodyColor,He(this.beforeBody,w),_=h&&T!=="right"?c==="center"?f/2+y:f+2+y:0,D=0,q=a.length;D<q;++D){for(C=a[D],A=this.labelTextColors[D],t.fillStyle=A,He(C.before,w),j=C.lines,h&&j.length&&(this._drawColorBox(t,e,D,S,s),v=Math.max(b.lineHeight,d)),N=0,P=j.length;N<P;++N)w(j[N]),v=b.lineHeight;He(C.after,w)}_=0,v=b.lineHeight,He(this.afterBody,w),e.y-=o}drawFooter(e,t,s){const a=this.footer,o=a.length;let c,h;if(o){const d=Na(s.rtl,this.x,this.width);for(e.x=fc(this,s.footerAlign,s),e.y+=s.footerMarginTop,t.textAlign=d.textAlign(s.footerAlign),t.textBaseline="middle",c=Mt(s.footerFont),t.fillStyle=s.footerColor,t.font=c.string,h=0;h<o;++h)t.fillText(a[h],d.x(e.x),e.y+c.lineHeight/2),e.y+=c.lineHeight+s.footerSpacing}}drawBackground(e,t,s,a){const{xAlign:o,yAlign:c}=this,{x:h,y:d}=e,{width:f,height:y}=s,{topLeft:b,topRight:v,bottomLeft:_,bottomRight:S}=Da(a.cornerRadius);t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,t.lineWidth=a.borderWidth,t.beginPath(),t.moveTo(h+b,d),c==="top"&&this.drawCaret(e,t,s,a),t.lineTo(h+f-v,d),t.quadraticCurveTo(h+f,d,h+f,d+v),c==="center"&&o==="right"&&this.drawCaret(e,t,s,a),t.lineTo(h+f,d+y-S),t.quadraticCurveTo(h+f,d+y,h+f-S,d+y),c==="bottom"&&this.drawCaret(e,t,s,a),t.lineTo(h+_,d+y),t.quadraticCurveTo(h,d+y,h,d+y-_),c==="center"&&o==="left"&&this.drawCaret(e,t,s,a),t.lineTo(h,d+b),t.quadraticCurveTo(h,d,h+b,d),t.closePath(),t.fill(),a.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,s=this.$animations,a=s&&s.x,o=s&&s.y;if(a||o){const c=io[e.position].call(this,this._active,this._eventPosition);if(!c)return;const h=this._size=$v(this,e),d=Object.assign({},c,this._size),f=Vv(t,e,d),y=Gv(e,d,f,t);(a._to!==y.x||o._to!==y.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=h.width,this.height=h.height,this.caretX=c.x,this.caretY=c.y,this._resolveAnimations().update(this,y))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(t);const a={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const c=bn(t.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&h&&(e.save(),e.globalAlpha=s,this.drawBackground(o,e,a,t),rx(e,t.textDirection),o.y+=c.top,this.drawTitle(o,e,t),this.drawBody(o,e,t),this.drawFooter(o,e,t),ox(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const s=this._active,a=e.map(({datasetIndex:h,index:d})=>{const f=this.chart.getDatasetMeta(h);if(!f)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:f.data[d],index:d}}),o=!Dc(s,a),c=this._positionChanged(a,t);(o||c)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,s=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,o=this._active||[],c=this._getActiveElements(e,o,t,s),h=this._positionChanged(c,e),d=t||!Dc(c,o)||h;return d&&(this._active=c,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),d}_getActiveElements(e,t,s,a){const o=this.options;if(e.type==="mouseout")return[];if(!a)return t.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const c=this.chart.getElementsAtEventForMode(e,o.mode,o,s);return o.reverse&&c.reverse(),c}_positionChanged(e,t){const{caretX:s,caretY:a,options:o}=this,c=io[o.position].call(this,e,t);return c!==!1&&(s!==c.x||a!==c.y)}}var _R={id:"tooltip",_element:Kv,positioners:io,afterInit(i,e,t){t&&(i.tooltip=new Kv({chart:i,options:t}))},beforeUpdate(i,e,t){i.tooltip&&i.tooltip.initialize(t)},reset(i,e,t){i.tooltip&&i.tooltip.initialize(t)},afterDraw(i){const e=i.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",t)}},afterEvent(i,e){if(i.tooltip){const t=e.replay;i.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Cx},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const xR=(i,e,t,s)=>(typeof e=="string"?(t=i.push(e)-1,s.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function SR(i,e,t,s){const a=i.indexOf(e);if(a===-1)return xR(i,e,t,s);const o=i.lastIndexOf(e);return a!==o?t:a}const wR=(i,e)=>i===null?null:Rt(Math.round(i),0,e);function Xv(i){const e=this.getLabels();return i>=0&&i<e.length?e[i]:i}class TR extends Va{static id="category";static defaults={ticks:{callback:Xv}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const s=this.getLabels();for(const{index:a,label:o}of t)s[a]===o&&s.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ze(e))return null;const s=this.getLabels();return t=isFinite(t)&&s[t]===e?t:SR(s,e,Te(t,e),this._addedLabels),wR(t,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:s,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),t||(a=this.getLabels().length-1)),this.min=s,this.max=a}buildTicks(){const e=this.min,t=this.max,s=this.options.offset,a=[];let o=this.getLabels();o=e===0&&t===o.length-1?o:o.slice(e,t+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let c=e;c<=t;c++)a.push({value:c});return a}getLabelForValue(e){return Xv.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function ER(i,e){const t=[],{bounds:a,step:o,min:c,max:h,precision:d,count:f,maxTicks:y,maxDigits:b,includeBounds:v}=i,_=o||1,S=y-1,{min:w,max:T}=e,C=!ze(c),A=!ze(h),j=!ze(f),D=(T-w)/(b+1);let N=Qb((T-w)/S/_)*_,q,P,U,L;if(N<1e-14&&!C&&!A)return[{value:w},{value:T}];L=Math.ceil(T/N)-Math.floor(w/N),L>S&&(N=Qb(L*N/S/_)*_),ze(d)||(q=Math.pow(10,d),N=Math.ceil(N*q)/q),a==="ticks"?(P=Math.floor(w/N)*N,U=Math.ceil(T/N)*N):(P=w,U=T),C&&A&&o&&zj((h-c)/o,N/1e3)?(L=Math.round(Math.min((h-c)/N,y)),N=(h-c)/L,P=c,U=h):j?(P=C?c:P,U=A?h:U,L=f-1,N=(U-P)/L):(L=(U-P)/N,ro(L,Math.round(L),N/1e3)?L=Math.round(L):L=Math.ceil(L));const Z=Math.max(Jb(N),Jb(P));q=Math.pow(10,ze(d)?Z:d),P=Math.round(P*q)/q,U=Math.round(U*q)/q;let W=0;for(C&&(v&&P!==c?(t.push({value:c}),P<c&&W++,ro(Math.round((P+W*N)*q)/q,c,Qv(c,D,i))&&W++):P<c&&W++);W<L;++W){const B=Math.round((P+W*N)*q)/q;if(A&&B>h)break;t.push({value:B})}return A&&v&&U!==h?t.length&&ro(t[t.length-1].value,h,Qv(h,D,i))?t[t.length-1].value=h:t.push({value:h}):(!A||U===h)&&t.push({value:U}),t}function Qv(i,e,{horizontal:t,minRotation:s}){const a=ui(s),o=(t?Math.sin(a):Math.cos(a))||.001,c=.75*e*(""+i).length;return Math.min(e/o,c)}class CR extends Va{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ze(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:s}=this.getUserBounds();let{min:a,max:o}=this;const c=d=>a=t?a:d,h=d=>o=s?o:d;if(e){const d=Un(a),f=Un(o);d<0&&f<0?h(0):d>0&&f>0&&c(0)}if(a===o){let d=o===0?1:Math.abs(o*.05);h(o+d),e||c(a-d)}this.min=a,this.max=o}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:s}=e,a;return s?(a=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),t=t||11),t&&(a=Math.min(t,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const a={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,c=ER(a,o);return e.bounds==="ticks"&&Bj(c,this,"value"),e.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}configure(){const e=this.ticks;let t=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const a=(s-t)/Math.max(e.length-1,1)/2;t-=a,s+=a}this._startValue=t,this._endValue=s,this._valueRange=s-t}getLabelForValue(e){return $f(e,this.chart.options.locale,this.options.ticks.format)}}class jR extends CR{static id="linear";static defaults={ticks:{callback:J_.formatters.numeric}};determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=yn(e)?e:0,this.max=yn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,s=ui(this.options.ticks.minRotation),a=(e?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Zc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},$t=Object.keys(Zc);function Jv(i,e){return i-e}function Zv(i,e){if(ze(e))return null;const t=i._adapter,{parser:s,round:a,isoWeekday:o}=i._parseOpts;let c=e;return typeof s=="function"&&(c=s(c)),yn(c)||(c=typeof s=="string"?t.parse(c,s):t.parse(c)),c===null?null:(a&&(c=a==="week"&&(mo(o)||o===!0)?t.startOf(c,"isoWeek",o):t.startOf(c,a)),+c)}function e0(i,e,t,s){const a=$t.length;for(let o=$t.indexOf(i);o<a-1;++o){const c=Zc[$t[o]],h=c.steps?c.steps:Number.MAX_SAFE_INTEGER;if(c.common&&Math.ceil((t-e)/(h*c.size))<=s)return $t[o]}return $t[a-1]}function AR(i,e,t,s,a){for(let o=$t.length-1;o>=$t.indexOf(t);o--){const c=$t[o];if(Zc[c].common&&i._adapter.diff(a,s,c)>=e-1)return c}return $t[t?$t.indexOf(t):0]}function OR(i){for(let e=$t.indexOf(i)+1,t=$t.length;e<t;++e)if(Zc[$t[e]].common)return $t[e]}function t0(i,e,t){if(!t)i[e]=!0;else if(t.length){const{lo:s,hi:a}=Ff(t,e),o=t[s]>=e?t[s]:t[a];i[o]=!0}}function RR(i,e,t,s){const a=i._adapter,o=+a.startOf(e[0].value,s),c=e[e.length-1].value;let h,d;for(h=o;h<=c;h=+a.add(h,1,s))d=t[h],d>=0&&(e[d].major=!0);return e}function n0(i,e,t){const s=[],a={},o=e.length;let c,h;for(c=0;c<o;++c)h=e[c],a[h]=c,s.push({value:h,major:!1});return o===0||!t?s:RR(i,s,a,t)}class i0 extends Va{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const s=e.time||(e.time={}),a=this._adapter=new CA._date(e.adapters.date);a.init(t),ao(s.displayFormats,a.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Zv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,s=e.time.unit||"day";let{min:a,max:o,minDefined:c,maxDefined:h}=this.getUserBounds();function d(f){!c&&!isNaN(f.min)&&(a=Math.min(a,f.min)),!h&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!c||!h)&&(d(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&d(this.getMinMax(!1))),a=yn(a)&&!isNaN(a)?a:+t.startOf(Date.now(),s),o=yn(o)&&!isNaN(o)?o:+t.endOf(Date.now(),s)+1,this.min=Math.min(a,o-1),this.max=Math.max(a+1,o)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],s=e[e.length-1]),{min:t,max:s}}buildTicks(){const e=this.options,t=e.time,s=e.ticks,a=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const o=this.min,c=this.max,h=qj(a,o,c);return this._unit=t.unit||(s.autoSkip?e0(t.minUnit,this.min,this.max,this._getLabelCapacity(o)):AR(this,h.length,t.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:OR(this._unit),this.initOffsets(a),e.reverse&&h.reverse(),n0(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,s=0,a,o;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?t=1-a:t=(this.getDecimalForValue(e[1])-a)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?s=o:s=(o-this.getDecimalForValue(e[e.length-2]))/2);const c=e.length<3?.5:.25;t=Rt(t,0,c),s=Rt(s,0,c),this._offsets={start:t,end:s,factor:1/(t+1+s)}}_generate(){const e=this._adapter,t=this.min,s=this.max,a=this.options,o=a.time,c=o.unit||e0(o.minUnit,t,s,this._getLabelCapacity(t)),h=Te(a.ticks.stepSize,1),d=c==="week"?o.isoWeekday:!1,f=mo(d)||d===!0,y={};let b=t,v,_;if(f&&(b=+e.startOf(b,"isoWeek",d)),b=+e.startOf(b,f?"day":c),e.diff(s,t,c)>1e5*h)throw new Error(t+" and "+s+" are too far apart with stepSize of "+h+" "+c);const S=a.ticks.source==="data"&&this.getDataTimestamps();for(v=b,_=0;v<s;v=+e.add(v,h,c),_++)t0(y,v,S);return(v===s||a.bounds==="ticks"||_===1)&&t0(y,v,S),Object.keys(y).sort(Jv).map(w=>+w)}getLabelForValue(e){const t=this._adapter,s=this.options.time;return s.tooltipFormat?t.format(e,s.tooltipFormat):t.format(e,s.displayFormats.datetime)}format(e,t){const a=this.options.time.displayFormats,o=this._unit,c=t||a[o];return this._adapter.format(e,c)}_tickFormatFunction(e,t,s,a){const o=this.options,c=o.ticks.callback;if(c)return Xe(c,[e,t,s],this);const h=o.time.displayFormats,d=this._unit,f=this._majorUnit,y=d&&h[d],b=f&&h[f],v=s[t],_=f&&b&&v&&v.major;return this._adapter.format(e,a||(_?b:y))}generateTickLabels(e){let t,s,a;for(t=0,s=e.length;t<s;++t)a=e[t],a.label=this._tickFormatFunction(a.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+s)*t.factor)}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,s=this.ctx.measureText(e).width,a=ui(this.isHorizontal()?t.maxRotation:t.minRotation),o=Math.cos(a),c=Math.sin(a),h=this._resolveTickFontOptions(0).size;return{w:s*o+h*c,h:s*c+h*o}}_getLabelCapacity(e){const t=this.options.time,s=t.displayFormats,a=s[t.unit]||s.millisecond,o=this._tickFormatFunction(e,0,n0(this,[e],this._majorUnit),a),c=this._getLabelSize(o),h=Math.floor(this.isHorizontal()?this.width/c.w:this.height/c.h)-1;return h>0?h:1}getDataTimestamps(){let e=this._cache.data||[],t,s;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(t=0,s=a.length;t<s;++t)e=e.concat(a[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,s;if(e.length)return e;const a=this.getLabels();for(t=0,s=a.length;t<s;++t)e.push(Zv(this,a[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return K_(e.sort(Jv))}}function gc(i,e,t){let s=0,a=i.length-1,o,c,h,d;t?(e>=i[s].pos&&e<=i[a].pos&&({lo:s,hi:a}=Rs(i,"pos",e)),{pos:o,time:h}=i[s],{pos:c,time:d}=i[a]):(e>=i[s].time&&e<=i[a].time&&({lo:s,hi:a}=Rs(i,"time",e)),{time:o,pos:h}=i[s],{time:c,pos:d}=i[a]);const f=c-o;return f?h+(d-h)*(e-o)/f:h}class uk extends i0{static id="timeseries";static defaults=i0.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=gc(t,this.min),this._tableRange=gc(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:s}=this,a=[],o=[];let c,h,d,f,y;for(c=0,h=e.length;c<h;++c)f=e[c],f>=t&&f<=s&&a.push(f);if(a.length<2)return[{time:t,pos:0},{time:s,pos:1}];for(c=0,h=a.length;c<h;++c)y=a[c+1],d=a[c-1],f=a[c],Math.round((y+d)/2)!==f&&o.push({time:f,pos:c/(h-1)});return o}_generate(){const e=this.min,t=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(t)||s.length===1)&&s.push(t),s.sort((a,o)=>a-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),s=this.getLabelTimestamps();return t.length&&s.length?e=this.normalize(t.concat(s)):e=t.length?t:s,e=this._cache.all=e,e}getDecimalForValue(e){return(gc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,s=this.getDecimalForPixel(e)/t.factor-t.end;return gc(this._table,s*this._tableRange+this._minPos,!0)}}const jx="label";function s0(i,e){typeof i=="function"?i(e):i&&(i.current=e)}function MR(i,e){const t=i.options;t&&e&&Object.assign(t,e)}function Ax(i,e){i.labels=e}function Ox(i,e,t=jx){const s=[];i.datasets=e.map(a=>{const o=i.datasets.find(c=>c[t]===a[t]);return!o||!a.data||s.includes(o)?{...a}:(s.push(o),Object.assign(o,a),o)})}function kR(i,e=jx){const t={labels:[],datasets:[]};return Ax(t,i.labels),Ox(t,i.datasets,e),t}function DR(i,e){const{height:t=150,width:s=300,redraw:a=!1,datasetIdKey:o,type:c,data:h,options:d,plugins:f=[],fallbackContent:y,updateMode:b,...v}=i,_=k.useRef(null),S=k.useRef(null),w=()=>{_.current&&(S.current=new Jc(_.current,{type:c,data:kR(h,o),options:d&&{...d},plugins:f}),s0(e,S.current))},T=()=>{s0(e,null),S.current&&(S.current.destroy(),S.current=null)};return k.useEffect(()=>{!a&&S.current&&d&&MR(S.current,d)},[a,d]),k.useEffect(()=>{!a&&S.current&&Ax(S.current.config.data,h.labels)},[a,h.labels]),k.useEffect(()=>{!a&&S.current&&h.datasets&&Ox(S.current.config.data,h.datasets,o)},[a,h.datasets]),k.useEffect(()=>{S.current&&(a?(T(),setTimeout(w)):S.current.update(b))},[a,d,h.labels,h.datasets,b]),k.useEffect(()=>{S.current&&(T(),setTimeout(w))},[c]),k.useEffect(()=>(w(),()=>T()),[]),p.jsx("canvas",{ref:_,role:"img",height:t,width:s,...v,children:y})}const NR=k.forwardRef(DR);function eg(i,e){return Jc.register(e),k.forwardRef((t,s)=>p.jsx(NR,{...t,ref:s,type:i}))}const PR=eg("line",EA),a0=eg("bar",SA),LR=eg("doughnut",TA);class _s{static getDateFilter(e){const t=new Date;switch(e){case"7days":return new Date(t.getTime()-10080*60*1e3);case"30days":return new Date(t.getTime()-720*60*60*1e3);case"90days":return new Date(t.getTime()-2160*60*60*1e3);case"all":default:return null}}static async getSummary(e){const t=this.getDateFilter(e);let s=Le.from("invoices").select("total, status");t&&(s=s.gte("invoice_date",t.toISOString().split("T")[0]));const{data:a}=await s;let o=Le.from("invoice_items").select("qty, invoice_id");if(t){const{data:S}=await Le.from("invoices").select("id").gte("invoice_date",t.toISOString().split("T")[0]),w=S?.map(T=>T.id)||[];w.length>0&&(o=o.in("invoice_id",w))}const{data:c}=await o,h=a?.length||0,d=a?.reduce((S,w)=>S+Number(w.total||0),0)||0,f=h>0?d/h:0,y=c?.reduce((S,w)=>S+Number(w.qty||0),0)||0,b=a?.filter(S=>S.status==="draft").length||0,v=a?.filter(S=>S.status==="paid").length||0,_=a?.filter(S=>S.status==="sent").length||0;return{totalInvoices:h,totalRevenue:d,avgInvoiceValue:f,totalItemsSold:y,draftCount:b,paidCount:v,sentCount:_}}static async getTimeSeries(e){const t=this.getDateFilter(e);let s=Le.from("invoices").select("invoice_date, total").order("invoice_date",{ascending:!0});t&&(s=s.gte("invoice_date",t.toISOString().split("T")[0]));const{data:a}=await s;if(!a||a.length===0)return[];const o={};return a.forEach(c=>{const h=c.invoice_date;o[h]||(o[h]={invoiceCount:0,revenue:0}),o[h].invoiceCount+=1,o[h].revenue+=Number(c.total||0)}),Object.entries(o).map(([c,h])=>({period:c,invoiceCount:h.invoiceCount,revenue:h.revenue})).sort((c,h)=>c.period.localeCompare(h.period))}static async getCategoryData(e){const t=this.getDateFilter(e);let s=Le.from("invoice_items").select("category, qty, unit_price, invoice_id");if(t){const{data:c}=await Le.from("invoices").select("id").gte("invoice_date",t.toISOString().split("T")[0]),h=c?.map(d=>d.id)||[];if(h.length>0)s=s.in("invoice_id",h);else return[]}const{data:a}=await s;if(!a)return[];const o=a.reduce((c,h)=>{const d=h.category||"Other";return c[d]||(c[d]={category:d,itemCount:0,revenue:0}),c[d].itemCount+=Number(h.qty||0),c[d].revenue+=Number(h.qty||0)*Number(h.unit_price||0),c},{});return Object.values(o).sort((c,h)=>h.revenue-c.revenue).slice(0,5)}static async getMaterialBreakdown(e){const t=this.getDateFilter(e);let s=Le.from("item_materials").select("material_name, unit, total_qty, unit_cost, total_cost, invoice_item_id");if(t){const{data:c}=await Le.from("invoices").select("id").gte("invoice_date",t.toISOString().split("T")[0]);if(c&&c.length>0){const h=c.map(f=>f.id),{data:d}=await Le.from("invoice_items").select("id").in("invoice_id",h);if(d&&d.length>0){const f=d.map(y=>y.id);s=s.in("invoice_item_id",f)}else return[]}else return[]}const{data:a}=await s;if(!a)return[];const o=a.reduce((c,h)=>{const d=`${h.material_name}_${h.unit}`;return c[d]||(c[d]={material_name:h.material_name,unit:h.unit,total_qty:0,usage_count:0,unit_cost:Number(h.unit_cost)||0,total_cost:0}),c[d].total_qty+=Number(h.total_qty),c[d].total_cost+=Number(h.total_cost),c[d].usage_count+=1,c},{});return Object.values(o).sort((c,h)=>h.total_cost-c.total_cost).slice(0,10)}static async getMaterialsForInvoice(e){const{data:t}=await Le.from("invoice_items").select("id").eq("invoice_id",e);if(!t||t.length===0)return[];const s=t.map(c=>c.id),{data:a}=await Le.from("item_materials").select("material_name, unit, total_qty, unit_cost, total_cost, invoice_item_id").in("invoice_item_id",s);if(!a)return[];const o=a.reduce((c,h)=>{const d=`${h.material_name}_${h.unit}`;return c[d]||(c[d]={material_name:h.material_name,unit:h.unit,total_qty:0,usage_count:0,unit_cost:Number(h.unit_cost)||0,total_cost:0}),c[d].total_qty+=Number(h.total_qty),c[d].total_cost+=Number(h.total_cost),c[d].usage_count+=1,c},{});return Object.values(o).sort((c,h)=>h.total_cost-c.total_cost)}static async getTopClients(e){const t=this.getDateFilter(e);let s=Le.from("invoices").select("client_id, total, clients(name)");t&&(s=s.gte("invoice_date",t.toISOString().split("T")[0]));const{data:a}=await s;if(!a)return[];const o=a.reduce((c,h)=>{const f=h.clients?.name||"Unknown";return c[f]||(c[f]={client_name:f,invoice_count:0,total_revenue:0}),c[f].invoice_count+=1,c[f].total_revenue+=Number(h.total||0),c},{});return Object.values(o).sort((c,h)=>h.total_revenue-c.total_revenue).slice(0,5)}static async getMaterialBreakdownTotalsPerInvoice(e){const t=this.getDateFilter(e);let s=Le.from("invoices").select("id");t&&(s=s.gte("invoice_date",t.toISOString().split("T")[0]));const{data:a}=await s;if(!a||a.length===0)return new Map;const o=a.map(b=>b.id),{data:c}=await Le.from("invoice_items").select("id, invoice_id").in("invoice_id",o);if(!c||c.length===0)return new Map;const h=c.map(b=>b.id),{data:d}=await Le.from("item_materials").select("invoice_item_id, total_cost").in("invoice_item_id",h);if(!d||d.length===0)return new Map;const f=new Map;c.forEach(b=>{f.set(b.id,b.invoice_id)});const y=new Map;return d.forEach(b=>{const v=f.get(b.invoice_item_id);if(v){const _=y.get(v)||0;y.set(v,_+Number(b.total_cost||0))}}),y}}const zR={name:"Meduza Studio Works",logoUrl:"/Company%20Logo.svg",address:"Tolon, El Sayeda Zeinab, Cairo , Egypt",phone:"+20 1146700228 / +20 1018705558",email:"info@meduzafurniture.com"},Pa="EGP",ks="en-EG";class Hc{static getDateFilter(e){const t=new Date;switch(e){case"7days":return new Date(t.getTime()-10080*60*1e3);case"30days":return new Date(t.getTime()-720*60*60*1e3);case"90days":return new Date(t.getTime()-2160*60*60*1e3);case"all":default:return null}}static async getInvoices(e){const t=this.getDateFilter(e);let s=Le.from("invoices").select("id, invoice_no, project_name, invoice_date, total, status, clients(name)").order("invoice_date",{ascending:!1});t&&(s=s.gte("invoice_date",t.toISOString().split("T")[0]));const{data:a}=await s;return a?a.map(o=>({...o,clients:Array.isArray(o.clients)&&o.clients.length>0?o.clients[0]:null})):[]}static async updateInvoiceStatus(e,t){const{error:s}=await Le.from("invoices").update({status:t}).eq("id",e);return!s}static async createPreviewPayload(e){const t=await H_(e);if(!t.success||!t.data)return null;const{invoice:s,items:a}=t.data;return{company:zR,client:{name:s.clients?.name||"Client Name",company:s.clients?.company||"",address:s.clients?.address||"",phone:s.clients?.phone||"",email:s.clients?.email||"",siteAddress:s.clients?.site_address||""},meta:{invoiceNo:s.invoice_no||"",date:s.invoice_date||"",dueDate:s.due_date||"",projectName:s.project_name||""},items:a.map(o=>({id:o.id,category:o.category||"Custom furniture",code:o.code||"",description:o.description||"",dimensions:o.dimensions||"",qty:o.qty||1,unitPrice:Number(o.unit_price)||0,image:o.image_url||void 0,materials:(o.materials||[]).map(c=>({name:c.material_name,unit:c.unit,qty:c.qty_per_item}))})),vatRate:s.vat_rate||0,discount:s.discount||0,notes:s.notes||""}}static async openPreviewWindow(e){window.open(`/preview?standalone=true&invoiceId=${e}`,"_blank")}}const BR=i=>{const[e,t]=k.useState(!0),[s,a]=k.useState(null),[o,c]=k.useState([]),[h,d]=k.useState([]),[f,y]=k.useState([]),[b,v]=k.useState([]),[_,S]=k.useState([]),[w,T]=k.useState(new Map),C=async()=>{t(!0);try{const[q,P,U,L,Z,W]=await Promise.all([_s.getSummary(i),_s.getTimeSeries(i),_s.getCategoryData(i),_s.getMaterialBreakdown(i),_s.getTopClients(i),_s.getMaterialBreakdownTotalsPerInvoice(i)]);a(q),c(P),d(U),y(L),v(Z),T(W)}catch(q){console.error("Error loading analytics:",q)}finally{t(!1)}},A=async()=>{try{const q=await Hc.getInvoices(i);S(q)}catch(q){console.error("Error loading invoices:",q)}},j=async q=>{try{const P=await _s.getMaterialsForInvoice(q);y(P)}catch(P){console.error("Error loading materials for invoice:",P)}},D=(q,P)=>{S(U=>U.map(L=>L.id===q?{...L,status:P}:L))},N=async()=>{await Promise.all([C(),A()])};return k.useEffect(()=>{C(),A()},[i]),{loading:e,summary:s,timeSeries:o,categoryData:h,materialBreakdown:f,topClients:b,invoices:_,materialBreakdownTotals:w,loadMaterialsForInvoice:j,updateLocalInvoiceStatus:D,refetchData:N}},xs=({title:i,value:e,subtitle:t,color:s="#38bdf8"})=>p.jsxs("div",{style:{background:"linear-gradient(135deg, #1f2937 0%, #111827 100%)",borderRadius:12,padding:24,border:"1px solid #374151",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.3)"},children:[p.jsx("div",{style:{fontSize:13,color:"#9ca3af",marginBottom:8},children:i}),p.jsx("div",{style:{fontSize:28,fontWeight:700,color:s,marginBottom:4},children:e}),t&&p.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:t})]}),ja=({title:i,children:e,style:t})=>p.jsxs("div",{style:{background:"linear-gradient(135deg, #1f2937 0%, #111827 100%)",borderRadius:12,padding:24,border:"1px solid #374151",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.3)",...t},children:[p.jsx("h3",{style:{margin:0,marginBottom:16,color:"#e5e7eb",fontSize:18,fontWeight:600},children:i}),e]}),UR=({value:i,onChange:e})=>{const t=[{value:"7days",label:"Last 7 Days"},{value:"30days",label:"Last 30 Days"},{value:"90days",label:"Last 90 Days"},{value:"all",label:"All Time"}];return p.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:t.map(s=>p.jsx("button",{onClick:()=>e(s.value),style:{padding:"8px 16px",borderRadius:6,border:i===s.value?"1px solid #38bdf8":"1px solid #374151",background:i===s.value?"#1e3a4f":"#1f2937",color:i===s.value?"#38bdf8":"#9ca3af",fontSize:13,fontWeight:500,cursor:"pointer",transition:"all 0.2s"},children:s.label},s.value))})},Fc=i=>{const e=String(i??"");return e.includes('"')||e.includes(",")||e.includes(`
`)?`"${e.replace(/"/g,'""')}"`:e},Rx=(i,e)=>{const t=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.setAttribute("download",i),document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)},HR=({materials:i,invoices:e,selectedInvoiceId:t,onInvoiceSelect:s})=>{const a=i.reduce((h,d)=>h+d.total_cost,0),o=e.find(h=>h.id===t),c=()=>{if(i.length===0)return;const h=[],d=o?`${o.invoice_no} - ${o.project_name}`:"All Invoices";h.push(`Material Breakdown - ${d}`),h.push(""),h.push(["Material","Total Quantity","Unit","Unit Cost","Total Cost","Used In"].map(Fc).join(",")),i.forEach(b=>{h.push([b.material_name,b.total_qty.toFixed(2),b.unit,b.unit_cost.toFixed(2),b.total_cost.toFixed(2),`${b.usage_count} items`].map(Fc).join(","))}),h.push(""),h.push(["TOTAL","","","",a.toFixed(2),""].join(","));const f=h.join(`
`),y=`material-breakdown-${o?.invoice_no||"all"}.csv`;Rx(y,f)};return p.jsxs("div",{style:{padding:"16px 0"},children:[p.jsxs("div",{style:{marginBottom:16,display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[p.jsx("label",{style:{color:"#9ca3af",fontSize:14},children:"Select Invoice:"}),p.jsxs("select",{value:t,onChange:h=>s(h.target.value),style:{padding:"8px 12px",background:"#1f2937",border:"1px solid #374151",borderRadius:6,color:"#e5e7eb",fontSize:14,minWidth:300},children:[p.jsx("option",{value:"",children:"-- Select an invoice --"}),e.map(h=>p.jsxs("option",{value:h.id,children:[h.invoice_no," - ",h.project_name," (",new Date(h.invoice_date).toLocaleDateString(),")"]},h.id))]}),t&&p.jsx("button",{onClick:()=>s(""),style:{padding:"6px 12px",background:"#374151",border:"none",borderRadius:6,color:"#e5e7eb",fontSize:13,cursor:"pointer"},children:"Clear"}),i.length>0&&p.jsxs("button",{onClick:c,style:{marginLeft:"auto",padding:"8px 16px",background:"linear-gradient(135deg, #065f46 0%, #047857 100%)",border:"none",borderRadius:6,color:"#fff",fontSize:13,fontWeight:500,cursor:"pointer",display:"flex",alignItems:"center",gap:6},children:[p.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export"]})]}),i.length>0?p.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[p.jsx("thead",{children:p.jsxs("tr",{style:{borderBottom:"1px solid #374151"},children:[p.jsx("th",{style:{textAlign:"left",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Material"}),p.jsx("th",{style:{textAlign:"right",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Total Quantity"}),p.jsx("th",{style:{textAlign:"right",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Unit"}),p.jsx("th",{style:{textAlign:"right",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Unit Cost"}),p.jsx("th",{style:{textAlign:"right",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Total Cost"}),p.jsx("th",{style:{textAlign:"right",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Used In"})]})}),p.jsx("tbody",{children:i.map((h,d)=>p.jsxs("tr",{style:{borderBottom:"1px solid #1f2937"},children:[p.jsx("td",{style:{padding:"12px 0",color:"#e5e7eb",fontSize:14},children:h.material_name}),p.jsx("td",{style:{padding:"12px 0",color:"#e5e7eb",fontSize:14,textAlign:"right"},children:h.total_qty.toFixed(2)}),p.jsx("td",{style:{padding:"12px 0",color:"#e5e7eb",fontSize:14,textAlign:"right"},children:h.unit}),p.jsx("td",{style:{padding:"12px 0",color:"#e5e7eb",fontSize:14,textAlign:"right"},children:h.unit_cost.toLocaleString(ks,{style:"currency",currency:Pa,minimumFractionDigits:0})}),p.jsx("td",{style:{padding:"12px 0",color:"#38bdf8",fontSize:14,textAlign:"right",fontWeight:500},children:h.total_cost.toLocaleString(ks,{style:"currency",currency:Pa,minimumFractionDigits:0})}),p.jsxs("td",{style:{padding:"12px 0",color:"#e5e7eb",fontSize:14,textAlign:"right"},children:[h.usage_count," items"]})]},d))}),p.jsx("tfoot",{children:p.jsxs("tr",{style:{borderTop:"2px solid #374151",background:"rgba(6, 95, 70, 0.15)"},children:[p.jsx("td",{style:{padding:"14px 0",color:"#e5e7eb",fontSize:15,fontWeight:700},children:"TOTAL"}),p.jsx("td",{style:{padding:"14px 0"}}),p.jsx("td",{style:{padding:"14px 0"}}),p.jsx("td",{style:{padding:"14px 0"}}),p.jsx("td",{style:{padding:"14px 0",color:"#34d399",fontSize:16,textAlign:"right",fontWeight:700},children:a.toLocaleString(ks,{style:"currency",currency:Pa,minimumFractionDigits:0})}),p.jsx("td",{style:{padding:"14px 0"}})]})})]}):p.jsx("div",{style:{textAlign:"center",padding:"40px 0",color:"#6b7280"},children:t?"No materials found for this invoice":"Please select an invoice to view material breakdown"})]})},FR=({invoices:i,materialBreakdownTotals:e,onStatusChange:t,onViewInvoice:s,onPreviewInvoice:a})=>{const[o,c]=k.useState(new Set),[h,d]=k.useState(""),[f,y]=k.useState(""),[b,v]=k.useState(""),_=k.useMemo(()=>i.filter(j=>{const D=!h||j.invoice_no.toLowerCase().includes(h.toLowerCase())||j.clients?.name?.toLowerCase().includes(h.toLowerCase())||j.project_name?.toLowerCase().includes(h.toLowerCase()),N=!f||j.invoice_date>=f,q=!b||j.invoice_date<=b;return D&&N&&q}),[i,h,f,b]),S=j=>{c(j?new Set(_.map(D=>D.id)):new Set)},w=(j,D)=>{const N=new Set(o);D?N.add(j):N.delete(j),c(N)},T=()=>{const j=o.size>0?i.filter(P=>o.has(P.id)):_;if(j.length===0){alert("No invoices to export");return}const D=[];D.push(["Invoice No.","Invoice Date","Customer Name","Due Date","Material Breakdown Total","Selling Price (Invoice Total)","Margin","Status","Order Class"].map(Fc).join(",")),j.forEach(P=>{const U=e.get(P.id)||0,L=Number(P.total),Z=L-U;D.push([P.invoice_no,P.invoice_date,P.clients?.name||"",P.due_date||"",U.toFixed(2),L.toFixed(2),Z.toFixed(2),P.status,P.order_class||"B2B"].map(Fc).join(","))});const N=D.join(`\r
`),q=o.size>0?`invoices-selected-${new Date().toISOString().split("T")[0]}.csv`:`invoices-all-${new Date().toISOString().split("T")[0]}.csv`;Rx(q,N)},C=_.length>0&&_.every(j=>o.has(j.id)),A=_.some(j=>o.has(j.id));return p.jsxs("div",{children:[p.jsxs("div",{style:{marginBottom:16,display:"flex",gap:12,flexWrap:"wrap",alignItems:"flex-end"},children:[p.jsxs("div",{style:{flex:1,minWidth:200},children:[p.jsx("label",{style:{display:"block",color:"#9ca3af",fontSize:12,marginBottom:4},children:"Search (Invoice No., Customer, Project)"}),p.jsx("input",{type:"text",placeholder:"Search...",value:h,onChange:j=>d(j.target.value),style:{width:"100%",padding:"8px 12px",background:"#1f2937",border:"1px solid #374151",borderRadius:6,color:"#e5e7eb",fontSize:14}})]}),p.jsxs("div",{children:[p.jsx("label",{style:{display:"block",color:"#9ca3af",fontSize:12,marginBottom:4},children:"Date From"}),p.jsx("input",{type:"date",value:f,onChange:j=>y(j.target.value),style:{padding:"8px 12px",background:"#1f2937",border:"1px solid #374151",borderRadius:6,color:"#e5e7eb",fontSize:14}})]}),p.jsxs("div",{children:[p.jsx("label",{style:{display:"block",color:"#9ca3af",fontSize:12,marginBottom:4},children:"Date To"}),p.jsx("input",{type:"date",value:b,onChange:j=>v(j.target.value),style:{padding:"8px 12px",background:"#1f2937",border:"1px solid #374151",borderRadius:6,color:"#e5e7eb",fontSize:14}})]}),(h||f||b)&&p.jsx("button",{onClick:()=>{d(""),y(""),v("")},style:{padding:"8px 16px",background:"#374151",border:"none",borderRadius:6,color:"#e5e7eb",fontSize:13,cursor:"pointer"},children:"Clear Filters"}),p.jsxs("button",{onClick:T,disabled:_.length===0,style:{marginLeft:"auto",padding:"8px 16px",background:_.length===0?"#374151":"linear-gradient(135deg, #065f46 0%, #047857 100%)",border:"none",borderRadius:6,color:"#fff",fontSize:13,fontWeight:500,cursor:_.length===0?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:6},children:[p.jsx("svg",{width:"16",height:"16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export ",o.size>0?`(${o.size})`:"All"]})]}),o.size>0&&p.jsxs("div",{style:{marginBottom:12,padding:"8px 12px",background:"rgba(56, 189, 248, 0.1)",border:"1px solid rgba(56, 189, 248, 0.3)",borderRadius:6,color:"#38bdf8",fontSize:13,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsxs("span",{children:[o.size," invoice(s) selected"]}),p.jsx("button",{onClick:()=>c(new Set),style:{padding:"4px 12px",background:"transparent",border:"1px solid #38bdf8",borderRadius:4,color:"#38bdf8",fontSize:12,cursor:"pointer"},children:"Clear Selection"})]}),p.jsx("div",{style:{padding:"16px 0",maxHeight:500,overflowY:"auto"},children:p.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[p.jsx("thead",{children:p.jsxs("tr",{style:{borderBottom:"1px solid #374151"},children:[p.jsx("th",{style:{textAlign:"left",padding:"8px",color:"#9ca3af",fontSize:12,width:40},children:p.jsx("input",{type:"checkbox",checked:C,ref:j=>{j&&(j.indeterminate=A&&!C)},onChange:j=>S(j.target.checked),style:{cursor:"pointer"}})}),p.jsx("th",{style:{textAlign:"left",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Invoice No"}),p.jsx("th",{style:{textAlign:"left",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Project"}),p.jsx("th",{style:{textAlign:"left",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Client"}),p.jsx("th",{style:{textAlign:"right",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Date"}),p.jsx("th",{style:{textAlign:"right",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Total"}),p.jsx("th",{style:{textAlign:"center",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Status"}),p.jsx("th",{style:{textAlign:"center",padding:"8px 0",color:"#9ca3af",fontSize:12},children:"Actions"})]})}),p.jsx("tbody",{children:_.length===0?p.jsx("tr",{children:p.jsx("td",{colSpan:8,style:{padding:40,textAlign:"center",color:"#6b7280"},children:i.length===0?"No invoices found":"No matching invoices"})}):_.map(j=>p.jsxs("tr",{style:{borderBottom:"1px solid #1f2937"},children:[p.jsx("td",{style:{padding:"12px 8px"},children:p.jsx("input",{type:"checkbox",checked:o.has(j.id),onChange:D=>w(j.id,D.target.checked),style:{cursor:"pointer"}})}),p.jsx("td",{style:{padding:"12px 0",color:"#e5e7eb",fontSize:14},children:j.invoice_no}),p.jsx("td",{style:{padding:"12px 0",color:"#e5e7eb",fontSize:14},children:j.project_name||"-"}),p.jsx("td",{style:{padding:"12px 0",color:"#e5e7eb",fontSize:14},children:j.clients?.name||"-"}),p.jsx("td",{style:{padding:"12px 0",color:"#e5e7eb",fontSize:14,textAlign:"right"},children:j.invoice_date}),p.jsx("td",{style:{padding:"12px 0",color:"#e5e7eb",fontSize:14,textAlign:"right"},children:Number(j.total).toLocaleString(ks,{style:"currency",currency:Pa,minimumFractionDigits:0})}),p.jsx("td",{style:{padding:"12px 0",textAlign:"center"},children:p.jsxs("select",{value:j.status,onChange:D=>t(j.id,D.target.value),style:{padding:"4px 8px",borderRadius:4,fontSize:11,fontWeight:500,background:j.status==="paid"?"#065f46":j.status==="sent"?"#1e40af":"#374151",color:"#e5e7eb",border:"1px solid #374151",cursor:"pointer"},children:[p.jsx("option",{value:"draft",style:{background:"#020617",color:"#e5e7eb"},children:"draft"}),p.jsx("option",{value:"sent",style:{background:"#020617",color:"#e5e7eb"},children:"sent"}),p.jsx("option",{value:"paid",style:{background:"#020617",color:"#e5e7eb"},children:"paid"}),p.jsx("option",{value:"cancelled",style:{background:"#020617",color:"#e5e7eb"},children:"cancelled"})]})}),p.jsx("td",{style:{padding:"12px 0",textAlign:"center"},children:p.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"center"},children:[p.jsx("button",{onClick:()=>s(j.id),style:{padding:"6px 12px",borderRadius:6,border:"1px solid #38bdf8",background:"transparent",color:"#38bdf8",fontSize:12,fontWeight:500,cursor:"pointer"},children:"View Details"}),p.jsx("button",{onClick:()=>a(j.id),style:{padding:"6px 12px",borderRadius:6,border:"1px solid #34d399",background:"transparent",color:"#34d399",fontSize:12,fontWeight:500,cursor:"pointer"},children:"Preview"})]})})]},j.id))})]})})]})},r0=i=>i.toLocaleString(ks,{style:"currency",currency:Pa,minimumFractionDigits:0}),Qr=(i,e=0)=>i.toLocaleString(ks,{minimumFractionDigits:e,maximumFractionDigits:e});Jc.register(TR,jR,JO,QO,sR,FO,dR,_R,uR);const IR=()=>{const i=Lf(),[e,t]=k.useState("30days"),[s,a]=k.useState(""),{loading:o,summary:c,timeSeries:h,categoryData:d,materialBreakdown:f,topClients:y,invoices:b,materialBreakdownTotals:v,loadMaterialsForInvoice:_,updateLocalInvoiceStatus:S,refetchData:w}=BR(e);k.useEffect(()=>{s&&_(s)},[s]);const T=async(U,L)=>{S(U,L),await Hc.updateInvoiceStatus(U,L)?(i.success("Status Updated",`Invoice status changed to "${L}".`),w()):(i.error("Update Failed","Failed to update invoice status."),w())},C=U=>{window.location.href=`/invoice/${U}`},A=async U=>{await Hc.openPreviewWindow(U)};if(o)return p.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #020617 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#e5e7eb"},children:"Loading dashboard..."});const j={labels:h.map(U=>U.period),datasets:[{label:"Revenue",data:h.map(U=>U.revenue),borderColor:"#38bdf8",backgroundColor:"rgba(56, 189, 248, 0.1)",tension:.4}]},D={labels:h.map(U=>U.period),datasets:[{label:"Invoice Count",data:h.map(U=>U.invoiceCount),backgroundColor:"#38bdf8"}]},N={labels:d.map(U=>U.category),datasets:[{data:d.map(U=>U.revenue),backgroundColor:["#38bdf8","#34d399","#fbbf24","#f87171","#a78bfa"]}]},q={labels:y.map(U=>U.client_name),datasets:[{label:"Revenue",data:y.map(U=>U.total_revenue),backgroundColor:"#34d399"}]},P={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#e5e7eb"}}},scales:{x:{ticks:{color:"#9ca3af"},grid:{color:"#1f2937"}},y:{ticks:{color:"#9ca3af"},grid:{color:"#1f2937"}}}};return p.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #020617 100%)",padding:"40px 20px"},children:[p.jsx(Pf,{toasts:i.toasts,onClose:i.removeToast}),p.jsxs("div",{style:{maxWidth:1400,margin:"0 auto"},children:[p.jsxs("div",{style:{marginBottom:32,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16},children:[p.jsx("h1",{style:{margin:0,color:"#e5e7eb",fontSize:32,fontWeight:700},children:"Dashboard Analytics"}),p.jsx(UR,{value:e,onChange:t})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:16,marginBottom:24},children:[p.jsx(xs,{title:"Total Revenue",value:r0(c?.totalRevenue||0),color:"#38bdf8"}),p.jsx(xs,{title:"Total Invoices",value:Qr(c?.totalInvoices||0),color:"#34d399"}),p.jsx(xs,{title:"Average Invoice",value:r0(c?.avgInvoiceValue||0),color:"#fbbf24"}),p.jsx(xs,{title:"Items Sold",value:Qr(c?.totalItemsSold||0),color:"#f87171"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16,marginBottom:24},children:[p.jsx(xs,{title:"Draft Invoices",value:Qr(c?.draftCount||0),subtitle:"Pending",color:"#9ca3af"}),p.jsx(xs,{title:"Sent Invoices",value:Qr(c?.sentCount||0),subtitle:"Awaiting payment",color:"#60a5fa"}),p.jsx(xs,{title:"Paid Invoices",value:Qr(c?.paidCount||0),subtitle:"Completed",color:"#34d399"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(450px, 1fr))",gap:16,marginBottom:16},children:[p.jsx(ja,{title:"Revenue Over Time",children:p.jsx("div",{style:{height:300},children:p.jsx(PR,{data:j,options:P})})}),p.jsx(ja,{title:"Invoice Count",children:p.jsx("div",{style:{height:300},children:p.jsx(a0,{data:D,options:P})})})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(450px, 1fr))",gap:16,marginBottom:16},children:[p.jsx(ja,{title:"Revenue by Category",children:p.jsx("div",{style:{height:300,display:"flex",justifyContent:"center"},children:p.jsx(LR,{data:N,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#e5e7eb"}}}}})})}),p.jsx(ja,{title:"Top 5 Clients",children:p.jsx("div",{style:{height:300},children:p.jsx(a0,{data:q,options:P})})})]}),p.jsx(ja,{title:"Material Breakdown (Detailed)",style:{marginTop:16},children:p.jsx(HR,{materials:f,invoices:b,selectedInvoiceId:s,onInvoiceSelect:a})}),p.jsx(ja,{title:"All Invoices",style:{marginTop:16},children:p.jsx(FR,{invoices:b,materialBreakdownTotals:v,onStatusChange:T,onViewInvoice:C,onPreviewInvoice:A})})]})]})},qR={name:"",logoUrl:"/Company%20Logo.svg",address:"",phone:"",email:""},$R={name:"",company:"",address:"",phone:"",email:"",siteAddress:""},VR={invoiceNo:"",date:"",dueDate:"",projectName:"",orderClass:"B2B"},GR=()=>{const[i]=jT(),e=i.get("invoiceId"),[t,s]=k.useState({company:qR,client:$R,meta:VR,items:[],vatRate:0,discount:0,notes:""});k.useEffect(()=>{const U=async()=>{if(!e)return!1;try{const Z=await Hc.createPreviewPayload(e);if(Z)return s(Z),!0}catch(Z){console.error("Failed to load invoice from database:",Z)}return!1},L=()=>{try{const Z=localStorage.getItem("invoice-draft"),B=localStorage.getItem("invoice-preview")||Z;if(!B)return;const G=JSON.parse(B);s(G)}catch(Z){console.error("Failed to load invoice data from localStorage",Z)}};if(e)U();else{L();const Z=setInterval(L,500);return()=>clearInterval(Z)}},[e]);const{company:a,client:o,meta:c,items:h,vatRate:d,discount:f,notes:y}=t,b=h.reduce((U,L)=>U+L.qty*L.unitPrice,0),v=Math.max(b-f,0),_=v*d/100,S=v+_,w=()=>{window.print()},T=()=>{window.print()},C=U=>{const L=String(U??"");return L.includes('"')||L.includes(",")||L.includes(`
`)?`"${L.replace(/"/g,'""')}"`:L},A=(U,L)=>{const Z=new Blob([L],{type:"text/csv;charset=utf-8;"}),W=URL.createObjectURL(Z),B=document.createElement("a");B.href=W,B.setAttribute("download",U),document.body.appendChild(B),B.click(),B.remove(),URL.revokeObjectURL(W)},j=()=>{if(!h.some(B=>B.materials&&B.materials.length>0)){alert("No material breakdown found on items.");return}const L=[];L.push(["Invoice No","Project","Client","Item #","Item Name","Category","Material","Unit","Qty per Item","Item Qty","Total Material Qty"].map(C).join(",")),h.forEach((B,G)=>{!B.materials||B.materials.length===0||B.materials.forEach(ae=>{const re=ae.qty*B.qty;L.push([c.invoiceNo||"",c.projectName||"",o.name||"",G+1,B.code||"Item",B.category,ae.name,ae.unit,ae.qty,B.qty,re].map(C).join(","))})});const Z=L.join(`\r
`),W=c.invoiceNo?`${c.invoiceNo}_materials.csv`:"invoice-materials.csv";A(W,Z)},D=f>0,N=d>0&&_>0,q=D||N,P=D||N;return p.jsxs("div",{className:"invoice-preview-root",children:[p.jsxs("div",{className:"invoice-toolbar no-print",children:[p.jsx("button",{className:"btn-outline",onClick:w,children:"Print Invoice"}),p.jsx("button",{className:"btn-outline",onClick:T,children:"Export PDF"}),p.jsx("button",{className:"btn-outline",onClick:j,children:"Export Excel"})]}),p.jsxs("div",{className:"invoice-page",children:[p.jsxs("header",{className:"invoice-header",children:[p.jsxs("div",{className:"header-left",children:[a.logoUrl&&p.jsx("img",{src:a.logoUrl,alt:"Company logo",className:"company-logo"}),p.jsxs("div",{children:[p.jsx("div",{className:"company-name",children:a.name||"Company Name"}),p.jsx("div",{className:"small-text",children:a.address&&p.jsx("span",{children:a.address})}),p.jsxs("div",{className:"small-text",children:[a.phone&&p.jsx("span",{children:a.phone}),a.phone&&a.email&&"  ",a.email&&p.jsx("span",{className:"email-line",children:a.email})]})]})]}),p.jsxs("div",{className:"header-right",children:[p.jsxs("div",{className:"invoice-meta-block",children:[p.jsx("div",{className:"invoice-title",children:"INVOICE"}),p.jsxs("div",{className:"small-text",children:[p.jsx("strong",{children:"Invoice No:"})," ",c.invoiceNo||"-"]}),p.jsxs("div",{className:"small-text",children:[p.jsx("strong",{children:"Date:"})," ",c.date||"-"]}),p.jsxs("div",{className:"small-text",children:[p.jsx("strong",{children:"Project:"})," ",c.projectName||"-"]})]}),p.jsxs("div",{className:"client-block",children:[p.jsx("div",{className:"section-label",children:"BILL TO"}),p.jsx("div",{className:"small-text bold",children:o.name||"Client Name"}),o.address&&p.jsx("div",{className:"small-text",children:o.address}),(o.phone||o.email)&&p.jsxs("div",{className:"small-text",children:[o.phone&&p.jsxs("span",{children:["Tel: ",o.phone]}),o.phone&&o.email&&"  ",o.email&&p.jsx("span",{children:o.email})]}),o.siteAddress&&p.jsxs("div",{className:"small-text",style:{marginTop:4},children:[p.jsx("span",{style:{fontWeight:600,fontSize:10},children:"Site / Delivery:"})," ",o.siteAddress]})]})]})]}),p.jsx("section",{className:"invoice-items",children:p.jsxs("table",{className:"items-table",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{className:"col-index",children:"#"}),p.jsx("th",{className:"col-item",children:"Item"}),p.jsx("th",{className:"col-material",children:"Material / Finish"}),p.jsx("th",{className:"col-dimensions",children:"Dimensions"}),p.jsx("th",{className:"col-photo",children:"Photo"}),p.jsx("th",{className:"col-qty",children:"Qty"}),p.jsx("th",{className:"col-unit",children:"Unit"}),p.jsx("th",{className:"col-total",children:"Total"})]})}),p.jsxs("tbody",{children:[h.length===0&&p.jsx("tr",{children:p.jsx("td",{colSpan:8,style:{textAlign:"center",padding:24},children:"No items."})}),h.map((U,L)=>{const Z=U.qty*U.unitPrice;return p.jsxs("tr",{children:[p.jsx("td",{className:"col-index",children:L+1}),p.jsx("td",{className:"col-item",children:p.jsx("div",{className:"item-name",children:U.code||"Item"})}),p.jsx("td",{className:"col-material",children:p.jsx("div",{className:"small-text",children:U.description||"-"})}),p.jsx("td",{className:"col-dimensions",children:p.jsx("div",{className:"small-text",children:U.dimensions||"-"})}),p.jsx("td",{className:"col-photo",children:U.image?p.jsx("img",{src:U.image,alt:"Item",className:"table-photo"}):"-"}),p.jsx("td",{className:"col-qty",children:U.qty}),p.jsx("td",{className:"col-unit",children:U.unitPrice.toLocaleString("en-EG",{style:"currency",currency:"EGP",minimumFractionDigits:2})}),p.jsx("td",{className:"col-total",children:Z.toLocaleString("en-EG",{style:"currency",currency:"EGP",minimumFractionDigits:2})})]},U.id??L)})]})]})}),p.jsx("section",{className:"invoice-totals",children:p.jsxs("div",{className:"totals-box",children:[q&&p.jsxs("div",{className:"totals-row",children:[p.jsx("span",{children:"Subtotal"}),p.jsx("span",{children:b.toLocaleString("en-EG",{style:"currency",currency:"EGP",minimumFractionDigits:2})})]}),D&&p.jsxs("div",{className:"totals-row",children:[p.jsx("span",{children:"Discount"}),p.jsx("span",{children:f.toLocaleString("en-EG",{style:"currency",currency:"EGP",minimumFractionDigits:2})})]}),P&&p.jsxs("div",{className:"totals-row",children:[p.jsx("span",{children:"Taxable Amount"}),p.jsx("span",{children:v.toLocaleString("en-EG",{style:"currency",currency:"EGP",minimumFractionDigits:2})})]}),N&&p.jsxs("div",{className:"totals-row",children:[p.jsxs("span",{children:["VAT (",d,"%)"]}),p.jsx("span",{children:_.toLocaleString("en-EG",{style:"currency",currency:"EGP",minimumFractionDigits:2})})]}),p.jsxs("div",{className:"totals-row totals-row-strong",children:[p.jsx("span",{children:"Grand Total"}),p.jsx("span",{children:S.toLocaleString("en-EG",{style:"currency",currency:"EGP",minimumFractionDigits:2})})]})]})}),p.jsxs("section",{className:"invoice-notes",children:[p.jsx("div",{className:"section-label",children:"NOTES / TERMS"}),p.jsx("pre",{className:"notes-text",children:y})]}),p.jsxs("section",{className:"invoice-footer",children:[p.jsx("div",{className:"footer-line",children:"Prepared By: ______________________"}),p.jsx("div",{className:"footer-line",children:"Approved By: ______________________"}),p.jsx("div",{className:"thankyou",children:"Thank you for your business."})]})]})]})},WR=()=>{const{id:i}=z1(),e=qc(),t=Lf(),[s,a]=k.useState(!0),[o,c]=k.useState(null),[h,d]=k.useState(!1);if(k.useEffect(()=>{(async()=>{if(!i){e("/dashboard");return}const _=await H_(i);_.success&&_.data?c(_.data):(d(!0),t.error("Load Failed","Failed to load invoice details."),setTimeout(()=>e("/dashboard"),2e3)),a(!1)})()},[i,e]),s||h)return p.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #020617 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#e5e7eb",padding:20},children:[p.jsx(Pf,{toasts:t.toasts,onClose:t.removeToast}),s?"Loading invoice details...":"Redirecting to dashboard..."]});if(!o)return null;const{invoice:f,items:y}=o,b=v=>Number(v).toLocaleString(ks,{style:"currency",currency:Pa,minimumFractionDigits:0});return p.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #0f172a 0%, #020617 100%)",padding:"40px 20px"},children:p.jsxs("div",{style:{maxWidth:1200,margin:"0 auto"},children:[p.jsxs("div",{style:{marginBottom:24,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx("h1",{style:{margin:0,color:"#e5e7eb",fontSize:32,fontWeight:700},children:"Invoice Details"}),p.jsx("button",{onClick:()=>e("/dashboard"),style:{padding:"10px 20px",borderRadius:8,border:"1px solid #38bdf8",background:"transparent",color:"#38bdf8",fontSize:14,fontWeight:500,cursor:"pointer"},children:"Back to Dashboard"})]}),p.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:12,border:"1px solid #1e293b",padding:24,marginBottom:24},children:[p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:24},children:[p.jsxs("div",{children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:12,marginBottom:8},children:"Invoice Number"}),p.jsx("div",{style:{color:"#e5e7eb",fontSize:18,fontWeight:600},children:f.invoice_no})]}),p.jsxs("div",{children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:12,marginBottom:8},children:"Project Name"}),p.jsx("div",{style:{color:"#e5e7eb",fontSize:18,fontWeight:600},children:f.project_name||"-"})]}),p.jsxs("div",{children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:12,marginBottom:8},children:"Status"}),p.jsx("div",{style:{display:"inline-block",padding:"4px 12px",borderRadius:6,fontSize:14,fontWeight:500,background:f.status==="paid"?"#065f46":f.status==="sent"?"#1e40af":"#374151",color:"#e5e7eb"},children:f.status})]}),p.jsxs("div",{children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:12,marginBottom:8},children:"Total Amount"}),p.jsx("div",{style:{color:"#34d399",fontSize:24,fontWeight:700},children:b(f.total)})]})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:24,marginTop:24},children:[p.jsxs("div",{children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:12,marginBottom:8},children:"Invoice Date"}),p.jsx("div",{style:{color:"#e5e7eb",fontSize:16},children:f.invoice_date})]}),p.jsxs("div",{children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:12,marginBottom:8},children:"Due Date"}),p.jsx("div",{style:{color:"#e5e7eb",fontSize:16},children:f.due_date||"-"})]})]})]}),p.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:12,border:"1px solid #1e293b",padding:24,marginBottom:24},children:[p.jsx("h2",{style:{margin:"0 0 16px 0",color:"#e5e7eb",fontSize:20,fontWeight:600},children:"Client Information"}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:16},children:[p.jsxs("div",{children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:12,marginBottom:4},children:"Name"}),p.jsx("div",{style:{color:"#e5e7eb",fontSize:16},children:f.clients?.name||"-"})]}),p.jsxs("div",{children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:12,marginBottom:4},children:"Company"}),p.jsx("div",{style:{color:"#e5e7eb",fontSize:16},children:f.clients?.company||"-"})]}),p.jsxs("div",{children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:12,marginBottom:4},children:"Email"}),p.jsx("div",{style:{color:"#e5e7eb",fontSize:16},children:f.clients?.email||"-"})]}),p.jsxs("div",{children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:12,marginBottom:4},children:"Phone"}),p.jsx("div",{style:{color:"#e5e7eb",fontSize:16},children:f.clients?.phone||"-"})]}),p.jsxs("div",{children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:12,marginBottom:4},children:"Address"}),p.jsx("div",{style:{color:"#e5e7eb",fontSize:16},children:f.clients?.address||"-"})]}),p.jsxs("div",{children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:12,marginBottom:4},children:"Site Address"}),p.jsx("div",{style:{color:"#e5e7eb",fontSize:16},children:f.clients?.site_address||"-"})]})]})]}),p.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:12,border:"1px solid #1e293b",padding:24,marginBottom:24},children:[p.jsx("h2",{style:{margin:"0 0 16px 0",color:"#e5e7eb",fontSize:20,fontWeight:600},children:"Invoice Items"}),p.jsx("div",{style:{overflowX:"auto"},children:p.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[p.jsx("thead",{children:p.jsxs("tr",{style:{borderBottom:"2px solid #374151"},children:[p.jsx("th",{style:{textAlign:"left",padding:"12px 8px",color:"#9ca3af",fontSize:12,fontWeight:600},children:"Category"}),p.jsx("th",{style:{textAlign:"left",padding:"12px 8px",color:"#9ca3af",fontSize:12,fontWeight:600},children:"Description"}),p.jsx("th",{style:{textAlign:"left",padding:"12px 8px",color:"#9ca3af",fontSize:12,fontWeight:600},children:"Dimensions"}),p.jsx("th",{style:{textAlign:"right",padding:"12px 8px",color:"#9ca3af",fontSize:12,fontWeight:600},children:"Qty"}),p.jsx("th",{style:{textAlign:"right",padding:"12px 8px",color:"#9ca3af",fontSize:12,fontWeight:600},children:"Unit Price"}),p.jsx("th",{style:{textAlign:"right",padding:"12px 8px",color:"#9ca3af",fontSize:12,fontWeight:600},children:"Total"})]})}),p.jsx("tbody",{children:y.map(v=>p.jsxs(o0.Fragment,{children:[p.jsxs("tr",{style:{borderBottom:"1px solid #1f2937"},children:[p.jsx("td",{style:{padding:"12px 8px",color:"#e5e7eb",fontSize:14},children:v.category}),p.jsx("td",{style:{padding:"12px 8px",color:"#e5e7eb",fontSize:14},children:v.description}),p.jsx("td",{style:{padding:"12px 8px",color:"#e5e7eb",fontSize:14},children:v.dimensions||"-"}),p.jsx("td",{style:{padding:"12px 8px",color:"#e5e7eb",fontSize:14,textAlign:"right"},children:v.qty}),p.jsx("td",{style:{padding:"12px 8px",color:"#e5e7eb",fontSize:14,textAlign:"right"},children:b(v.unit_price)}),p.jsx("td",{style:{padding:"12px 8px",color:"#e5e7eb",fontSize:14,textAlign:"right",fontWeight:600},children:b(v.line_total)})]}),v.materials&&v.materials.length>0&&p.jsx("tr",{children:p.jsxs("td",{colSpan:6,style:{padding:"8px 8px 16px 32px",background:"rgba(0, 0, 0, 0.2)"},children:[p.jsx("div",{style:{color:"#9ca3af",fontSize:11,marginBottom:4,fontWeight:600},children:"Materials:"}),p.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:v.materials.map((_,S)=>p.jsxs("div",{style:{padding:"4px 8px",background:"rgba(56, 189, 248, 0.1)",border:"1px solid rgba(56, 189, 248, 0.3)",borderRadius:4,color:"#38bdf8",fontSize:11},children:[_.material_name,": ",_.qty_per_item," ",_.unit," (Total: ",_.total_qty," ",_.unit,")"]},S))})]})})]},v.id))})]})}),p.jsx("div",{style:{marginTop:24,display:"flex",justifyContent:"flex-end"},children:p.jsxs("div",{style:{minWidth:300},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #374151"},children:[p.jsx("span",{style:{color:"#9ca3af",fontSize:14},children:"Subtotal:"}),p.jsx("span",{style:{color:"#e5e7eb",fontSize:14,fontWeight:600},children:b(f.subtotal)})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #374151"},children:[p.jsx("span",{style:{color:"#9ca3af",fontSize:14},children:"Discount:"}),p.jsx("span",{style:{color:"#e5e7eb",fontSize:14,fontWeight:600},children:b(f.discount)})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #374151"},children:[p.jsxs("span",{style:{color:"#9ca3af",fontSize:14},children:["VAT (",f.vat_rate,"%):"]}),p.jsx("span",{style:{color:"#e5e7eb",fontSize:14,fontWeight:600},children:b(f.vat_amount)})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 0",marginTop:8},children:[p.jsx("span",{style:{color:"#e5e7eb",fontSize:18,fontWeight:700},children:"Total:"}),p.jsx("span",{style:{color:"#34d399",fontSize:20,fontWeight:700},children:b(f.total)})]})]})})]}),f.notes&&p.jsxs("div",{style:{background:"rgba(15, 23, 42, 0.6)",borderRadius:12,border:"1px solid #1e293b",padding:24},children:[p.jsx("h2",{style:{margin:"0 0 12px 0",color:"#e5e7eb",fontSize:20,fontWeight:600},children:"Notes"}),p.jsx("div",{style:{color:"#e5e7eb",fontSize:14,whiteSpace:"pre-wrap"},children:f.notes})]})]})})},YR=({children:i})=>{const{user:e,loading:t}=Co();return t?p.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f5f5f5"},children:p.jsx("div",{className:"auth-spinner"})}):e?p.jsx(y0,{to:"/",replace:!0}):p.jsx(p.Fragment,{children:i})},KR=()=>{const i=An(),{user:e}=Co(),s=new URLSearchParams(i.search).get("standalone")==="true",a=i.pathname==="/login",o=!s&&!a&&e;return p.jsxs(p.Fragment,{children:[o&&p.jsx(GC,{}),p.jsxs(J1,{children:[p.jsx(Aa,{path:"/login",element:p.jsx(YR,{children:p.jsx(WC,{})})}),p.jsx(Aa,{path:"/",element:p.jsx(tc,{children:p.jsx(QC,{})})}),p.jsx(Aa,{path:"/dashboard",element:p.jsx(tc,{children:p.jsx(IR,{})})}),p.jsx(Aa,{path:"/preview",element:p.jsx(tc,{children:p.jsx(GR,{})})}),p.jsx(Aa,{path:"/invoice/:id",element:p.jsx(tc,{children:p.jsx(WR,{})})})]})]})},XR=()=>p.jsx(ST,{children:p.jsx(VC,{children:p.jsx(KR,{})})});r1.createRoot(document.getElementById("root")).render(p.jsx(o0.StrictMode,{children:p.jsx(XR,{})}));
